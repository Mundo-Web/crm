var x=Object.defineProperty;var b=(n,a,s)=>a in n?x(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var c=(n,a,s)=>b(n,typeof a!="symbol"?a+"":a,s);import{m as o,j as r,G as p}from"./CreateReactScript-DEiMbi6B.js";import{B as N,i as j}from"./Adminto-lUnuPBnJ.js";import{r as w}from"./server.browser-DAhx53FK.js";class m extends N{constructor(){super(...arguments);c(this,"path","projects")}}c(m,"paginate",async s=>{const{result:e}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});return e}),c(m,"save",async s=>{try{const{status:e,result:t}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(s)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}}),c(m,"status",async({id:s,status:e})=>{try{const{status:t,result:i}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:s,status:e})});if(!t)throw new Error((i==null?void 0:i.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),c(m,"projectStatus",async(s,e)=>{try{const{status:t,result:i}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:s,status:e})});if(!t)throw new Error((i==null?void 0:i.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),c(m,"delete",async s=>{try{const{status:e,result:t}=await o.Fetch(`/api/projects/${s}`,{method:"DELETE"});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});class f{}c(f,"getUser",async a=>{const{result:s}=await o.Fetch(`/api/users-by-projects/${a}`);return(s==null?void 0:s.data)??null}),c(f,"byProject",async a=>{const{result:s}=await o.Fetch(`/api/users-by-projects/project/${a}`);return(s==null?void 0:s.data)??[]}),c(f,"massiveByProject",async a=>{try{const{status:s,result:e}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(a)});if(!s)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:e.message,type:"success"}),!0}catch(s){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:s.message,type:"danger"}),!1}});const O=n=>r.jsx("div",{className:"avatar-group m-0",children:n.map(a=>r.jsx(j,{content:"Cargando...",allowHTML:!0,onShow:async s=>{var d,y;const e=await f.getUser(a),t=moment(e.created_at),l=moment().diff(t,"hours")>12?t.format("lll"):t.fromNow();$(s.popper).find(".tippy-content").addClass("p-0"),s.setContent(w(r.jsx("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"},children:r.jsx("div",{className:"card-body widget-user p-2",children:r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx("div",{className:"avatar-lg me-3 flex-shrink-0",children:r.jsx("img",{src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${a}`,className:"img-fluid rounded-circle",alt:"user",onError:u=>{u.target.src=`//${p.APP_DOMAIN}/assets/img/user-404.svg`}})}),r.jsxs("div",{className:"flex-grow-1 overflow-hidden",children:[r.jsxs("h5",{className:"text-blue mt-0 mb-1",children:[" ",(d=e.name.split(" "))==null?void 0:d[0]," ",(y=e.lastname.split(" "))==null?void 0:y[0]]}),r.jsx("p",{className:"text-dark mb-1 font-13 text-truncate",children:e.email}),r.jsxs("small",{className:"text-muted",children:["Asignado: ",r.jsx("b",{children:l})]})]})]})})})))},children:r.jsx("img",{className:"avatar-group-item avatar-sm rounded-circle mb-0",src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${a}`,onError:s=>{s.target.src=`//${p.APP_DOMAIN}/assets/img/user-404.svg`},style:{backdropFilter:"blur(40px)",marginRight:"6px"}})},`user-${a}`))}),C=(n,a)=>{const s=moment(n),e=moment(a),t=moment();let i=r.jsx(r.Fragment,{});if(t.isBefore(s)){const l=t.diff(s,"hours")>12?s.format("LL"):s.fromNow();i=r.jsxs("i",{className:"text-muted",children:["Empieza ",l]})}else if(t.isAfter(e)){const l=t.diff(e,"hours")>12?e.format("LL"):e.fromNow();i=r.jsxs("i",{className:"text-muted",children:["Finalizo ",l]})}else{const g=e.diff(s),d=t.diff(s)/g*100,u=(h=>h<=33.333?"success":h<=66.667?"warning":"danger")(d);i=r.jsxs("div",{style:{width:"200px"},children:[r.jsxs("p",{className:"mb-0 d-flex justify-content-between",children:[r.jsx("span",{children:moment(n).format("DD MMM YYYY")}),r.jsx("span",{className:"float-end",children:moment(a).format("DD MMM YYYY")})]}),r.jsx("div",{className:`progress progress-bar-alt-${u} progress-xl mb-0 mt-0`,children:r.jsxs("div",{className:`progress-bar bg-${u} progress-bar-animated`,role:"progressbar","aria-valuenow":d,"aria-valuemin":"0","aria-valuemax":"100",style:{width:`${d}%`},children:[d.toFixed(2),"%"]})})]})}return i};export{O as A,C as D,m as P,f as U};

import{r as n,j as e,C as ne,c as ie,L as V,G as z}from"./CreateReactScript-tMW17mTS.js";import{W as re,M as ce,u as le,A as oe,i as q}from"./Adminto-Bb5e2HqY.js";import{L as de}from"./LeadsRest-DDIGF6wv.js";import{H as me}from"./HtmlContent-Brh6lUDE.js";import{w as ue,A as Z}from"./ArrayJoin-6-TTvUmN.js";import"./Logout-Bgiv44Rx.js";import"./sweetalert2.esm.all-Co-2jcRH.js";const he=new re,xe=({messages:D,containerRef:R,lead:Y,loading:U,getMessages:v,theme:C})=>{const N=n.useRef(),u=n.useRef(),S=n.useRef(),p=n.useRef(),d=n.useRef(),O=n.useRef(),y=n.useRef(),[h,M]=n.useState(!1),[L,A]=n.useState(!1),[j,E]=n.useState(null),[x,w]=n.useState(null),[g,T]=n.useState(""),[l,F]=n.useState(!1),[f,G]=n.useState(null),[_,I]=n.useState(null),[H,t]=n.useState(!1);n.useEffect(()=>{N.current&&(N.current.value=g)},[g]),n.useEffect(()=>()=>{x&&URL.revokeObjectURL(x)},[x]),n.useEffect(()=>()=>{f&&f.getTracks().forEach(s=>s.stop())},[f]),n.useEffect(()=>{const s=R.current;if(!s)return;const r=()=>{s.scrollTop===0&&!U&&v&&v()};return s.addEventListener("scroll",r),()=>s.removeEventListener("scroll",r)},[R,U,v]),n.useEffect(()=>{const s=r=>{y.current&&!y.current.contains(r.target)&&F(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),n.useEffect(()=>{H&&f&&d.current&&(d.current.srcObject=f)},[H,f]);const a=async()=>{try{const s=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new MediaRecorder(s),m=[];r.ondataavailable=k=>m.push(k.data),r.onstop=()=>{const k=new Blob(m,{type:"audio/webm"});E(k),w(URL.createObjectURL(k)),s.getTracks().forEach(b=>b.stop())},r.start(),p.current=r,A(!0)}catch(s){console.error("Error accessing microphone:",s)}},i=()=>{p.current&&p.current.state!=="inactive"&&p.current.stop(),A(!1)},c=()=>{p.current&&p.current.state!=="inactive"&&p.current.stop(),A(!1),E(null),x&&URL.revokeObjectURL(x),w(null)},o=async s=>{if(s.preventDefault(),!Y)return;const r=g.trim();!r&&!j&&!_||(M(!0),j?console.warn("Audio upload not implemented yet"):_?console.warn("Camera image upload not implemented yet"):await he.send(Y.id,r),T(""),E(null),x&&URL.revokeObjectURL(x),w(null),I(null),t(!1),M(!1))},P=s=>{s.target.files[0]&&(console.warn("File upload not implemented yet"),s.target.value="")},B=async()=>{try{const s=await navigator.mediaDevices.getUserMedia({video:!0});G(s),t(!0),F(!1)}catch(s){console.error("Error accessing camera:",s)}},K=()=>{f&&(f.getTracks().forEach(s=>s.stop()),G(null)),t(!1),I(null)},te=()=>{const s=O.current,r=d.current;if(!s||!r)return;s.width=r.videoWidth,s.height=r.videoHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(k=>{I(k),K()},"image/jpeg",.95)},se=()=>g.trim()||j||_;let X=!1;return e.jsxs("div",{className:"card-body p-0 position-relative border",style:{backgroundColor:C=="light"?"rgb(245, 241, 235)":"rgb(22, 23, 23)"},children:[e.jsx("div",{className:"position-absolute",style:{top:0,right:0,bottom:0,left:0,backgroundImage:"url(/assets/img/doodles.png)",backgroundRepeat:"repeat",zIndex:0,opacity:C=="light"?1:.0625}}),e.jsxs("section",{className:"d-flex flex-column position-relative",style:{height:"calc(100vh - 260px)",zIndex:1},children:[e.jsxs("ul",{ref:R,className:"conversation-list slimscroll flex-grow-1 px-3 pt-3",style:{overflowY:"auto",scrollBehavior:"smooth",position:"relative"},children:[U&&e.jsxs("li",{className:"text-center py-1 px-2 rounded-pill mx-auto",style:{position:"sticky",top:0,zIndex:10,width:"max-content",backgroundColor:"var(--bs-light)"},children:[e.jsx("i",{className:"mdi mdi-spin mdi-loading"}),e.jsx("small",{className:"text-muted ms-2",children:"Cargando mensajes..."})]}),D.map((s,r)=>{var Q;const m=s.role!=="Human",k=X===m?"3px":"12px";X=m;let b=((Q=s.message)==null?void 0:Q.replace(/\{\{.*?\}\}/gs,""))||"",W="";return b.startsWith("/attachment:")&&(W=b.split(`
`)[0],b=b.replace(W,"")),s.role=="Form"?e.jsx("li",{children:e.jsx("div",{className:"chat-day-title mt-3 mb-0",children:e.jsx("small",{className:"title badge badge-soft-dark rounded-pill",children:b})})},r):e.jsx("li",{className:m?"odd":"",style:{marginBottom:r<D.length-1?"0px":"24px",marginTop:k},children:e.jsx("div",{className:"message-list",children:e.jsx("div",{className:"conversation-text",children:e.jsxs("div",{className:`ctext-wrap ${m?`message-out-${C}`:`message-in-${C}`}`,style:{boxShadow:"rgba(11, 20, 26, 0.13) 0px 1px 0.5px 0px",padding:"6px 8px"},children:[s.campaign&&e.jsxs("div",{className:"rounded p-2 mb-2",style:{backgroundColor:"rgba(240, 240, 240, 0.125)",cursor:s.campaign.link?"pointer":"default",maxWidth:"240px"},onClick:()=>{s.campaign.link&&window.open(s.campaign.link,"_blank")},children:[e.jsxs("div",{className:"d-flex gap-1",style:{maxWidth:"100%"},children:[e.jsx("div",{className:"fw-bold",children:s.campaign.code}),e.jsx("div",{className:"small text-truncate",children:s.campaign.title})]}),e.jsx("small",{className:"d-block text-truncate",style:{maxWidth:300},children:s.campaign.link})]}),W&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:W.replace("/attachment:",""),className:"mb-1",alt:"attachment",style:{minWidth:"300px",width:"100%",maxWidth:"100%",minHeight:"200px",maxHeight:"300px",borderRadius:"4px",objectFit:"cover"},onError:ae=>$(ae.target).remove()}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("a",{className:"btn btn-xs btn-light mb-1 text-nowrap d-flex text-end",href:W.replace("/attachment:",""),target:"_blank",rel:"noreferrer",download:!0,children:[e.jsx("i",{className:"mdi mdi-download me-1"}),e.jsx("span",{children:"Descargar adjunto"})]})}),!b.trim()&&e.jsx("span",{className:"time mt-0 float-end",style:{fontSize:"10px",marginLeft:"6px",marginTop:"8px !important"},children:moment(s.created_at).subtract(5,"hours").format("HH:mm")})]}),b.trim()&&e.jsx(me,{className:"text-start font-14",html:ue(b+`<span class="time mt-0 float-end" style="font-size: 10px; margin-left: 6px; margin-top: 8px !important">${moment(s.created_at).subtract(5,"hours").format("HH:mm")}</span>`)})]})})})},r)})]}),e.jsx("form",{className:"p-2 pt-0 conversation-input",onSubmit:o,children:e.jsxs("label",{className:`row g-0 align-items-end p-1 ${C=="dark"?"bg-light":"bg-white"}`,htmlFor:"message-input",style:{borderRadius:"24px"},children:[e.jsxs("div",{className:"col-auto mt-0",children:[e.jsxs("div",{className:"dropup",ref:y,children:[e.jsx("button",{type:"button",className:"btn btn-light btn-sm dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":l,onClick:()=>F(!l),disabled:h||L,title:"Adjuntar archivo",style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},children:e.jsx("i",{className:`mdi ${l?"mdi-close":"mdi-plus"}`})}),e.jsxs("div",{className:"dropdown-menu mb-1",children:[e.jsxs("button",{className:"dropdown-item",href:"#",onClick:s=>{var r,m;s.preventDefault(),(r=u.current)==null||r.setAttribute("accept",".pdf,.doc,.docx"),(m=u.current)==null||m.click()},children:[e.jsx("i",{className:"mdi mdi-file-document me-2",style:{color:"#7F66FF"}}),"Documentos"]}),e.jsxs("button",{className:"dropdown-item",href:"#",onClick:s=>{var r,m;s.preventDefault(),(r=u.current)==null||r.setAttribute("accept","image/*,video/*"),(m=u.current)==null||m.click()},children:[e.jsx("i",{className:"mdi mdi-image me-2",style:{color:"#007BFC"}}),"Fotos y videos"]}),e.jsxs("button",{className:"dropdown-item",href:"#",onClick:s=>{s.preventDefault(),B()},children:[e.jsx("i",{className:"mdi mdi-camera me-2",style:{color:"#FF2E74"}}),"Cámara"]}),e.jsxs("button",{className:"dropdown-item",href:"#",onClick:s=>{var r,m;s.preventDefault(),(r=u.current)==null||r.setAttribute("accept","audio/*"),(m=u.current)==null||m.click()},children:[e.jsx("i",{className:"mdi mdi-headphones me-2",style:{color:"#FB6533"}}),"Audio"]})]})]}),e.jsx("input",{ref:u,type:"file",className:"d-none",onChange:P})]}),e.jsx("div",{className:"col mt-0",children:L?e.jsxs("div",{className:"d-flex align-items-center justify-content-center bg-light rounded-pill",style:{minHeight:"38px"},children:[e.jsx("span",{className:"text-danger me-2",children:"●"})," Grabando..."]}):j?e.jsx("div",{className:"d-flex align-items-center bg-light rounded-pill px-2",style:{minHeight:"38px"},children:e.jsx("audio",{ref:S,src:x,className:"me-2",controls:!0,controlsList:"nodownload",style:{height:"30px"}})}):_?e.jsx("div",{className:"d-flex align-items-center bg-light rounded-pill px-2",style:{minHeight:"38px"},children:e.jsx("span",{className:"me-2",children:"📷 Foto capturada"})}):e.jsx("textarea",{ref:N,id:"message-input",className:"form-control w-100",placeholder:"Ingrese su mensaje aquí",rows:1,style:{minHeight:"38px",maxHeight:"188px",fieldSizing:"content",resize:"none",border:"none",backgroundColor:"transparent"},disabled:h||!!j||!!_,value:g,onChange:s=>T(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),se()&&o(s))}})}),e.jsx("div",{className:"col-auto mt-0",children:_&&!H?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-danger btn-sm me-1",onClick:()=>I(null),style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Descartar foto",children:e.jsx("i",{className:"mdi mdi-delete"})}),e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",disabled:h,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Enviar foto",children:e.jsx("i",{className:"mdi mdi-send"})})]}):j&&!L?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-danger btn-sm me-1",onClick:c,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Descartar audio",children:e.jsx("i",{className:"mdi mdi-delete"})}),e.jsx("button",{type:"submit",className:"btn btn-success btn-sm",disabled:h,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Enviar audio",children:e.jsx("i",{className:"mdi mdi-send"})})]}):L?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-warning btn-sm me-1",onClick:i,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Pausar grabación",children:e.jsx("i",{className:"mdi mdi-pause"})}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:c,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Descartar grabación",children:e.jsx("i",{className:"mdi mdi-delete"})})]}):e.jsx(e.Fragment,{children:g.trim()?e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",disabled:h,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},children:h?e.jsx("i",{className:"mdi mdi-spin mdi-loading"}):e.jsx("i",{className:"mdi mdi-send"})}):e.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:a,disabled:h,style:{borderRadius:"50%",width:"38px",height:"38px",padding:0},title:"Grabar audio",children:e.jsx("i",{className:"mdi mdi-microphone"})})})})]})})]}),H&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0,0,0,0.8)",zIndex:9999},children:e.jsxs("div",{className:"card",style:{width:"90%",maxWidth:"500px"},children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"Cámara"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:K,children:e.jsx("i",{className:"mdi mdi-close"})})]}),e.jsxs("div",{className:"card-body p-0",children:[e.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:"w-100",style:{maxHeight:"400px"}}),e.jsx("canvas",{ref:O,className:"d-none"})]}),e.jsx("div",{className:"card-footer d-flex justify-content-center",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-lg rounded-pill",onClick:te,children:[e.jsx("i",{className:"mdi mdi-camera me-2"}),"Tomar foto"]})})]})})]})},J=new de;J.paginateSufix=null;const ee=new ce,pe=new Audio("/assets/sounds/notification.wav"),ge=({users:D,activeLeadId:R,...Y})=>{const U=Local.get("adminto_settings")??{},[v,C]=n.useState(U.theme??"light"),[N,u]=n.useState([]),[S,p]=n.useState(R),[d,O]=n.useState([V.service_user.id]),[y,h]=n.useState([]),[M,L]=n.useState(!0),[A,j]=n.useState(!1),[E,x]=n.useState(!1),{socket:w}=le(),g=n.useRef(),T=n.useRef(),l=N.find(t=>t.id==S),F=y.filter(t=>t.wa_id==(l==null?void 0:l.contact_phone)),f=async()=>{L(!0);const t={fields:["clients.id","clients.contact_name","clients.contact_phone","clients.last_message","clients.last_message_microtime","clients.assigned_to"],withCount:["unSeenMessages"],with:["assigned"],sort:[{selector:"last_message_microtime",desc:!0}],limit:40};d.length&&(t.filter=Z(d.map(i=>["assigned_to","=",i]),"OR"));const{data:a}=await J.paginate(t);u(a??[]),L(!1)},G=async()=>{if(E||M)return;x(!0);const t=Math.min(...N.map(c=>c.last_message_microtime??Date.now()*1e3)),a={fields:["clients.id","clients.contact_name","clients.contact_phone","clients.last_message","clients.last_message_microtime","clients.assigned_to"],withCount:["unSeenMessages"],with:["assigned"],sort:[{selector:"last_message_microtime",desc:!0}],skip:0,take:40,filter:[["last_message_microtime","<",t]]};d.length&&(a.filter=[Z(d.map(c=>["assigned_to","=",c]),"OR"),"and",a.filter]);const{data:i}=await J.paginate(a);i&&i.length&&u(c=>[...c,...i]),x(!1)},_=async()=>{if(!l||A)return;j(!0);const t=y.filter(i=>i.wa_id==l.contact_phone).sort((i,c)=>c.microtime-i.microtime)[0]??{microtime:(Date.now()+5*60*60*1e3)*1e3},a=await ee.paginate({summary:{contact_phone:l.contact_phone},filter:[["microtime","<=",t.microtime],"and",["wa_id","contains",l.contact_phone]],sort:[{selector:"microtime",desc:!0}],skip:0,take:40});h(i=>[...i,...a.data??[]].sort((c,o)=>c.microtime-o.microtime)),j(!1)},I=async()=>{if(!l)return;const t=y.filter(i=>i.wa_id===l.contact_phone).sort((i,c)=>c.microtime-i.microtime)[0];if(!t)return;const a=await ee.paginate({summary:{contact_phone:l.contact_phone},filter:[["microtime",">",t.microtime],"and",["wa_id","contains",l.contact_phone]],sort:[{selector:"microtime",desc:!1}],skip:0,take:100});a.data&&a.data.length&&h(i=>[...i,...a.data].sort((c,o)=>c.microtime-o.microtime))},H=async()=>{if(!l)return;F.length>0||await _()};return n.useEffect(()=>{f()},[d]),n.useEffect(()=>{const t=a=>{a.key==="Escape"&&p(null)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),n.useEffect(()=>{S&&(H(),I())},[S]),n.useEffect(()=>{if(w)return w.on("message.created",t=>{if(t.role=="Human"&&pe.play(),t.wa_id!==(l==null?void 0:l.contact_phone))return;const{id:a}=t;h(i=>i.find(o=>o.id===a)?i.map(o=>o.id===a?{...o,...t}:o):[...i,t].sort((o,P)=>o.microtime-P.microtime))}),w.on("client.updated",t=>{u(a=>{const i=a.findIndex(c=>c.id===t.id);if(i!==-1){const c=[...a];return c[i]={...c[i],...t},c}return[...a,t]})}),()=>{}},[w,S,l]),n.useEffect(()=>{if(!g.current)return;const t=g.current;t.scrollTop=t.scrollHeight},[y]),n.useEffect(()=>{const t=T.current;if(!t)return;const a=()=>{t.scrollTop+t.clientHeight>=t.scrollHeight-10&&G()};return t.addEventListener("scroll",a),()=>t.removeEventListener("scroll",a)},[N,M,E,d]),e.jsx(oe,{...Y,title:"Chat",showTitle:!1,setThemeParent:C,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-3 col-lg-4",children:e.jsx("div",{className:"card chat-list-card mb-xl-0",children:e.jsxs("div",{className:"card-body p-0",children:[e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"d-flex w-100 gap-0 align-items-center",style:{overflowX:"auto"},children:[D.map(t=>e.jsx(q,{content:`${t.name} ${t.lastname}`,children:e.jsx("div",{onClick:()=>{const a=[...d],i=t.service_user.id,c=a.indexOf(i);c>-1?a.splice(c,1):a.push(i),O(a)},className:`rounded-pill ${d.includes(t.service_user.id)?"bg-purple":""}`,style:{cursor:"pointer",padding:"2px",marginRight:"2px"},children:e.jsx("img",{className:"avatar-xs rounded-circle",src:`//${z.APP_DOMAIN}/api/profile/thumbnail/${t.relative_id}`,alt:t.name,style:{objectFit:"cover",objectPosition:"center"}})})},t.id)),d.length>0&&e.jsx(q,{content:"Limpiar filtros",children:e.jsx("button",{className:"btn btn-xs btn-soft-danger ms-1 rounded-pill",onClick:()=>O([]),children:e.jsx("i",{className:"mdi mdi-trash-can-outline"})})})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"search-box chat-search-box",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar lead por nombre o número..."}),e.jsx("i",{className:"mdi mdi-magnify search-icon"})]})]}),e.jsx("hr",{className:"my-0"}),e.jsx("div",{ref:T,style:{overflowY:"auto",height:"calc(100vh - 300px)"},children:M?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading contacts..."})}),e.jsx("p",{className:"mt-2 mb-0 text-muted",children:"Cargando contactos..."})]}):e.jsxs("ul",{className:"list-unstyled chat-list mb-0",children:[N.sort((t,a)=>new Date(a.last_message_microtime)-new Date(t.last_message_microtime)).map(t=>{var P;const a=new Date((t.last_message_microtime??0)/1e3),i=new Date;i.setHours(0,0,0,0);const c=new Date(i);c.setDate(c.getDate()-1);let o;if(a>=i)o=a.toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit"});else if(a>=c)o="Ayer";else{const B=new Date().getFullYear();a.getFullYear()===B?o=a.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"}):o=a.toLocaleDateString("es-ES",{month:"2-digit",year:"numeric"})}return e.jsx("li",{className:`${t.unread?"unread":""} ${S==t.id?"bg-light":""}`,children:e.jsx("a",{onClick:B=>{p(t.id),B.stopPropagation()},style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex",children:[e.jsxs("div",{className:`position-relative flex-shrink-0 chat-user-img ${t.online?"active":""} align-self-center me-2`,children:[e.jsx("img",{src:`//${z.APP_DOMAIN}/api/profile/thumbnail/${t.avatar}`,className:"rounded-circle avatar-sm bg-light",alt:t.name,style:{padding:0,border:"none"}}),t.assigned_to&&((P=t.assigned)==null?void 0:P.relative_id)&&(d.length===0||d.length>1||d[0]!==V.service_user.id)&&e.jsx(q,{content:`${t.assigned.name} ${t.assigned.lastname}`,children:e.jsx("img",{className:"position-absolute rounded-pill",src:`//${z.APP_DOMAIN}/api/profile/thumbnail/${t.assigned.relative_id}`,alt:t.assigned.fullname,style:{right:"-4px",bottom:"-4px",objectFit:"cover",objectPosition:"center",padding:0,border:`2px solid ${v=="light"?"#ffffff":"#313844"}`,width:"18px",aspectRatio:1}})},t.assigned.id)]}),e.jsxs("div",{className:"flex-grow-1 overflow-hidden",children:[e.jsx("h5",{className:`text-truncate font-14 mt-0 mb-1 ${t.un_seen_messages_count>0?"fw-bold":""}`,children:t.contact_name}),e.jsx("p",{className:`text-truncate mb-0 ${t.un_seen_messages_count>0?"fw-bold":""}`,title:t.last_message??void 0,style:{color:t.un_seen_messages_count>0?v=="light"?"#343a40":"#f7f7f7":void 0},children:t.last_message??e.jsx("i",{className:"text-muted",children:"Sin mensaje"})})]}),e.jsxs("div",{className:"d-flex flex-column align-items-end",children:[e.jsx("div",{className:`font-11 ${t.un_seen_messages_count>0?"text-success":""}`,children:o}),t.un_seen_messages_count>0&&e.jsx("span",{className:"badge bg-success rounded-pill mt-1",children:t.un_seen_messages_count})]})]})})},t.id)}),E&&e.jsx("li",{className:"text-center py-2",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading more..."})})})]})})]})})}),e.jsx("div",{className:"col-xl-9 col-lg-8",children:e.jsx("div",{className:"conversation-list-card card",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`card-header ${v=="light"?"bg-white":"bg-light"}`,children:e.jsx("div",{className:"d-flex",children:e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h5",{className:"my-0 text-truncate",children:l.contact_name}),e.jsxs("p",{className:"font-13 text-muted mb-0",children:[e.jsx("i",{className:"mdi mdi-phone me-1 font-11"})," ",l.contact_phone]})]})})}),e.jsx(xe,{containerRef:g,messages:F,lead:l,loading:A,theme:v})]}):e.jsx("div",{className:"card-body d-flex align-items-center justify-content-center",style:{height:"calc(100vh - 184px)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"/assets/img/icon.svg",alt:`Logo ${z.APP_NAME}`,className:"mb-2",style:{width:60,height:60,objectFit:"contain"}}),e.jsxs("h4",{className:"text-muted",children:["Módulo de chat de ",z.APP_NAME]}),e.jsx("p",{className:"text-muted",children:"Selecciona un contacto para empezar a interactuar"})]})})})})]})})};ne((D,R)=>{ie(D).render(e.jsx(ge,{...R}))});

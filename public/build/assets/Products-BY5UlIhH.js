var F=Object.defineProperty;var T=(r,n,o)=>n in r?F(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o;var N=(r,n,o)=>(T(r,typeof n!="symbol"?n+"":n,o),o);import{R as t,C as A,c as D,r as s}from"./CreateReactScript-DiMSE74L.js";import{B as M,A as q,i as g,S as G}from"./Adminto-DDJrXyEx.js";import{M as I}from"./Modal-DIHwUr7I.js";import{I as y}from"./InputFormGroup-TM-cwmw7.js";import{T as L}from"./TextareaFormGroup-DptRN7bF.js";import"./server.browser-BzA2yPSr.js";import{S as O}from"./SelectFormGroup-Lynb75r5.js";class W extends M{constructor(){super(...arguments);N(this,"path","products")}}const _=({className:r,ribbon:n,children:o,...u})=>t.createElement("article",{className:`pricing-column ${r} mb-0`,...u},n?t.createElement("div",{className:"ribbon",style:{left:-5}},t.createElement("span",null,n)):"",t.createElement("div",{className:"card mb-0"},t.createElement("div",{className:"inner-box card-body p-2"},o))),h=new W,j=({products:r=[],types:n=[],can:o})=>{const u=s.useRef(),m=s.useRef(),f=s.useRef(),p=s.useRef(),d=s.useRef(),E=s.useRef(),b=s.useRef(),[C,x]=s.useState(!1),[R,v]=s.useState(r),[S,z]=s.useState(n),w=e=>{e!=null&&e.id?x(!0):x(!1),m.current.value=(e==null?void 0:e.id)||null,$(f.current).val((e==null?void 0:e.type_id)||null).trigger("change"),p.current.value=(e==null?void 0:e.name)||null,d.current.value=(e==null?void 0:e.price)||null,E.current.value=(e==null?void 0:e.color)||null,b.current.value=(e==null?void 0:e.description)||null,$(u.current).modal("show")},k=async e=>{e.preventDefault();const c={id:m.current.value||void 0,type_id:f.current.value,name:p.current.value,price:d.current.value,color:E.current.value,description:b.current.value},a=await h.save(c);if(!a)return;$(u.current).modal("hide");const i=structuredClone(R).map(l=>l.id==a.id?a:l);i.find(l=>l.id==a.id)||i.push(a),v(i)},P=async({id:e,status:c})=>{await h.status({id:e,status:c})&&v(i=>i.map(l=>(l.id==e&&(l.status=1),l)))},B=async e=>{const{isConfirmed:c}=await G.fire({title:"Estas seguro?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!c||!await h.delete(e)||v(i=>i.map(l=>(l.id==e&&(l.status=null),l)))};return console.log(R),t.createElement(t.Fragment,null,t.createElement("div",{className:"row mb-4"},t.createElement("div",{className:"text-center"},t.createElement("button",{className:"btn btn-success btn-sm",onClick:w},t.createElement("i",{className:"fa fa-plus me-1"}),"Agregar producto"))),t.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-3",style:{height:"max-height"}},R.map((e,c)=>t.createElement(_,{key:c,style:{width:"300px",textDecorationLine:e.status==null&&"line-through",opacity:e.status==null&&.5}},t.createElement("h4",{className:`${e.ribbon?"ms-4":""} text-center text-truncate line-clamp-2`},e.name),t.createElement("table",null,t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{style:{width:"100%"}},t.createElement("small",{className:"mb-1",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"36px"}},e.description||"- Sin descripciÃ³n -"),t.createElement("b",null,"S/.",Number(e.price).toFixed(2))),t.createElement("td",{className:"text-end"},e.status==null?t.createElement(g,{content:"Restaurar"},t.createElement("button",{className:"btn btn-xs btn-soft-dark fas fa-trash-restore",onClick:()=>P({id:e.id,status:!1})})):t.createElement(t.Fragment,null,t.createElement(g,{content:"Editar"},t.createElement("button",{className:"btn btn-xs btn-soft-primary fa fa-pen mb-1",onClick:()=>w(e)})),t.createElement(g,{content:"Eliminar"},t.createElement("button",{className:"btn btn-xs btn-soft-danger fa fa-times",onClick:()=>B(e.id)})))))))))),t.createElement(I,{modalRef:u,title:C?"Editar producto":"Agregar producto",onSubmit:k,size:"sm"},t.createElement("div",{className:"row",id:"main-container"},t.createElement("input",{ref:m,type:"hidden"}),t.createElement(O,{eRef:f,label:"Tipo de producto",dropdownParent:"#main-container",tags:!0,required:!0},S.map((e,c)=>t.createElement("option",{key:c,value:e.id},e.name))),t.createElement(y,{eRef:p,label:"Producto",col:"col-12",required:!0}),t.createElement(y,{eRef:d,label:"Precio",col:"col-12",type:"number",step:.01}),t.createElement(y,{eRef:E,label:"Color (Referencial)",col:"col-12",type:"color"}),t.createElement(L,{eRef:b,label:"Descripcion",col:"col-12"}))))};A((r,n)=>{D(r).render(t.createElement(q,{...n,title:"Productos"},t.createElement(j,{...n})))});

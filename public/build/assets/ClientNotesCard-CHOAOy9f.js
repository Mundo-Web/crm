var w=Object.defineProperty;var v=(c,s,r)=>s in c?w(c,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[s]=r;var l=(c,s,r)=>(v(c,typeof s!="symbol"?s+"":s,r),r);import{m as o,R as e,G as x}from"./CreateReactScript-DiMSE74L.js";import{B as h}from"./Adminto-Cg0uEWCF.js";class S extends h{constructor(){super(...arguments);l(this,"path","client-notes");l(this,"byClient",async r=>{const{result:a}=await o.Fetch(`/api/${this.path}/client/${r}`);return(a==null?void 0:a.data)??[]})}}class b extends h{constructor(){super(...arguments);l(this,"path","clients");l(this,"get",async r=>{try{const{status:a,result:t}=await o.Fetch(`/api/${this.path}/${r}`);if(!a)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return t.data}catch(a){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),null}})}}l(b,"assign",async(r,a)=>{try{const{status:t,result:n}=await o.Fetch("/api/clients/assign",{method:a?"PUT":"DELETE",body:JSON.stringify({id:r})});if(!t)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),l(b,"clientStatus",async(r,a)=>{try{const{status:t,result:n}=await o.Fetch("/api/clients/client-status",{method:"PATCH",body:JSON.stringify({client:r,status:a})});if(!t)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}});class L extends h{constructor(){super(...arguments);l(this,"path","leads");l(this,"get",async r=>{try{const{status:a,result:t}=await o.Fetch(`/api/${this.path}/${r}`);if(!a)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return t.data}catch(a){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),null}});l(this,"all",async()=>{try{const{status:r,result:a}=await o.Fetch(`/api/${this.path}`);if(!r)throw new Error((a==null?void 0:a.message)||"Ocurrio un error inesperado");return a.data}catch(r){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),[]}});l(this,"leadStatus",async r=>{try{const{status:a,result:t}=await o.Fetch(`/api/${this.path}/status`,{method:"POST",body:JSON.stringify(r)});if(!a)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return!0}catch(a){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}});l(this,"manageStatus",async r=>{try{const{status:a,result:t}=await o.Fetch(`/api/${this.path}/manage-status`,{method:"POST",body:JSON.stringify(r)});if(!a)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return!0}catch(a){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}});l(this,"attend",async(r,a)=>{try{const{status:t,result:n}=await o.Fetch(`/api/${this.path}/attend/${r}`,{method:a?"PUT":"DELETE"});if(!t)throw new Error((n==null?void 0:n.message)||"Ocurrio un error inesperado");return!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}})}}const N=({html:c})=>e.createElement("div",{dangerouslySetInnerHTML:{__html:c}}),$=({id:c,status:s,name:r,description:a,assigned:t,priority:n,type:g,onChange:m,ends_at:u})=>{const i={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},E={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},p={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.createElement("div",{className:"card border border-default mb-1"},e.createElement("div",{className:"card-body p-2"},e.createElement("blockquote",{className:"card-bodyquote mb-0"},e.createElement("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center"},e.createElement("div",null,m?e.createElement(e.Fragment,null,e.createElement("button",{className:`btn btn-xs ${i[s].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.createElement("i",{className:i[s].icon})," ",s," ",e.createElement("i",{className:"mdi mdi-chevron-down"})),e.createElement("div",{className:"dropdown-menu"},Object.keys(i).map((d,y)=>e.createElement("span",{key:`status-${y}`,className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>m(c,d)},e.createElement("i",{className:i[d].icon})," ",d)))):e.createElement("span",{className:`btn btn-xs ${i[s].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"}},e.createElement("i",{className:i[s].icon})," ",s)),e.createElement("small",{className:"text-muted ms-1"},"vence ",moment(u).fromNow())),e.createElement("div",{className:"mb-1"},e.createElement("span",{class:"badge bg-light text-dark me-1"},e.createElement("i",{className:E[g].icon})," ",g),e.createElement("span",{class:`badge ${p[n].color}`},n)),e.createElement("h5",{className:"mt-0"},r),a&&e.createElement("small",null,e.createElement(N,{html:a}))),t&&e.createElement("small",null,e.createElement("img",{src:`//${x.APP_DOMAIN}/api/profile/thumbnail/${t.relative_id}`,alt:t.fullname,class:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.createElement("b",null,t.fullname))))},F=({id:c,type:s,name:r,description:a,created_at:t,updated_at:n,user_id:g,tasks:m,onTaskChange:u,showOptions:i=!0,session:E,onDeleteNote:p,onUpdateNote:d})=>s?e.createElement("div",{className:"card border border-primary mb-2"},r&&e.createElement("div",{className:"card-header p-2 d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:`${(s==null?void 0:s.icon)??"mdi mdi-clock"} me-1`})," ",r),i&&g==E.service_user.id&&e.createElement("div",{className:"dropdown"},e.createElement("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"}},e.createElement("i",{className:"mdi mdi-dots-vertical"})),e.createElement("div",{className:"dropdown-menu dropdown-menu-end"},e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>d({id:c,type:s,name:r,description:a,tasks:m})},e.createElement("i",{className:"fa fa-pen me-1"}),"Editar"),e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(c)},e.createElement("i",{className:"fa fa-trash me-1"}),"Eliminar")))),e.createElement("div",{className:"card-body p-2"},a&&e.createElement("div",{className:"card-text"},e.createElement(N,{html:a})),m.length>0&&m.map((y,f)=>e.createElement($,{key:`task-${f}`,...y,onChange:u})),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(t).format("LLL")," ",n!=t&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))))):e.createElement("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"}},e.createElement("p",{className:"card-text mb-0"},e.createElement("i",{className:"mdi mdi-clock me-1"}),r),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(t).format("LLL")," ",n!=t&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))));export{S as C,L,$ as T,F as a,b};

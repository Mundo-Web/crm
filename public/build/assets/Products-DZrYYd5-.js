var E=Object.defineProperty;var P=(t,r,l)=>r in t?E(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l;var g=(t,r,l)=>P(t,typeof r!="symbol"?r+"":r,l);import{j as e,C as B,c as D,r as c}from"./CreateReactScript-DiT3hDbE.js";import{B as F,A,i as j,S as M}from"./Adminto-De12RiAo.js";import{M as T}from"./Modal-Zb77CfSz.js";import{I as b}from"./InputFormGroup-CbQnIdio.js";import{T as I}from"./TextareaFormGroup-BDSgQCfr.js";import"./server.browser-DOmhYhu7.js";import{N as L}from"./Number2Currency-e57Tgsuk.js";class q extends F{constructor(){super(...arguments);g(this,"path","products")}}const G=({className:t,ribbon:r,children:l,cardStyle:u,...d})=>e.jsxs("article",{className:`pricing-column ${t} mb-0`,...d,children:[r?e.jsx("div",{className:"ribbon",style:{left:-5},children:e.jsx("span",{children:r})}):"",e.jsx("div",{className:"card mb-0",style:u,children:e.jsx("div",{className:"inner-box card-body p-2",children:l})})]}),v=new q,O=({products:t=[],types:r=[],can:l})=>{const u=c.useRef(),d=c.useRef(),m=c.useRef(),x=c.useRef(),f=c.useRef(),h=c.useRef(),[w,y]=c.useState(!1),[N,p]=c.useState(t),R=s=>{s!=null&&s.id?y(!0):y(!1),d.current.value=(s==null?void 0:s.id)||null,m.current.value=(s==null?void 0:s.name)||null,x.current.value=(s==null?void 0:s.price)||null,f.current.value=(s==null?void 0:s.color)||null,h.current.value=(s==null?void 0:s.description)||null,$(u.current).modal("show")},C=async s=>{s.preventDefault();const i={id:d.current.value||void 0,name:m.current.value,price:x.current.value,color:f.current.value,description:h.current.value},o=await v.save(i);if(!o)return;$(u.current).modal("hide");const a=structuredClone(N).map(n=>n.id==o.id?o:n);a.find(n=>n.id==o.id)||a.push(o),p(a)},S=async({id:s,status:i})=>{await v.status({id:s,status:i})&&p(a=>a.map(n=>(n.id==s&&(n.status=1),n)))},k=async s=>{const{isConfirmed:i}=await M.fire({title:"Estas seguro?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!i||!await v.delete(s)||p(a=>a.filter(n=>n.id!=s))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"float-end",children:e.jsxs("button",{className:"btn btn-success btn-sm",onClick:R,children:[e.jsx("i",{className:"fa fa-plus me-1"}),"Agregar producto"]})}),e.jsx("h4",{className:"header-title my-0",children:"Lista de productos"})]}),e.jsxs("div",{className:"card-body",style:{height:"calc(100vh - 160px)",overflowY:"auto"},children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"text-center"})}),e.jsx("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-3",style:{height:"max-height"},children:N.map((s,i)=>e.jsxs(G,{style:{width:"300px",textDecorationLine:s.status==null&&"line-through",opacity:s.status==null&&.5},cardStyle:{border:`1px solid ${s.color}44`,backgroundColor:`${s.color}11`},children:[e.jsx("h4",{className:`${s.ribbon?"ms-4":""} text-center text-truncate line-clamp-2`,style:{cursor:s.color},children:s.name}),e.jsx("table",{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{style:{width:"100%"},children:[e.jsx("small",{className:"mb-1",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"36px"},children:s.description||"- Sin descripciÃ³n -"}),e.jsxs("b",{children:["S/. ",L(s.price)]})]}),e.jsx("td",{className:"text-end",children:s.status==null?e.jsx(j,{content:"Restaurar",children:e.jsx("button",{className:"btn btn-xs btn-soft-dark fas fa-trash-restore",onClick:()=>S({id:s.id,status:!1})})}):e.jsxs(e.Fragment,{children:[e.jsx(j,{content:"Editar",children:e.jsx("button",{className:"btn btn-xs btn-soft-primary fa fa-pen mb-1",onClick:()=>R(s)})}),e.jsx(j,{content:"Eliminar",children:e.jsx("button",{className:"btn btn-xs btn-soft-danger fa fa-times",onClick:()=>k(s.id)})})]})})]})})})]},i))})]})]})})}),e.jsx(T,{modalRef:u,title:w?"Editar producto":"Agregar producto",onSubmit:C,size:"sm",children:e.jsxs("div",{className:"row",id:"main-container",children:[e.jsx("input",{ref:d,type:"hidden"}),e.jsx(b,{eRef:m,label:"Producto",col:"col-12",required:!0}),e.jsx(b,{eRef:x,label:"Precio",col:"col-7",type:"number",step:.01}),e.jsx(b,{eRef:f,label:"Color",col:"col-5",type:"color"}),e.jsx(I,{eRef:h,label:"Descripcion",col:"col-12"})]})})]})};B((t,r)=>{D(t).render(e.jsx(A,{...r,title:"Productos",children:e.jsx(O,{...r})}))});

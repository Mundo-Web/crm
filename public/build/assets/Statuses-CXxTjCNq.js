var N=Object.defineProperty;var w=(l,r,a)=>r in l?N(l,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[r]=a;var g=(l,r,a)=>(w(l,typeof r!="symbol"?r+"":r,a),a);import{C,c as T,R as t,r as o}from"./CreateReactScript-Cr76lECz.js";import{R as n}from"./ReactAppend-BUdEshxq.js";import{a as S,S as k}from"./SetSelectValue-CfjBp_ib.js";import{B as F,A as D}from"./Adminto-D9Qh2p9j.js";import{M as A,T as B}from"./TextareaFormGroup-DpQiZCGF.js";import{T as G,a as p}from"./Table-BOyMB7KG.js";import{I as R}from"./InputFormGroup-DfllSyoc.js";class I extends F{constructor(){super(...arguments);g(this,"path","statuses")}}const i=new I,q=()=>{const l=o.useRef(),r=o.useRef(),a=o.useRef(),u=o.useRef(),m=o.useRef(),f=o.useRef(),d=o.useRef(),[h,b]=o.useState(!1),E=e=>{var s,c;e!=null&&e.id?b(!0):b(!1),a.current.value=(e==null?void 0:e.id)||null,k(u.current,(s=e==null?void 0:e.table)==null?void 0:s.id,(c=e==null?void 0:e.table)==null?void 0:c.name),m.current.value=(e==null?void 0:e.name)||null,f.current.value=(e==null?void 0:e.color)||"#343a40",d.current.value=(e==null?void 0:e.description)||null,$(r.current).modal("show")},x=async e=>{e.preventDefault();const s={id:a.current.value||void 0,table_id:u.current.value,name:m.current.value,color:f.current.value,description:d.current.value};await i.save(s)&&($(l.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},v=async({id:e,status:s})=>{await i.status({id:e,status:s})&&$(l.current).dxDataGrid("instance").refresh()},y=async e=>{await i.delete(e)&&$(l.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement(G,{gridRef:l,title:"Estados",rest:i,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(l.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"Nuevo registro",onClick:()=>E()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"table.name",caption:"Tabla",dataType:"string"},{dataField:"name",caption:"Estado de tabla"},{dataField:"color",caption:"Color",cellTemplate:(e,{data:s})=>{n(e,t.createElement("span",{className:"badge rounded-pill",style:{backgroundColor:s.color||"#343a40"}},s.color))}},{dataField:"description",caption:"Descripcion",cellTemplate:(e,{value:s})=>{s?n(e,s):n(e,t.createElement("i",{className:"text-muted"},"- Sin descripcion -"))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(e,{data:s})=>{switch(s.status){case 1:n(e,t.createElement("span",{className:"badge bg-success rounded-pill"},"Activo"));break;case 0:n(e,t.createElement("span",{className:"badge bg-danger rounded-pill"},"Inactivo"));break;default:n(e,t.createElement("span",{className:"badge bg-dark rounded-pill"},"Eliminado"));break}}},{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),n(e,t.createElement(p,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>E(s)},t.createElement("i",{className:"fa fa-pen"}))),n(e,t.createElement(p,{className:"btn btn-xs btn-light",title:s.status===null?"Restaurar":"Cambiar estado",onClick:()=>v(s)},s.status===1?t.createElement("i",{className:"fa fa-toggle-on text-success"}):s.status===0?t.createElement("i",{className:"fa fa-toggle-off text-danger"}):t.createElement("i",{className:"fas fa-trash-restore"}))),n(e,t.createElement(p,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>y(s.id)},t.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}]}),t.createElement(A,{modalRef:r,title:h?"Editar estado de proyecto":"Agregar estado de proyecto",onSubmit:x,size:"sm"},t.createElement("div",{className:"row",id:"status-crud-container"},t.createElement("input",{ref:a,type:"hidden"}),t.createElement(R,{eRef:m,label:"Estado de proyecto",col:"col-12",required:!0}),t.createElement(S,{eRef:u,label:"Tabla",col:"col-12",dropdownParent:"#status-crud-container",searchAPI:"/api/tables/paginate",searchBy:"name",required:!0}),t.createElement(R,{eRef:f,type:"color",label:"Color",col:"col-12",required:!0}),t.createElement(B,{eRef:d,label:"Descripcion",col:"col-12"}))))};C((l,r)=>{if(!r.can("statuses","root","all","list"))return location.href="/";T(l).render(t.createElement(D,{...r,title:"Estados"},t.createElement(q,{...r})))});

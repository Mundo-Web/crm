var ke=Object.defineProperty;var Se=(o,i,r)=>i in o?ke(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var pe=(o,i,r)=>Se(o,typeof i!="symbol"?i+"":i,r);import{r as h,j as e,C as Ee,c as Re}from"./CreateReactScript-BvCtOVXi.js";import{B as _e,A as Le}from"./Adminto-DuJ3iBGW.js";import{M as le}from"./Modal-cWsP_Pmm.js";import{Q as De}from"./QuillFormGroup-y_FpB_0s.js";/* empty css                    */import{S as F}from"./SelectFormGroup-BEmmzGuH.js";import{p as t}from"./index-5Ci1JNZ2.js";import{T as Ae}from"./TextareaFormGroup-ChPZU0AS.js";import{I as Ie}from"./InputFormGroup-lApApDqt.js";import{S as Te}from"./StatusesRest-BABHPTxZ.js";import"./Logout-D-WLkxh-.js";import"./sweetalert2.esm.all-Bee8ig8x.js";import"./index-DAuhFcfH.js";class je extends _e{constructor(){super(...arguments);pe(this,"path","settings")}}var ue=function(){return ue=Object.assign||function(o){for(var i,r=1,c=arguments.length;r<c;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l])}return o},ue.apply(this,arguments)},ye={onActivate:t.func,onAddUndo:t.func,onBeforeAddUndo:t.func,onBeforeExecCommand:t.func,onBeforeGetContent:t.func,onBeforeRenderUI:t.func,onBeforeSetContent:t.func,onBeforePaste:t.func,onBlur:t.func,onChange:t.func,onClearUndos:t.func,onClick:t.func,onContextMenu:t.func,onCommentChange:t.func,onCompositionEnd:t.func,onCompositionStart:t.func,onCompositionUpdate:t.func,onCopy:t.func,onCut:t.func,onDblclick:t.func,onDeactivate:t.func,onDirty:t.func,onDrag:t.func,onDragDrop:t.func,onDragEnd:t.func,onDragGesture:t.func,onDragOver:t.func,onDrop:t.func,onExecCommand:t.func,onFocus:t.func,onFocusIn:t.func,onFocusOut:t.func,onGetContent:t.func,onHide:t.func,onInit:t.func,onInput:t.func,onKeyDown:t.func,onKeyPress:t.func,onKeyUp:t.func,onLoadContent:t.func,onMouseDown:t.func,onMouseEnter:t.func,onMouseLeave:t.func,onMouseMove:t.func,onMouseOut:t.func,onMouseOver:t.func,onMouseUp:t.func,onNodeChange:t.func,onObjectResizeStart:t.func,onObjectResized:t.func,onObjectSelected:t.func,onPaste:t.func,onPostProcess:t.func,onPostRender:t.func,onPreProcess:t.func,onProgressState:t.func,onRedo:t.func,onRemove:t.func,onReset:t.func,onSaveContent:t.func,onSelectionChange:t.func,onSetAttrib:t.func,onSetContent:t.func,onShow:t.func,onSubmit:t.func,onUndo:t.func,onVisualAid:t.func,onSkinLoadError:t.func,onThemeLoadError:t.func,onModelLoadError:t.func,onPluginLoadError:t.func,onIconsLoadError:t.func,onLanguageLoadError:t.func,onScriptsLoad:t.func,onScriptsLoadError:t.func},Oe=ue({apiKey:t.string,licenseKey:t.string,id:t.string,inline:t.bool,init:t.object,initialValue:t.string,onEditorChange:t.func,value:t.string,tagName:t.string,tabIndex:t.number,cloudChannel:t.string,plugins:t.oneOfType([t.string,t.array]),toolbar:t.oneOfType([t.string,t.array]),disabled:t.bool,textareaName:t.string,tinymceScriptSrc:t.oneOfType([t.string,t.arrayOf(t.string),t.arrayOf(t.shape({src:t.string,async:t.bool,defer:t.bool}))]),rollback:t.oneOfType([t.number,t.oneOf([!1])]),scriptLoading:t.shape({async:t.bool,defer:t.bool,delay:t.number})},ye),ce=function(o){return typeof o=="function"},he=function(o){return o in ye},fe=function(o){return o.substr(2)},$e=function(o,i,r,c,l,d,a){var m=Object.keys(l).filter(he),p=Object.keys(d).filter(he),v=m.filter(function(x){return d[x]===void 0}),g=p.filter(function(x){return l[x]===void 0});v.forEach(function(x){var j=fe(x),w=a[j];r(j,w),delete a[j]}),g.forEach(function(x){var j=c(o,x),w=fe(x);a[w]=j,i(w,j)})},Me=function(o,i,r,c,l){return $e(l,o.on.bind(o),o.off.bind(o),function(d,a){return function(m){var p;return(p=d(a))===null||p===void 0?void 0:p(m,o)}},i,r,c)},ve=0,Ne=function(o){var i=Date.now(),r=Math.floor(Math.random()*1e9);return ve++,o+"_"+r+ve+String(i)},xe=function(o){return o!==null&&(o.tagName.toLowerCase()==="textarea"||o.tagName.toLowerCase()==="input")},be=function(o){return typeof o>"u"||o===""?[]:Array.isArray(o)?o:o.split(" ")},Pe=function(o,i){return be(o).concat(be(i))},qe=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Fe=function(o){if(!("isConnected"in Node.prototype)){for(var i=o,r=o.parentNode;r!=null;)i=r,r=i.parentNode;return i===o.ownerDocument}return o.isConnected},ge=function(o,i){o!==void 0&&(o.mode!=null&&typeof o.mode=="object"&&typeof o.mode.set=="function"?o.mode.set(i):o.setMode(i))},me=function(){return me=Object.assign||function(o){for(var i,r=1,c=arguments.length;r<c;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l])}return o},me.apply(this,arguments)},Be=function(o,i,r){var c,l,d=o.createElement("script");d.referrerPolicy="origin",d.type="application/javascript",d.id=i.id,d.src=i.src,d.async=(c=i.async)!==null&&c!==void 0?c:!1,d.defer=(l=i.defer)!==null&&l!==void 0?l:!1;var a=function(){d.removeEventListener("load",a),d.removeEventListener("error",m),r(i.src)},m=function(p){d.removeEventListener("load",a),d.removeEventListener("error",m),r(i.src,p)};d.addEventListener("load",a),d.addEventListener("error",m),o.head&&o.head.appendChild(d)},He=function(o){var i={},r=function(a,m){var p=i[a];p.done=!0,p.error=m;for(var v=0,g=p.handlers;v<g.length;v++){var x=g[v];x(a,m)}p.handlers=[]},c=function(a,m,p){var v=function(N){return p!==void 0?p(N):console.error(N)};if(a.length===0){v(new Error("At least one script must be provided"));return}for(var g=0,x=!1,j=function(N,D){x||(D?(x=!0,v(D)):++g===a.length&&m())},w=0,y=a;w<y.length;w++){var k=y[w],C=i[k.src];if(C)C.done?j(k.src,C.error):C.handlers.push(j);else{var L=Ne("tiny-");i[k.src]={id:L,src:k.src,done:!1,error:null,handlers:[j]},Be(o,me({id:L},k),r)}}},l=function(){for(var a,m=0,p=Object.values(i);m<p.length;m++){var v=p[m],g=o.getElementById(v.id);g!=null&&g.tagName==="SCRIPT"&&((a=g.parentNode)===null||a===void 0||a.removeChild(g))}i={}},d=function(){return o};return{loadScripts:c,deleteScripts:l,getDocument:d}},Qe=function(){var o=[],i=function(l){var d=o.find(function(a){return a.getDocument()===l});return d===void 0&&(d=He(l),o.push(d)),d},r=function(l,d,a,m,p){var v=function(){return i(l).loadScripts(d,m,p)};a>0?setTimeout(v,a):v()},c=function(){for(var l=o.pop();l!=null;l=o.pop())l.deleteScripts()};return{loadList:r,reinitialize:c}},ze=Qe(),de=function(o){var i=o;return i&&i.tinymce?i.tinymce:null},Ke=function(){var o=function(i,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},o(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");o(i,r);function c(){this.constructor=i}i.prototype=r===null?Object.create(r):(c.prototype=r.prototype,new c)}}(),z=function(){return z=Object.assign||function(o){for(var i,r=1,c=arguments.length;r<c;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l])}return o},z.apply(this,arguments)},Ge=function(o){Ke(i,o);function i(r){var c,l,d,a=o.call(this,r)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var m=a.editor,p=a.props.value;m&&p&&p!==a.currentContent&&m.undoManager.ignore(function(){if(m.setContent(p),a.valueCursor&&(!a.inline||m.hasFocus()))try{m.selection.moveToBookmark(a.valueCursor)}catch{}}),a.rollbackTimer=void 0},a.handleBeforeInput=function(m){if(a.props.value!==void 0&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch{}},a.handleBeforeInputSpecial=function(m){(m.key==="Enter"||m.key==="Backspace"||m.key==="Delete")&&a.handleBeforeInput(m)},a.handleEditorChange=function(m){var p=a.editor;if(p&&p.initialized){var v=p.getContent();a.props.value!==void 0&&a.props.value!==v&&a.props.rollback!==!1&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,typeof a.props.rollback=="number"?a.props.rollback:200))),v!==a.currentContent&&(a.currentContent=v,ce(a.props.onEditorChange)&&a.props.onEditorChange(v,p))}},a.handleEditorChangeSpecial=function(m){(m.key==="Backspace"||m.key==="Delete")&&a.handleEditorChange(m)},a.initialise=function(m){var p,v,g;m===void 0&&(m=0);var x=a.elementRef.current;if(x){if(!Fe(x)){if(m===0)setTimeout(function(){return a.initialise(1)},1);else if(m<100)setTimeout(function(){return a.initialise(m+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var j=de(a.view);if(!j)throw new Error("tinymce should have been loaded into global scope");var w=z(z(z(z({},a.props.init),{selector:void 0,target:x,readonly:a.props.disabled,inline:a.inline,plugins:Pe((p=a.props.init)===null||p===void 0?void 0:p.plugins,a.props.plugins),toolbar:(v=a.props.toolbar)!==null&&v!==void 0?v:(g=a.props.init)===null||g===void 0?void 0:g.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(y){a.editor=y,a.bindHandlers({}),a.inline&&!xe(x)&&y.once("PostRender",function(k){y.setContent(a.getInitialValue(),{no_events:!0})}),a.props.init&&ce(a.props.init.setup)&&a.props.init.setup(y)},init_instance_callback:function(y){var k,C,L=a.getInitialValue();a.currentContent=(k=a.currentContent)!==null&&k!==void 0?k:y.getContent(),a.currentContent!==L&&(a.currentContent=L,y.setContent(L),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var N=(C=a.props.disabled)!==null&&C!==void 0?C:!1;ge(a.editor,N?"readonly":"design"),a.props.init&&ce(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(y)}});a.inline||(x.style.visibility=""),xe(x)&&(x.value=a.getInitialValue()),j.init(w)}},a.id=a.props.id||Ne("tiny-react"),a.elementRef=h.createRef(),a.inline=(d=(c=a.props.inline)!==null&&c!==void 0?c:(l=a.props.init)===null||l===void 0?void 0:l.inline)!==null&&d!==void 0?d:!1,a.boundHandlers={},a}return Object.defineProperty(i.prototype,"view",{get:function(){var r,c;return(c=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&c!==void 0?c:window},enumerable:!1,configurable:!0}),i.prototype.componentDidUpdate=function(r){var c=this,l,d;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(l=this.currentContent)!==null&&l!==void 0?l:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var a=this.editor;a.undoManager.transact(function(){var p;if(!c.inline||a.hasFocus())try{p=a.selection.getBookmark(3)}catch{}var v=c.valueCursor;if(a.setContent(c.props.value),!c.inline||a.hasFocus())for(var g=0,x=[p,v];g<x.length;g++){var j=x[g];if(j)try{a.selection.moveToBookmark(j),c.valueCursor=j;break}catch{}}})}if(this.props.disabled!==r.disabled){var m=(d=this.props.disabled)!==null&&d!==void 0?d:!1;ge(this.editor,m?"readonly":"design")}}},i.prototype.componentDidMount=function(){var r=this,c,l,d,a,m;if(de(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(l=(c=this.props).onScriptsLoadError)===null||l===void 0||l.call(c,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((d=this.elementRef.current)===null||d===void 0)&&d.ownerDocument){var p=function(){var g,x;(x=(g=r.props).onScriptsLoad)===null||x===void 0||x.call(g),r.initialise()},v=function(g){var x,j;(j=(x=r.props).onScriptsLoadError)===null||j===void 0||j.call(x,g)};ze.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(m=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.delay)!==null&&m!==void 0?m:0,p,v)}},i.prototype.componentWillUnmount=function(){var r=this,c=this.editor;c&&(c.off(this.changeEvents(),this.handleEditorChange),c.off(this.beforeInputEvent(),this.handleBeforeInput),c.off("keypress",this.handleEditorChangeSpecial),c.off("keydown",this.handleBeforeInputSpecial),c.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(l){c.off(l,r.boundHandlers[l])}),this.boundHandlers={},c.remove(),this.editor=void 0)},i.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},i.prototype.changeEvents=function(){var r,c,l,d=(l=(c=(r=de(this.view))===null||r===void 0?void 0:r.Env)===null||c===void 0?void 0:c.browser)===null||l===void 0?void 0:l.isIE();return d?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},i.prototype.beforeInputEvent=function(){return qe()?"beforeinput SelectionChange":"SelectionChange"},i.prototype.renderInline=function(){var r=this.props.tagName,c=r===void 0?"div":r;return h.createElement(c,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},i.prototype.renderIframe=function(){return h.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},i.prototype.getScriptSources=function(){var r,c,l=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,d=(c=this.props.scriptLoading)===null||c===void 0?void 0:c.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:l,defer:d}]:this.props.tinymceScriptSrc.map(function(v){return typeof v=="string"?{src:v,async:l,defer:d}:v});var a=this.props.cloudChannel,m=this.props.apiKey?this.props.apiKey:"no-api-key",p="https://cdn.tiny.cloud/1/".concat(m,"/tinymce/").concat(a,"/tinymce.min.js");return[{src:p,async:l,defer:d}]},i.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},i.prototype.bindHandlers=function(r){var c=this;if(this.editor!==void 0){Me(this.editor,r,this.props,this.boundHandlers,function(m){return c.props[m]});var l=function(m){return m.onEditorChange!==void 0||m.value!==void 0},d=l(r),a=l(this.props);!d&&a?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):d&&!a&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},i.propTypes=Oe,i.defaultProps={cloudChannel:"7"},i}(h.Component);function we(o,i){if(o===i)return!0;if(typeof o!="object"||typeof i!="object"||o==null||i==null)return!1;const r=Object.keys(o),c=Object.keys(i);if(r.length!==c.length)return!1;for(let l of r)if(!we(o[l],i[l]))return!1;return!0}function Ve(o,i){if(o.length!==i.length)return!1;for(let r=0;r<o.length;r++)if(!we(o[r],i[r]))return!1;return!0}const Je=new je,Ue=({questions:o,isOpen:i,setIsOpen:r,onModalOpen:c})=>{const[l,d]=h.useState(o),[a,m]=h.useState(o),[p,v]=h.useState(null),[g,x]=h.useState(null),[j,w]=h.useState(""),[y,k]=h.useState(""),[C,L]=h.useState(""),[N,D]=h.useState(null),[T,K]=h.useState(!1),[I,O]=h.useState([""]),[R,H]=h.useState(!1),[S,A]=h.useState([""]),M=()=>{if(!y.trim())return;const u={id:Date.now(),title:y.trim(),questions:[]};d([...l,u]),k("")},Q=u=>{d(l.filter(n=>n.id!==u))},P=u=>{if(!C.trim())return;const n=T?I.filter(s=>s.trim()):null;T&&n.length===0||(d(l.map(s=>s.id===u?{...s,questions:[...s.questions,{id:Date.now(),text:C.trim(),closed:T,answers:n}]}:s)),L(""),K(!1),O([""]))},q=(u,n)=>{d(l.map(s=>s.id===u?{...s,questions:s.questions.filter(b=>b.id!==n)}:s))},G=(u,n,s,b)=>{x(u),w(n),H(!!s),A(b?[...b]:[""])},V=()=>{const u=R?S.filter(n=>n.trim()):null;R&&u.length===0||(d(l.map(n=>({...n,questions:n.questions.map(s=>s.id===g?{...s,text:j,closed:R,answers:u}:s)}))),x(null),w(""),H(!1),A([""]))},W=()=>{x(null),w(""),H(!1),A([""])},X=()=>O([...I,""]),Y=u=>O(I.filter((n,s)=>s!==u)),Z=(u,n)=>{const s=[...I];s[u]=n,O(s)},ee=()=>A([...S,""]),ae=u=>A(S.filter((n,s)=>s!==u)),ne=(u,n)=>{const s=[...S];s[u]=n,A(s)},te=(u,n)=>{v({formId:u,qIndex:n})},J=u=>u.preventDefault(),se=(u,n,s)=>{u.preventDefault(),!(!p||p.formId!==n||p.qIndex===s)&&(d(l.map(b=>{if(b.id!==n)return b;const f=[...b.questions],[_]=f.splice(p.qIndex,1);return f.splice(s,0,_),{...b,questions:f}})),v(null))},ie=u=>{v({type:"form",index:u})},re=(u,n)=>{if(u.preventDefault(),!p||p.type!=="form"||p.index===n)return;const s=[...l],[b]=s.splice(p.index,1);s.splice(n,0,b),d(s),v(null)},U=h.useCallback(async()=>{await Je.save({type:"json",name:"gemini-extra-questions",value:JSON.stringify(l)})&&m(l)},[l]);return h.useEffect(()=>{i&&(Ve(l,a)||U())},[i,l,a,U]),e.jsx("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:!i,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{className:"btn btn-soft-danger btn-xs position-absolute",onClick:()=>r(!1),children:[e.jsx("i",{className:"mdi mdi-pan-left me-1"}),"Volver"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-start",style:{minHeight:"calc(100vh - 220px)"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-pill bg-success bg-opacity-10 text-success px-4 py-1 fw-semibold",children:"Inicio"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:"Saludo inicial (cliente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:[e.jsx("span",{className:"d-block",children:"Mensaje inicial (Bot)"}),e.jsxs("small",{className:"d-block border-bottom fw-normal cursor-pointer text-center mx-auto",style:{width:"max-content"},onClick:u=>c(u,"gemini-first-message","Mensaje inicial","text","Hola soy boti, me permites tus datos personales"),children:[e.jsx("i",{className:"mdi mdi-chat me-1"}),e.jsx("span",{children:"Mensaje inicial"})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-white border text-primary px-2 py-1 fw-semibold",children:[e.jsxs("div",{className:"mb-1 text-center",children:[e.jsx("i",{className:"mdi mdi-star-four-points me-1"}),e.jsx("span",{children:"Recolección de datos (bot)"})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-center text-default gap-2",style:{maxWidth:"200px"},children:[e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:u=>c(u,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("i",{className:"mdi mdi-key me-1"}),e.jsx("span",{children:"API Key"})]}),e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:u=>c(u,"gemini-personality","Personalidad - Gemini","text","Ej. Sé claro y respetuoso."),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),e.jsx("span",{children:"Personalidad"})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50 mb-2",style:{fontSize:"24px"}}),e.jsxs("div",{className:"w-100",style:{minWidth:"480px"},children:[l.map((u,n)=>{var s,b;return e.jsxs("div",{draggable:!0,onDragStart:()=>ie(n),onDragOver:J,onDrop:f=>re(f,n),className:"border rounded mb-2 shadow-sm bg-white transition-all hover:shadow",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 bg-gradient-to-r from-gray-50 to-white rounded-top cursor-pointer",onClick:()=>D(N===u.id?null:u.id),children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:"mdi mdi-drag text-gray-400"}),e.jsx("span",{className:"fw-semibold text-gray-700",children:`${n+1}. ${u.title}`}),e.jsx("span",{className:"badge bg-soft-secondary text-secondary ms-2",children:((s=u.questions)==null?void 0:s.length)||0})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`mdi ${N===u.id?"mdi-chevron-up":"mdi-chevron-down"} text-muted`}),e.jsx("button",{className:"btn btn-xs btn-outline-danger border-0 rounded-pill",onClick:f=>{f.stopPropagation(),Q(u.id)},title:"Eliminar formulario",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]}),N===u.id&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded-bottom",children:[(b=u.questions)==null?void 0:b.map((f,_)=>e.jsxs("div",{draggable:!0,onDragStart:()=>te(u.id,_),onDragOver:J,onDrop:E=>se(E,u.id,_),onDoubleClick:()=>g!==f.id&&G(f.id,f.text,f.closed,f.answers),className:"d-flex align-items-center rounded bg-white border p-2 mb-2 shadow-xs cursor-grab active:cursor-grabbing transition-transform hover:scale-[1.01]",children:[e.jsx("i",{className:"mdi mdi-drag mt-1 me-3 text-gray-400"}),g===f.id?e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex gap-1 mb-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:E=>w(E.target.value),onKeyDown:E=>E.key==="Enter"&&V(),placeholder:"Texto de la pregunta"}),e.jsx("button",{className:"btn btn-xs btn-outline-success",onClick:V,children:e.jsx("i",{className:"mdi mdi-check"})}),e.jsx("button",{className:"btn btn-xs btn-outline-secondary",onClick:W,children:e.jsx("i",{className:"mdi mdi-close"})})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`edit-closed-${f.id}`,checked:R,onChange:E=>H(E.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`edit-closed-${f.id}`,children:"Pregunta cerrada (con opciones)"})]}),R&&e.jsxs("div",{className:"mb-0 mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),S.map((E,oe)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:E,onChange:Ce=>ne(oe,Ce.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>ae(oe),children:e.jsx("i",{className:"mdi mdi-minus"})})]},oe)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:ee,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"small text-gray-800 fw-medium",children:f.text}),f.closed&&e.jsx("div",{className:"mt-0",children:e.jsx("span",{className:"badge bg-soft-primary text-primary small",children:"Cerrada"})})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{className:"btn btn-xs btn-outline-primary",onClick:()=>G(f.id,f.text,f.closed,f.answers),title:"Editar",children:e.jsx("i",{className:"mdi mdi-pencil"})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger",onClick:()=>q(u.id,f.id),title:"Eliminar",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]})]},f.id)),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nueva pregunta"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Escribe la pregunta",value:C,onChange:f=>L(f.target.value),onKeyDown:f=>f.key==="Enter"&&P(u.id)}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:()=>P(u.id),children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir"]})]}),e.jsxs("div",{className:"form-check mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`new-closed-${u.id}`,checked:T,onChange:f=>K(f.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`new-closed-${u.id}`,children:"Pregunta cerrada (con opciones)"})]}),T&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),I.map((f,_)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:f,onChange:E=>Z(_,E.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>Y(_),children:e.jsx("i",{className:"mdi mdi-minus"})})]},_)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:X,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]})]})]},u.id)}),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nuevo formulario"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Título del nuevo formulario",value:y,onChange:u=>k(u.target.value),onKeyDown:u=>u.key==="Enter"&&M()}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:M,children:[e.jsx("i",{className:"mdi mdi-plus"})," Crear"]})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary text-center px-2 py-1 fw-semibold cursor-pointer",onClick:u=>c(u,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("i",{className:"mdi mdi-message-text-outline me-1"})," Saludo final (asistente)"]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded-pill bg-danger bg-opacity-10 text-danger px-4 py-1 fw-semibold",children:"Fin"})]})})]})})},B=new je,We=new Te,Xe=({can:o,constants:i,statuses:r})=>{const c=h.useRef(),l=h.useRef(),d=h.useRef(),a=h.useRef(),m=h.useRef(),p=h.useRef(),v=h.useRef(),g=h.useRef(),x=h.useRef(),j=h.useRef(),w=h.useRef(),[y,k]=h.useState(),[C,L]=h.useState(),[N,D]=h.useState(window.location.hash.slice(1)||"general"),[T,K]=h.useState(!1),[I,O]=h.useState(()=>r.filter(n=>n.table_id==="9c27e649-574a-47eb-82af-851c5d425434").reduce((n,s)=>(n[s.id]=s.parent,n),{})),R=(n,s,b,f,_="")=>{const E=S(s);switch(k(f),L(_),d.current.value=s,l.current.value=f,f){case"simpleHTML":m.editor.root.innerHTML=E.value;break;case"HTML":p.current.setContent(E.value);break;default:a.current.value=E.value;break}$(c.current).find(".modal-title").text(b),$(c.current).modal("show")},H=async n=>{n.preventDefault();let s=a.current.value;switch(y){case"simpleHTML":s=m.editor.root.innerHTML;break;case"HTML":s=p.current.getContent();break}const b={type:l.current.value,name:d.current.value,value:s};await B.save(b)&&($(c.current).modal("hide"),location.reload())},S=n=>{const s=i.find(({name:b})=>b==n);return s||{name:n,value:null}},A=h.useRef(),M=h.useRef(),Q=h.useRef(),P=h.useRef(),q=h.useRef(),G=h.useRef(),V=()=>{const n=S("assignation-lead-status"),s=JSON.parse(n.value);$(q.current).find(".modal-title").text("Estados de asignacion"),A.current.value="assignation-lead-status",$(M.current).val(s==null?void 0:s.lead).trigger("change"),$(Q.current).val(s==null?void 0:s.manage).trigger("change"),$(P.current).val(s==null?void 0:s.task).trigger("change"),$(q.current).modal("show")},W=()=>{const n=S("revertion-lead-status"),s=JSON.parse(n.value);$(q.current).find(".modal-title").text("Estados de reversion"),A.current.value="revertion-lead-status",$(M.current).val(s==null?void 0:s.lead).trigger("change"),$(Q.current).val(s==null?void 0:s.manage).trigger("change"),$(P.current).val(s==null?void 0:s.task).trigger("change"),$(q.current).modal("show")},X=()=>{$(G.current).modal("show")},Y=async n=>{console.log(n),n.preventDefault(),await We.saveParent(Object.keys(I).map(b=>({id:b,parent:I[b]})))&&($(c.current).modal("hide"),location.reload())},Z=async n=>{n.preventDefault(),await Promise.all([B.save({type:"text",name:"archived-lead-status",value:JSON.stringify($(x.current).val())}),B.save({type:"text",name:"archived-lead-status-days",value:j.current.value})]),$(c.current).modal("hide"),location.reload()},ee=async n=>{n.preventDefault(),await B.save({type:"text",name:"archived-lead-status-direct",value:JSON.stringify($(w.current).val())}),$(c.current).modal("hide"),location.reload()},ae=async n=>{n.preventDefault();const s={lead:M.current.value,manage:Q.current.value,task:P.current.value},b={name:A.current.value,value:JSON.stringify(s),type:"json"};await B.save(b)&&($(c.current).modal("hide"),location.reload())},ne=async n=>{const s={name:"finished-project-status",value:n.target.value};await B.save(s)},te=async n=>{const s={name:"converted-lead-status",value:n.target.value};await B.save(s)},J=S("archived-lead-status"),se=S("archived-lead-status-days"),ie=S("archived-lead-status-direct"),re=S("finished-project-status"),U=S("converted-lead-status");h.useEffect(()=>{window.location.hash=N},[N]),h.useEffect(()=>{$(x.current).val(JSON.parse(J.value)).select2(),$(w.current).val(JSON.parse(ie.value)).select2(),$(j.current).val(se.value),$(v.current).val(re.value).select2(),$(g.current).val(U.value).select2()},[null]);const u=S("gemini-extra-questions");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:T,children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"header-title mb-0",children:"Configura aqui las constantes del sistema"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3 mb-2",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("button",{className:`nav-link mb-1 text-start ${N==="general"?"active show":""}`,id:"v-general-tab","data-bs-toggle":"pill",href:"#v-general",role:"tab","aria-controls":"v-general","aria-selected":"true",onClick:()=>D("general"),children:"General"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="clients-leads"?"active show":""}`,id:"v-clients-leads-tab","data-bs-toggle":"pill",href:"#v-clients-leads",role:"tab","aria-controls":"v-clients-leads","aria-selected":"false",onClick:()=>D("clients-leads"),children:"Clientes y leads"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="projects"?"active show":""}`,id:"v-projects-tab","data-bs-toggle":"pill",href:"#v-projects",role:"tab","aria-controls":"v-projects","aria-selected":"false",onClick:()=>D("projects"),children:"Proyectos"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="email"?"active show":""}`,id:"v-email-tab","data-bs-toggle":"pill",href:"#v-email",role:"tab","aria-controls":"v-email","aria-selected":"false",onClick:()=>D("email"),children:"Correo"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="whatsapp"?"active show":""}`,id:"v-whatsapp-tab","data-bs-toggle":"pill",href:"#v-whatsapp",role:"tab","aria-controls":"v-whatsapp","aria-selected":"false",onClick:()=>D("whatsapp"),children:"WhatsApp"}),e.jsxs("button",{className:`nav-link mb-1 text-start ${N==="generativeai"?"active show":""}`,id:"v-generativeai-tab","data-bs-toggle":"pill",href:"#v-generativeai",role:"tab","aria-controls":"v-generativeai","aria-selected":"false",onClick:()=>D("generativeai"),children:["Chat IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]})]})}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("div",{className:`tab-pane fade ${N==="general"?"show active":""} coming-soon`,id:"v-general",role:"tabpanel","aria-labelledby":"v-general-tab",children:[e.jsx("h4",{children:"Configuracion general"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="dashboard"?"show active":""}`,id:"v-dashboard",role:"tabpanel","aria-labelledby":"v-dashboard-tab",children:[e.jsx("h4",{children:"Configuracion de dashboard"}),e.jsx("div",{className:"row"})]}),e.jsxs("div",{className:`tab-pane fade ${N==="clients-leads"?"show active":""}`,id:"v-clients-leads",role:"tabpanel","aria-labelledby":"v-clients-leads-tab",children:[e.jsx("h4",{children:"Configuracion de clientes y leads"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("form",{className:"card card-body border p-2",onSubmit:Z,style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado para archivar"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un lead que debe archivarse tras N días de inactividad?"}),e.jsx(F,{eRef:x,label:"Escoge un estado",multiple:!0,children:r.filter(n=>n.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((n,s)=>e.jsx("option",{value:n.id,children:n.name},s))}),e.jsx(Ie,{eRef:j,label:"Días de inactividad",type:"number",min:1}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Guardar"})})]})}),e.jsxs("div",{className:"col-md-4 col-sm-6 col-xs-12",children:[e.jsxs("form",{className:"card card-body border p-2",onSubmit:ee,style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de archivación (directo)"}),e.jsx("p",{className:"card-text",children:"Define el estado que archiva inmediatamente al lead"}),e.jsx(F,{eRef:w,label:"Escoge un estado",multiple:!0,children:r.filter(n=>n.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((n,s)=>e.jsx("option",{value:n.id,children:n.name},s))}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Guardar"})})]}),e.jsxs("div",{className:"card card-body border p-2",onClick:X,children:[e.jsx("h5",{className:"card-title mb-1",children:"Automatización de etiquetas"}),e.jsx("p",{className:"card-text mb-0",children:"Automatiza la selección de etiquetas para elegir estados que asignen el usuario al cliente directamente."})]})]}),e.jsxs("div",{className:"col-md-4 col-sm-6 col-xs-12",children:[e.jsxs("div",{className:"card card-body border p-2",onClick:V,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de asignacion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que asignan el usuario al cliente directamente?"})]}),e.jsxs("div",{className:"card card-body border p-2",onClick:W,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de reversion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que quitan la asignacion del usuario directamente?"})]})]}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de Conversión"}),e.jsx("p",{className:"card-text mb-0",children:"¿Cuál es el estado que define mejor a un lead que ha sido convertido exitosamente?"}),e.jsx("blockquote",{className:"my-1",style:{borderLeft:"4px solid #007bff",backgroundColor:"var(--bs-gray-300)",padding:"5px 10px"},children:e.jsx("small",{children:"Esta configuración nos ayudará a identificar y medir las conversiones efectivas en el sistema."})}),e.jsx(F,{eRef:g,label:"Escoge un estado",noMargin:!0,onChange:te,children:r.filter(n=>n.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((n,s)=>e.jsx("option",{value:n.id,children:n.name},s))})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="projects"?"show active":""}`,id:"v-projects",role:"tabpanel","aria-labelledby":"v-projects-tab",children:[e.jsx("h4",{children:"Configuracion de Proyectos"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de culminación"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un proyecto que ha sido terminado?"}),e.jsx(F,{eRef:v,label:"Escoge un estado",noMargin:!0,onChange:ne,children:r.filter(n=>n.table_id=="cd8bd48f-c73c-4a62-9935-024139f3be5f").map((n,s)=>e.jsx("option",{value:n.id,children:n.name},s))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${N==="email"?"show active":""} coming-soon`,id:"v-email",role:"tabpanel","aria-labelledby":"v-email-tab",children:[e.jsx("h4",{children:"Configuracion de correo"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Credenciales"}),e.jsx("p",{className:"card-text mb-1",children:"De donde saldran los mensajes de correo hacia los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Correo actual: mundoweb.pe"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>{},children:[e.jsx("h5",{className:"card-title mb-1",children:"Diseño de correo para el lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que correo veran los nuevos leads cuando caigan al crm?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Correo administrador"}),e.jsx("p",{className:"card-text mb-1",children:"A que correo deseas que te enviemos un mensaje cuando se registe un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted ",style:{wordWrap:"wrap"},children:"Correo actual: gamboapalominocarlosmanuel@gmail.com"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="whatsapp"?"show active":""}`,id:"v-whatsapp",role:"tabpanel","aria-labelledby":"v-whatsapp-tab",children:[e.jsx("h4",{children:"Configuracion de WhatsApp"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"whatsapp-new-lead-notification-message","Notificacion - Nuevo lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion - Nuevo lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje llegara al grupo/persona encargado de revisar los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"whatsapp-new-lead-notification-waid","Grupo/Persona encargado","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Grupo/Persona encargado"}),e.jsx("p",{className:"card-text mb-1",children:"A quien(es) debemos notificar cuando se registre un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion al lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje le llegara al lead cuando sea registrado en el sistema?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"whatsapp-assigned-message-client","Mensaje de asignación","simpleHTML","Variables disponibles: {{user}} = nombre del ejecutivo, {{lead}} = nombre del cliente"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Mensaje de asignación"}),e.jsx("p",{className:"card-text mb-1",children:"Mensaje que se enviará al lead cuando sea asignado a un usuario/ejecutivo"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${N==="generativeai"?"show active":""}`,id:"v-generativeai",role:"tabpanel","aria-labelledby":"v-generativeai-tab",children:[e.jsxs("h4",{children:["IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"API Key - Gemini"}),e.jsxs("p",{className:"card-text mb-1",children:["Configura un API key para que ",e.jsx("b",{children:"Gemini"})," interactue con nuevos clientes."]}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:n=>R(n,"gemini-what-business-do","Que hace tu empresa [Separado por comas]","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Que hace tu empresa"}),e.jsx("p",{className:"card-text mb-1",children:"Ayuda a Gemini a saber que productos y/o servicios buscan los clientes en tu empresa"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>K(!0),children:[e.jsx("h5",{className:"card-title mb-1",children:"Flujo de asistente (Beta)"}),e.jsx("p",{className:"card-text mb-1",children:"Configura el flujo de Gemini con leads para automatizar preguntas y respuestas."}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]})]})]})})]})})]}),e.jsx(Ue,{questions:JSON.parse(u.value??"[]"),isOpen:T,setIsOpen:K,onModalOpen:R})]})}),e.jsxs(le,{modalRef:q,title:"",onSubmit:ae,size:"sm",children:[e.jsx("input",{ref:A,type:"hidden"}),e.jsxs("div",{className:"row",id:"assignation-status-container",children:[e.jsxs(F,{eRef:M,label:"Estado del lead",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:n})=>n=="e05a43e5-b3a6-46ce-8d1f-381a73498f33").sort((n,s)=>n.order-s.order).map((n,s)=>e.jsx("option",{value:n.id,children:n.name},`status-${s}`))]}),e.jsxs(F,{eRef:Q,label:"Estado de gestion",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:n})=>n=="9c27e649-574a-47eb-82af-851c5d425434").sort((n,s)=>n.order-s.order).map((n,s)=>e.jsx("option",{value:n.id,children:n.name},`status-${s}`))]}),e.jsxs(F,{eRef:P,label:"Estado de la tarea",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En curso",children:"En curso"}),e.jsx("option",{value:"Realizado",children:"Realizado"})]})]})]}),e.jsx(le,{modalRef:c,title:"",onSubmit:H,size:"md",children:e.jsxs("div",{className:"row",id:"settings-crud-container",children:[e.jsx("input",{ref:d,type:"hidden"}),e.jsx("input",{ref:l,type:"hidden"}),e.jsx("div",{style:{display:y=="text"||y==""||y==null?"block":"none"},children:e.jsx(Ae,{eRef:a,label:e.jsxs(e.Fragment,{children:["Valor ",C&&e.jsxs("small",{children:["(",C,")"]})]}),col:"col-12"})}),e.jsx("div",{style:{display:y=="simpleHTML"?"block":"none"},children:e.jsx(De,{eRef:m,label:e.jsxs(e.Fragment,{children:["Valor ",C&&e.jsxs("small",{children:["(",C,")"]})]}),col:"col-12",theme:"bubble"})}),e.jsxs("div",{className:"col-12",style:{display:y=="HTML"?"block":"none"},children:[e.jsx("label",{htmlFor:"",children:"Valor de la variable"}),e.jsx(Ge,{apiKey:"k2389nfj5bxjbe7s3kkc3c6fututtaba9syfaviluaf2jew6",onInit:(n,s)=>p.current=s,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})]})}),e.jsxs(le,{modalRef:G,title:"Automatización de etiquetas",onSubmit:Y,bodyClass:"p-0",children:[e.jsx("div",{className:"p-2",children:e.jsx("p",{className:"text-muted my-0",children:"Selecciona qué estado de gestión se aplicará automáticamente cuando el usuario cambie la etiqueta del lead."})}),e.jsx("div",{className:"table-responsive",bis_skin_checked:"1",children:e.jsxs("table",{className:"table mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Etiqueta"}),e.jsx("th",{children:"Estado de gestión"})]})}),e.jsx("tbody",{children:r.filter(({table_id:n})=>n=="9c27e649-574a-47eb-82af-851c5d425434").map(n=>{const s=r.find(b=>b.id===I[n.id]);return e.jsxs("tr",{children:[e.jsxs("td",{scope:"row",children:[e.jsx("i",{className:"mdi mdi-circle me-1",style:{color:n.color}}),n.name]}),e.jsx("td",{className:"p-0",valign:"middle",children:e.jsxs("div",{className:"dropdown",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:s?"mdi mdi-circle me-1":"mdi mdi-diameter-variant me-1",style:{color:(s==null?void 0:s.color)??"unset"}}),s?s.name:"Sin acción"]}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",onClick:b=>O(f=>({...f,[n.id]:null})),type:"button",children:[e.jsx("i",{className:"mdi mdi-diameter-variant me-1"}),"Sin acción"]})}),r.filter(({table_id:b})=>b==="e05a43e5-b3a6-46ce-8d1f-381a73498f33").map(b=>e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",onClick:f=>O(_=>({..._,[n.id]:b.id})),type:"button",children:[e.jsx("i",{className:"mdi mdi-circle me-1",style:{color:b.color}}),b.name]})},b.id))]})]})})]},n.id)})})]})})]})]})};Ee((o,i)=>{if(!i.can("settings","root","all","list"))return location.href="/";Re(o).render(e.jsx(Le,{...i,title:"Configuraciones",showTitle:!1,children:e.jsx(Xe,{...i})}))});

var oe=Object.defineProperty;var le=(r,t,s)=>t in r?oe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var K=(r,t,s)=>le(r,typeof t!="symbol"?t+"":t,s);import{r as x,j as e,C as ce,c as de}from"./CreateReactScript-ByDl3m9l.js";import{B as ue,A as pe}from"./Adminto-Cu7C99b0.js";import{M as z}from"./Modal-CJxY9cBG.js";import{Q as me}from"./QuillFormGroup-YUMtaqmS.js";/* empty css                    */import{S as D}from"./SelectFormGroup-CLE8XJj3.js";import{p as a}from"./index-D_o9jIE1.js";import{T as fe}from"./TextareaFormGroup-39uCvdJc.js";import"./Logout-DquunmIv.js";import"./sweetalert2.esm.all-C32wHI3n.js";class he extends ue{constructor(){super(...arguments);K(this,"path","settings")}}var q=function(){return q=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},q.apply(this,arguments)},X={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCommentChange:a.func,onCompositionEnd:a.func,onCompositionStart:a.func,onCompositionUpdate:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onInput:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func,onSkinLoadError:a.func,onThemeLoadError:a.func,onModelLoadError:a.func,onPluginLoadError:a.func,onIconsLoadError:a.func,onLanguageLoadError:a.func,onScriptsLoad:a.func,onScriptsLoadError:a.func},ve=q({apiKey:a.string,licenseKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,tabIndex:a.number,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string,tinymceScriptSrc:a.oneOfType([a.string,a.arrayOf(a.string),a.arrayOf(a.shape({src:a.string,async:a.bool,defer:a.bool}))]),rollback:a.oneOfType([a.number,a.oneOf([!1])]),scriptLoading:a.shape({async:a.bool,defer:a.bool,delay:a.number})},X),B=function(r){return typeof r=="function"},V=function(r){return r in X},Q=function(r){return r.substr(2)},xe=function(r,t,s,i,o,c,n){var l=Object.keys(o).filter(V),p=Object.keys(c).filter(V),f=l.filter(function(m){return c[m]===void 0}),h=p.filter(function(m){return o[m]===void 0});f.forEach(function(m){var g=Q(m),j=n[g];s(g,j),delete n[g]}),h.forEach(function(m){var g=i(r,m),j=Q(m);n[j]=g,t(j,g)})},be=function(r,t,s,i,o){return xe(o,r.on.bind(r),r.off.bind(r),function(c,n){return function(l){var p;return(p=c(n))===null||p===void 0?void 0:p(l,r)}},t,s,i)},G=0,Y=function(r){var t=Date.now(),s=Math.floor(Math.random()*1e9);return G++,r+"_"+s+G+String(t)},U=function(r){return r!==null&&(r.tagName.toLowerCase()==="textarea"||r.tagName.toLowerCase()==="input")},W=function(r){return typeof r>"u"||r===""?[]:Array.isArray(r)?r:r.split(" ")},ge=function(r,t){return W(r).concat(W(t))},je=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},ye=function(r){if(!("isConnected"in Node.prototype)){for(var t=r,s=r.parentNode;s!=null;)t=s,s=t.parentNode;return t===r.ownerDocument}return r.isConnected},J=function(r,t){r!==void 0&&(r.mode!=null&&typeof r.mode=="object"&&typeof r.mode.set=="function"?r.mode.set(t):r.setMode(t))},F=function(){return F=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},F.apply(this,arguments)},Ne=function(r,t,s){var i,o,c=r.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=t.id,c.src=t.src,c.async=(i=t.async)!==null&&i!==void 0?i:!1,c.defer=(o=t.defer)!==null&&o!==void 0?o:!1;var n=function(){c.removeEventListener("load",n),c.removeEventListener("error",l),s(t.src)},l=function(p){c.removeEventListener("load",n),c.removeEventListener("error",l),s(t.src,p)};c.addEventListener("load",n),c.addEventListener("error",l),r.head&&r.head.appendChild(c)},Ce=function(r){var t={},s=function(n,l){var p=t[n];p.done=!0,p.error=l;for(var f=0,h=p.handlers;f<h.length;f++){var m=h[f];m(n,l)}p.handlers=[]},i=function(n,l,p){var f=function(E){return p!==void 0?p(E):console.error(E)};if(n.length===0){f(new Error("At least one script must be provided"));return}for(var h=0,m=!1,g=function(E,S){m||(S?(m=!0,f(S)):++h===n.length&&l())},j=0,y=n;j<y.length;j++){var v=y[j],N=t[v.src];if(N)N.done?g(v.src,N.error):N.handlers.push(g);else{var k=Y("tiny-");t[v.src]={id:k,src:v.src,done:!1,error:null,handlers:[g]},Ne(r,F({id:k},v),s)}}},o=function(){for(var n,l=0,p=Object.values(t);l<p.length;l++){var f=p[l],h=r.getElementById(f.id);h!=null&&h.tagName==="SCRIPT"&&((n=h.parentNode)===null||n===void 0||n.removeChild(h))}t={}},c=function(){return r};return{loadScripts:i,deleteScripts:o,getDocument:c}},we=function(){var r=[],t=function(o){var c=r.find(function(n){return n.getDocument()===o});return c===void 0&&(c=Ce(o),r.push(c)),c},s=function(o,c,n,l,p){var f=function(){return t(o).loadScripts(c,l,p)};n>0?setTimeout(f,n):f()},i=function(){for(var o=r.pop();o!=null;o=r.pop())o.deleteScripts()};return{loadList:s,reinitialize:i}},ke=we(),H=function(r){var t=r;return t&&t.tinymce?t.tinymce:null},Se=function(){var r=function(t,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])},r(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(t,s);function i(){this.constructor=t}t.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}(),I=function(){return I=Object.assign||function(r){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},I.apply(this,arguments)},Ee=function(r){Se(t,r);function t(s){var i,o,c,n=r.call(this,s)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var l=n.editor,p=n.props.value;l&&p&&p!==n.currentContent&&l.undoManager.ignore(function(){if(l.setContent(p),n.valueCursor&&(!n.inline||l.hasFocus()))try{l.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(l){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(l){(l.key==="Enter"||l.key==="Backspace"||l.key==="Delete")&&n.handleBeforeInput(l)},n.handleEditorChange=function(l){var p=n.editor;if(p&&p.initialized){var f=p.getContent();n.props.value!==void 0&&n.props.value!==f&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),f!==n.currentContent&&(n.currentContent=f,B(n.props.onEditorChange)&&n.props.onEditorChange(f,p))}},n.handleEditorChangeSpecial=function(l){(l.key==="Backspace"||l.key==="Delete")&&n.handleEditorChange(l)},n.initialise=function(l){var p,f,h;l===void 0&&(l=0);var m=n.elementRef.current;if(m){if(!ye(m)){if(l===0)setTimeout(function(){return n.initialise(1)},1);else if(l<100)setTimeout(function(){return n.initialise(l+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var g=H(n.view);if(!g)throw new Error("tinymce should have been loaded into global scope");var j=I(I(I(I({},n.props.init),{selector:void 0,target:m,readonly:n.props.disabled,inline:n.inline,plugins:ge((p=n.props.init)===null||p===void 0?void 0:p.plugins,n.props.plugins),toolbar:(f=n.props.toolbar)!==null&&f!==void 0?f:(h=n.props.init)===null||h===void 0?void 0:h.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(y){n.editor=y,n.bindHandlers({}),n.inline&&!U(m)&&y.once("PostRender",function(v){y.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&B(n.props.init.setup)&&n.props.init.setup(y)},init_instance_callback:function(y){var v,N,k=n.getInitialValue();n.currentContent=(v=n.currentContent)!==null&&v!==void 0?v:y.getContent(),n.currentContent!==k&&(n.currentContent=k,y.setContent(k),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var E=(N=n.props.disabled)!==null&&N!==void 0?N:!1;J(n.editor,E?"readonly":"design"),n.props.init&&B(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(y)}});n.inline||(m.style.visibility=""),U(m)&&(m.value=n.getInitialValue()),g.init(j)}},n.id=n.props.id||Y("tiny-react"),n.elementRef=x.createRef(),n.inline=(c=(i=n.props.inline)!==null&&i!==void 0?i:(o=n.props.init)===null||o===void 0?void 0:o.inline)!==null&&c!==void 0?c:!1,n.boundHandlers={},n}return Object.defineProperty(t.prototype,"view",{get:function(){var s,i;return(i=(s=this.elementRef.current)===null||s===void 0?void 0:s.ownerDocument.defaultView)!==null&&i!==void 0?i:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(s){var i=this,o,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(s),this.editor.initialized)){if(this.currentContent=(o=this.currentContent)!==null&&o!==void 0?o:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==s.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var p;if(!i.inline||n.hasFocus())try{p=n.selection.getBookmark(3)}catch{}var f=i.valueCursor;if(n.setContent(i.props.value),!i.inline||n.hasFocus())for(var h=0,m=[p,f];h<m.length;h++){var g=m[h];if(g)try{n.selection.moveToBookmark(g),i.valueCursor=g;break}catch{}}})}if(this.props.disabled!==s.disabled){var l=(c=this.props.disabled)!==null&&c!==void 0?c:!1;J(this.editor,l?"readonly":"design")}}},t.prototype.componentDidMount=function(){var s=this,i,o,c,n,l;if(H(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(o=(i=this.props).onScriptsLoadError)===null||o===void 0||o.call(i,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var p=function(){var h,m;(m=(h=s.props).onScriptsLoad)===null||m===void 0||m.call(h),s.initialise()},f=function(h){var m,g;(g=(m=s.props).onScriptsLoadError)===null||g===void 0||g.call(m,h)};ke.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(l=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&l!==void 0?l:0,p,f)}},t.prototype.componentWillUnmount=function(){var s=this,i=this.editor;i&&(i.off(this.changeEvents(),this.handleEditorChange),i.off(this.beforeInputEvent(),this.handleBeforeInput),i.off("keypress",this.handleEditorChangeSpecial),i.off("keydown",this.handleBeforeInputSpecial),i.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(o){i.off(o,s.boundHandlers[o])}),this.boundHandlers={},i.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var s,i,o,c=(o=(i=(s=H(this.view))===null||s===void 0?void 0:s.Env)===null||i===void 0?void 0:i.browser)===null||o===void 0?void 0:o.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return je()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var s=this.props.tagName,i=s===void 0?"div":s;return x.createElement(i,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return x.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var s,i,o=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.async,c=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:o,defer:c}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:o,defer:c}:f});var n=this.props.cloudChannel,l=this.props.apiKey?this.props.apiKey:"no-api-key",p="https://cdn.tiny.cloud/1/".concat(l,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:p,async:o,defer:c}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(s){var i=this;if(this.editor!==void 0){be(this.editor,s,this.props,this.boundHandlers,function(l){return i.props[l]});var o=function(l){return l.onEditorChange!==void 0||l.value!==void 0},c=o(s),n=o(this.props);!c&&n?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!n&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=ve,t.defaultProps={cloudChannel:"7"},t}(x.Component);const Re=({isOpen:r,setIsOpen:t})=>{const[s,i]=x.useState([{id:1,text:"¿Cuál es tu nombre?"},{id:2,text:"Correo electrónico"},{id:3,text:"Teléfono"},{id:4,text:"¿Cómo supiste de nosotros?"}]),[o,c]=x.useState(""),[n,l]=x.useState(null),[p,f]=x.useState(null),[h,m]=x.useState(""),g=()=>{o.trim()&&(i([...s,{id:Date.now(),text:o.trim()}]),c(""))},j=b=>{i(s.filter(C=>C.id!==b))},y=(b,C)=>{f(b),m(C)},v=()=>{i(s.map(b=>b.id===p?{...b,text:h}:b)),f(null),m("")},N=()=>{f(null),m("")},k=b=>{l(b)},E=b=>{b.preventDefault()},S=(b,C)=>{if(b.preventDefault(),n===null||n===C)return;const w=[...s],_=w[n];w.splice(n,1),w.splice(C,0,_),i(w),l(null)};return x.useEffect(()=>{r&&console.log(s)},[r,s]),e.jsx("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:!r,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{className:"btn btn-soft-danger btn-xs position-absolute",onClick:()=>t(!1),children:[e.jsx("i",{className:"mdi mdi-pan-left me-1"}),"Volver"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-start",style:{minHeight:"calc(100vh - 220px)"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-pill bg-success bg-opacity-10 text-success px-4 py-1 fw-semibold",children:"Inicio"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-4 py-1 fw-semibold",children:"Saludo inicial (cliente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-4 py-1 fw-semibold",children:"Recolección de datos (bot)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50 mb-2",style:{fontSize:"24px"}}),e.jsxs("fieldset",{className:"w-100 border rounded position-relative p-2",style:{minWidth:"480px"},children:[e.jsx("legend",{className:"position-absolute top-0 start-50 translate-middle bg-white px-2 fw-semibold text-uppercase small text-muted mb-0",style:{width:"max-content"},children:"Preguntas extra"}),s.map((b,C)=>e.jsxs("div",{draggable:!0,onDragStart:()=>k(C),onDragOver:E,onDrop:w=>S(w,C),onDoubleClick:()=>y(b.id,b.text),className:"d-flex align-items-center rounded bg-light border px-2 py-2 mb-2 mt-0 cursor-move",children:[e.jsx("i",{className:"mdi mdi-drag me-2 text-muted"}),p===b.id?e.jsxs("div",{className:"flex-grow-1 d-flex gap-1",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:h,onChange:w=>m(w.target.value),onKeyDown:w=>w.key==="Enter"&&v()}),e.jsx("button",{className:"btn btn-xs btn-outline-success ",onClick:v,children:e.jsx("i",{className:"mdi mdi-check"})}),e.jsx("button",{className:"btn btn-xs btn-outline-secondary ",onClick:N,children:e.jsx("i",{className:"mdi mdi-close"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-grow-1",children:b.text}),e.jsx("button",{className:"btn btn-xs btn-outline-primary ms-1",onClick:()=>y(b.id,b.text),children:e.jsx("i",{className:"mdi mdi-pencil"})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger ms-1",onClick:()=>j(b.id),children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]},b.id)),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Nueva pregunta",value:o,onChange:b=>c(b.target.value),onKeyDown:b=>b.key==="Enter"&&g()}),e.jsx("button",{className:"btn btn-outline-primary",onClick:g,children:e.jsx("i",{className:"mdi mdi-plus"})})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-4 py-1 fw-semibold",children:"Saludo final (asistente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded-pill bg-danger bg-opacity-10 text-danger px-4 py-1 fw-semibold",children:"Fin"})]})})]})})},P=new he,_e=({can:r,constants:t,statuses:s})=>{const i=x.useRef(),o=x.useRef(),c=x.useRef(),n=x.useRef(),l=x.useRef(),p=x.useRef(),f=x.useRef(),h=x.useRef(),[m,g]=x.useState(),[j,y]=x.useState(),[v,N]=x.useState(window.location.hash.slice(1)||"general"),[k,E]=x.useState(!1),S=(d,u,R,T,ie="")=>{const A=C(u);switch(g(T),y(ie),c.current.value=u,o.current.value=T,T){case"simpleHTML":l.editor.root.innerHTML=A.value;break;case"HTML":p.current.setContent(A.value);break;default:n.current.value=A.value;break}$(i.current).find(".modal-title").text(R),$(i.current).modal("show")},b=async d=>{d.preventDefault();let u=n.current.value;switch(m){case"simpleHTML":u=l.editor.root.innerHTML;break;case"HTML":u=p.current.getContent();break}const R={type:o.current.value,name:c.current.value,value:u};await P.save(R)&&($(i.current).modal("hide"),location.reload())},C=d=>{const u=t.find(({name:R})=>R==d);return u||{name:d,value:null}},w=x.useRef(),_=x.useRef(),M=x.useRef(),O=x.useRef(),L=x.useRef(),Z=()=>{const d=C("assignation-lead-status"),u=JSON.parse(d.value);$(L.current).find(".modal-title").text("Estados de asignacion"),w.current.value="assignation-lead-status",$(_.current).val(u==null?void 0:u.lead).trigger("change"),$(M.current).val(u==null?void 0:u.manage).trigger("change"),$(O.current).val(u==null?void 0:u.task).trigger("change"),$(L.current).modal("show")},ee=()=>{const d=C("revertion-lead-status"),u=JSON.parse(d.value);$(L.current).find(".modal-title").text("Estados de reversion"),w.current.value="revertion-lead-status",$(_.current).val(u==null?void 0:u.lead).trigger("change"),$(M.current).val(u==null?void 0:u.manage).trigger("change"),$(O.current).val(u==null?void 0:u.task).trigger("change"),$(L.current).modal("show")},ne=async d=>{d.preventDefault();const u={lead:_.current.value,manage:M.current.value,task:O.current.value},R={name:w.current.value,value:JSON.stringify(u),type:"json"};await P.save(R)&&($(i.current).modal("hide"),location.reload())},ae=async d=>{const u={name:"finished-project-status",value:d.target.value};await P.save(u)},te=async d=>{const u={name:"converted-lead-status",value:d.target.value};await P.save(u)},se=C("finished-project-status"),re=C("converted-lead-status");return x.useEffect(()=>{window.location.hash=v},[v]),x.useEffect(()=>{$(f.current).val(se.value).select2(),$(h.current).val(re.value).select2()},[null]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:k,children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"header-title mb-0",children:"Configura aqui las constantes del sistema"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3 mb-2",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("button",{className:`nav-link mb-1 text-start ${v==="general"?"active show":""}`,id:"v-general-tab","data-bs-toggle":"pill",href:"#v-general",role:"tab","aria-controls":"v-general","aria-selected":"true",onClick:()=>N("general"),children:"General"}),e.jsx("button",{className:`nav-link mb-1 text-start ${v==="dashboard"?"active show":""}`,id:"v-dashboard-tab","data-bs-toggle":"pill",href:"#v-dashboard",role:"tab","aria-controls":"v-dashboard","aria-selected":"true",onClick:()=>N("dashboard"),children:"Dashboard"}),e.jsx("button",{className:`nav-link mb-1 text-start ${v==="clients-leads"?"active show":""}`,id:"v-clients-leads-tab","data-bs-toggle":"pill",href:"#v-clients-leads",role:"tab","aria-controls":"v-clients-leads","aria-selected":"false",onClick:()=>N("clients-leads"),children:"Clientes y leads"}),e.jsx("button",{className:`nav-link mb-1 text-start ${v==="projects"?"active show":""}`,id:"v-projects-tab","data-bs-toggle":"pill",href:"#v-projects",role:"tab","aria-controls":"v-projects","aria-selected":"false",onClick:()=>N("projects"),children:"Proyectos"}),e.jsx("button",{className:`nav-link mb-1 text-start ${v==="email"?"active show":""}`,id:"v-email-tab","data-bs-toggle":"pill",href:"#v-email",role:"tab","aria-controls":"v-email","aria-selected":"false",onClick:()=>N("email"),children:"Correo"}),e.jsx("button",{className:`nav-link mb-1 text-start ${v==="whatsapp"?"active show":""}`,id:"v-whatsapp-tab","data-bs-toggle":"pill",href:"#v-whatsapp",role:"tab","aria-controls":"v-whatsapp","aria-selected":"false",onClick:()=>N("whatsapp"),children:"WhatsApp"}),e.jsxs("button",{className:`nav-link mb-1 text-start ${v==="generativeai"?"active show":""}`,id:"v-generativeai-tab","data-bs-toggle":"pill",href:"#v-generativeai",role:"tab","aria-controls":"v-generativeai","aria-selected":"false",onClick:()=>N("generativeai"),children:["Chat IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]})]})}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("div",{className:`tab-pane fade ${v==="general"?"show active":""} coming-soon`,id:"v-general",role:"tabpanel","aria-labelledby":"v-general-tab",children:[e.jsx("h4",{children:"Configuracion general"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${v==="dashboard"?"show active":""}`,id:"v-dashboard",role:"tabpanel","aria-labelledby":"v-dashboard-tab",children:[e.jsx("h4",{children:"Configuracion de dashboard"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de Conversión"}),e.jsx("p",{className:"card-text mb-0",children:"¿Cuál es el estado que define mejor a un lead que ha sido convertido exitosamente?"}),e.jsx("blockquote",{className:"my-1",style:{borderLeft:"4px solid #007bff",backgroundColor:"var(--bs-gray-300)",padding:"5px 10px"},children:e.jsx("small",{children:"Esta configuración nos ayudará a identificar y medir las conversiones efectivas en el sistema."})}),e.jsx(D,{eRef:h,label:"Escoge un estado",noMargin:!0,onChange:te,children:s.filter(d=>d.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((d,u)=>e.jsx("option",{value:d.id,children:d.name},u))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${v==="clientsleads"?"show active":""}`,id:"v-clients-leads",role:"tabpanel","aria-labelledby":"v-clients-leads-tab",children:[e.jsx("h4",{children:"Configuracion de clientes y leads"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:Z,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de asignacion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que asignan el usuario al cliente directamente?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:ee,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de reversion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que quitan la asignacion del usuario directamente?"})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${v==="projects"?"show active":""}`,id:"v-projects",role:"tabpanel","aria-labelledby":"v-projects-tab",children:[e.jsx("h4",{children:"Configuracion de Proyectos"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de culminación"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un proyecto que ha sido terminado?"}),e.jsx(D,{eRef:f,label:"Escoge un estado",noMargin:!0,onChange:ae,children:s.filter(d=>d.table_id=="cd8bd48f-c73c-4a62-9935-024139f3be5f").map((d,u)=>e.jsx("option",{value:d.id,children:d.name},u))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${v==="email"?"show active":""} coming-soon`,id:"v-email",role:"tabpanel","aria-labelledby":"v-email-tab",children:[e.jsx("h4",{children:"Configuracion de correo"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Credenciales"}),e.jsx("p",{className:"card-text mb-1",children:"De donde saldran los mensajes de correo hacia los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Correo actual: mundoweb.pe"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>{},children:[e.jsx("h5",{className:"card-title mb-1",children:"Diseño de correo para el lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que correo veran los nuevos leads cuando caigan al crm?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Correo administrador"}),e.jsx("p",{className:"card-text mb-1",children:"A que correo deseas que te enviemos un mensaje cuando se registe un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted ",style:{wordWrap:"wrap"},children:"Correo actual: gamboapalominocarlosmanuel@gmail.com"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${v==="whatsapp"?"show active":""}`,id:"v-whatsapp",role:"tabpanel","aria-labelledby":"v-whatsapp-tab",children:[e.jsx("h4",{children:"Configuracion de WhatsApp"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"whatsapp-new-lead-notification-message","Notificacion - Nuevo lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion - Nuevo lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje llegara al grupo/persona encargado de revisar los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"whatsapp-new-lead-notification-waid","Grupo/Persona encargado","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Grupo/Persona encargado"}),e.jsx("p",{className:"card-text mb-1",children:"A quien(es) debemos notificar cuando se registre un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion al lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje le llegara al lead cuando sea registrado en el sistema?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"whatsapp-assigned-message-client","Mensaje de asignación","simpleHTML","Variables disponibles: {{user}} = nombre del ejecutivo, {{lead}} = nombre del cliente"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Mensaje de asignación"}),e.jsx("p",{className:"card-text mb-1",children:"Mensaje que se enviará al lead cuando sea asignado a un usuario/ejecutivo"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${v==="generativeai"?"show active":""}`,id:"v-generativeai",role:"tabpanel","aria-labelledby":"v-generativeai-tab",children:[e.jsxs("h4",{children:["IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"API Key - Gemini"}),e.jsxs("p",{className:"card-text mb-1",children:["Configura un API key para que ",e.jsx("b",{children:"Gemini"})," interactue con nuevos clientes."]}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:d=>S(d,"gemini-what-business-do","Que hace tu empresa [Separado por comas]","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Que hace tu empresa"}),e.jsx("p",{className:"card-text mb-1",children:"Ayuda a Gemini a saber que productos y/o servicios buscan los clientes en tu empresa"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>E(!0),children:[e.jsx("h5",{className:"card-title mb-1",children:"Flujo de asistente (Beta)"}),e.jsx("p",{className:"card-text mb-1",children:"Configura el flujo de Gemini con leads para automatizar preguntas y respuestas."}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]})]})]})})]})})]}),e.jsx(Re,{isOpen:k,setIsOpen:E})]})}),e.jsxs(z,{modalRef:L,title:"",onSubmit:ne,size:"sm",children:[e.jsx("input",{ref:w,type:"hidden"}),e.jsxs("div",{className:"row",id:"assignation-status-container",children:[e.jsxs(D,{eRef:_,label:"Estado del lead",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),s.filter(({table_id:d})=>d=="e05a43e5-b3a6-46ce-8d1f-381a73498f33").sort((d,u)=>d.order-u.order).map((d,u)=>e.jsx("option",{value:d.id,children:d.name},`status-${u}`))]}),e.jsxs(D,{eRef:M,label:"Estado de gestion",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),s.filter(({table_id:d})=>d=="9c27e649-574a-47eb-82af-851c5d425434").sort((d,u)=>d.order-u.order).map((d,u)=>e.jsx("option",{value:d.id,children:d.name},`status-${u}`))]}),e.jsxs(D,{eRef:O,label:"Estado de la tarea",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En curso",children:"En curso"}),e.jsx("option",{value:"Realizado",children:"Realizado"})]})]})]}),e.jsx(z,{modalRef:i,title:"",onSubmit:b,size:"md",children:e.jsxs("div",{className:"row",id:"settings-crud-container",children:[e.jsx("input",{ref:c,type:"hidden"}),e.jsx("input",{ref:o,type:"hidden"}),e.jsx("div",{style:{display:m=="text"||m==""||m==null?"block":"none"},children:e.jsx(fe,{eRef:n,label:e.jsxs(e.Fragment,{children:["Valor ",j&&e.jsxs("small",{children:["(",j,")"]})]}),col:"col-12"})}),e.jsx("div",{style:{display:m=="simpleHTML"?"block":"none"},children:e.jsx(me,{eRef:l,label:e.jsxs(e.Fragment,{children:["Valor ",j&&e.jsxs("small",{children:["(",j,")"]})]}),col:"col-12",theme:"bubble"})}),e.jsxs("div",{className:"col-12",style:{display:m=="HTML"?"block":"none"},children:[e.jsx("label",{htmlFor:"",children:"Valor de la variable"}),e.jsx(Ee,{apiKey:"k2389nfj5bxjbe7s3kkc3c6fututtaba9syfaviluaf2jew6",onInit:(d,u)=>p.current=u,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})]})})]})};ce((r,t)=>{if(!t.can("settings","root","all","list"))return location.href="/";de(r).render(e.jsx(pe,{...t,title:"Configuraciones",showTitle:!1,children:e.jsx(_e,{...t})}))});

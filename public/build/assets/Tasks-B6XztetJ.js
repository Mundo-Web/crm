import{C as x,c as f,j as t,r as b}from"./CreateReactScript-DSh221L4.js";/* empty css                    */import{T as h}from"./TasksRest-C2mUuHXa.js";import{A as u}from"./Adminto-DyaMsHFH.js";import{T as g,D as l}from"./DxPanelButton-aij2gTJV.js";import{R as n}from"./ReactAppend-CCPXxX5R.js";import{D as y}from"./DxBox-ccwwFBft.js";import{D as j}from"./Dropdown-CBToB6v9.js";import{D as T}from"./DropdownItem-C9buSMKD.js";import"./server.browser-DoheiHq8.js";const d=new h,k=()=>{const o=b.useRef(),a={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},r={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},c={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}},m=async(i,e)=>{await d.status({id:i,status:e})&&$(o.current).dxDataGrid("instance").refresh()};return t.jsx(t.Fragment,{children:t.jsx(g,{gridRef:o,title:"Tareas",rest:d,toolBar:i=>{i.unshift(l({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(o.current).dxDataGrid("instance").refresh()})),i.unshift(l({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"status",caption:"Estado",width:"120px",cellTemplate:(i,{data:e})=>{i.attr("style","overflow: visible"),i.append(y([{height:"28px",children:t.jsx(j,{className:`btn btn-xs ${a[e.status].color} rounded-pill`,title:e.status,tippy:"Actualizar estado",icon:{icon:a[e.status].icon,color:"#ffffff"},children:Object.keys(a).map((s,p)=>t.jsxs(T,{onClick:()=>m(e.id,s),children:[t.jsx("i",{className:a[s].icon})," ",s]},`item-${p}`))})}]))}},{dataField:"name",caption:"Titulo",dataType:"string",cellTemplate:(i,{data:e})=>{n(i,t.jsxs("div",{children:[t.jsx("b",{className:"d-block my-0",children:e.name}),t.jsxs("div",{className:"mb-0",children:[t.jsxs("span",{class:"badge bg-light text-dark me-1",children:[t.jsx("i",{className:r[e.type].icon})," ",e.type]}),t.jsx("span",{class:`badge ${c[e.priority].color}`,children:e.priority})]})]}))}},{dataField:"type",caption:"Tipo",dataType:"string",cellTemplate:(i,{data:e})=>{i.text(e.type),i.prepend(`<i class="${r[e.type].icon} me-1"></i>`)},visible:!1},{dataField:"priority",caption:"Prioridad",dataType:"string",alignment:"center",cellTemplate:(i,{data:e})=>{n(i,t.jsx("span",{className:`badge ${c[e.priority].color}`,children:e.priority}))},visible:!1},{dataField:"client_note.client.contact_name",caption:"Contacto asociado",cellTemplate:(i,{data:e})=>{const s=e.client_note.client;n(i,t.jsxs("div",{children:[t.jsx("b",{className:"d-block my-0 text-truncate",children:s.contact_name}),t.jsxs("small",{children:[t.jsx("i",{className:"mdi mdi-phone me-1"}),s.country_prefix||"",s.contact_phone]})]}))}},{dataField:"ends_at",caption:"Fecha de vencimiento",cellTemplate:(i,{data:e})=>{i.text(moment(e.ends_at).format("LLL"))}}]})})};x((o,a)=>{f(o).render(t.jsx(u,{...a,title:"Tareas",children:t.jsx(k,{...a})}))});

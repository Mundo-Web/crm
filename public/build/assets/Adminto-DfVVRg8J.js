var ki=Object.defineProperty;var Oi=(t,e,n)=>e in t?ki(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>Oi(t,typeof e!="symbol"?e+"":e,n);import{r as p,R as he,b as wt,m as B,j as o,A as Si,G as we,L as gn}from"./CreateReactScript-BFvya1e4.js";import{L as Ri}from"./Logout-DJpgKGyv.js";import{t as Ai,S as Ti,T as Di}from"./sweetalert2.esm.all-DdfLDKBM.js";function _i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Cn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ot(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ur(t){return"nodeType"in t}function Ce(t){var e,n;return t?Ot(t)?t:ur(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function fr(t){const{Document:e}=Ce(t);return t instanceof e}function Kt(t){return Ot(t)?!1:t instanceof Ce(t).HTMLElement}function ws(t){return t instanceof Ce(t).SVGElement}function St(t){return t?Ot(t)?t.document:ur(t)?fr(t)?t:Kt(t)||ws(t)?t.ownerDocument:document:document:document}const Ze=Cn?p.useLayoutEffect:p.useEffect;function hr(t){const e=p.useRef(t);return Ze(()=>{e.current=t}),p.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Li(){const t=p.useRef(null),e=p.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=p.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Vt(t,e){e===void 0&&(e=[t]);const n=p.useRef(t);return Ze(()=>{n.current!==t&&(n.current=t)},e),n}function Jt(t,e){const n=p.useRef();return p.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function vn(t){const e=hr(t),n=p.useRef(null),r=p.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Kn(t){const e=p.useRef();return p.useEffect(()=>{e.current=t},[t]),e.current}let Bn={};function Gt(t,e){return p.useMemo(()=>{if(e)return e;const n=Bn[t]==null?0:Bn[t]+1;return Bn[t]=n,t+"-"+n},[t,e])}function Es(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const c=Object.entries(a);for(const[l,f]of c){const d=i[l];d!=null&&(i[l]=d+t*f)}return i},{...e})}}const Et=Es(1),zt=Es(-1);function Bi(t){return"clientX"in t&&"clientY"in t}function pr(t){if(!t)return!1;const{KeyboardEvent:e}=Ce(t.target);return e&&t instanceof e}function Mi(t){if(!t)return!1;const{TouchEvent:e}=Ce(t.target);return e&&t instanceof e}function Jn(t){if(Mi(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Bi(t)?{x:t.clientX,y:t.clientY}:null}const Ht=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ht.Translate.toString(t),Ht.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Br="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pi(t){return t.matches(Br)?t:t.querySelector(Br)}const Ii={display:"none"};function $i(t){let{id:e,value:n}=t;return he.createElement("div",{id:e,style:Ii},n)}function Fi(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return he.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ui(){const[t,e]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Ns=p.createContext(null);function qi(t){const e=p.useContext(Ns);p.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Vi(){const[t]=p.useState(()=>new Set),e=p.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[p.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,i)})},[t]),e]}const zi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Hi={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Wi(t){let{announcements:e=Hi,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=zi}=t;const{announce:i,announcement:a}=Ui(),c=Gt("DndLiveRegion"),[l,f]=p.useState(!1);if(p.useEffect(()=>{f(!0)},[]),qi(p.useMemo(()=>({onDragStart(h){let{active:b}=h;i(e.onDragStart({active:b}))},onDragMove(h){let{active:b,over:g}=h;e.onDragMove&&i(e.onDragMove({active:b,over:g}))},onDragOver(h){let{active:b,over:g}=h;i(e.onDragOver({active:b,over:g}))},onDragEnd(h){let{active:b,over:g}=h;i(e.onDragEnd({active:b,over:g}))},onDragCancel(h){let{active:b,over:g}=h;i(e.onDragCancel({active:b,over:g}))}}),[i,e])),!l)return null;const d=he.createElement(he.Fragment,null,he.createElement($i,{id:r,value:s.draggable}),he.createElement(Fi,{id:c,announcement:a}));return n?wt.createPortal(d,n):d}var re;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(re||(re={}));function bn(){}function Mr(t,e){return p.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Xi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const He=Object.freeze({x:0,y:0});function Cs(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function js(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function Yi(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Pr(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function ks(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Ir(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Ki=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Ir(e,e.left,e.top),i=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=Cs(Ir(l),s);i.push({id:c,data:{droppableContainer:a,value:f}})}}return i.sort(js)},Ji=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Pr(e),i=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=Pr(l),d=s.reduce((b,g,N)=>b+Cs(f[N],g),0),h=Number((d/4).toFixed(4));i.push({id:c,data:{droppableContainer:a,value:h}})}}return i.sort(js)};function Gi(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,c=i-n;if(r<s&&n<i){const l=e.width*e.height,f=t.width*t.height,d=a*c,h=d/(l+f-d);return Number(h.toFixed(4))}return 0}const Qi=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const l=Gi(c,e);l>0&&s.push({id:a,data:{droppableContainer:i,value:l}})}}return s.sort(Yi)};function Zi(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Os(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:He}function eo(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,c)=>({...a,top:a.top+t*c.y,bottom:a.bottom+t*c.y,left:a.left+t*c.x,right:a.right+t*c.x}),{...n})}}const to=eo(1);function no(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ro(t,e,n){const r=no(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:c}=r,l=t.left-a-(1-s)*parseFloat(n),f=t.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,h=i?t.height/i:t.height;return{width:d,height:h,top:f,right:l+d,bottom:f+h,left:l}}const so={ignoreTransform:!1};function Rt(t,e){e===void 0&&(e=so);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:d}=Ce(t).getComputedStyle(t);f&&(n=ro(n,f,d))}const{top:r,left:s,width:i,height:a,bottom:c,right:l}=n;return{top:r,left:s,width:i,height:a,bottom:c,right:l}}function $r(t){return Rt(t,{ignoreTransform:!0})}function io(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function oo(t,e){return e===void 0&&(e=Ce(t).getComputedStyle(t)),e.position==="fixed"}function ao(t,e){e===void 0&&(e=Ce(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function jn(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(fr(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Kt(s)||ws(s)||n.includes(s))return n;const i=Ce(t).getComputedStyle(s);return s!==t&&ao(s,i)&&n.push(s),oo(s,i)?n:r(s.parentNode)}return t?r(t):n}function Ss(t){const[e]=jn(t,1);return e??null}function Mn(t){return!Cn||!t?null:Ot(t)?t:ur(t)?fr(t)||t===St(t).scrollingElement?window:Kt(t)?t:null:null}function Rs(t){return Ot(t)?t.scrollX:t.scrollLeft}function As(t){return Ot(t)?t.scrollY:t.scrollTop}function Gn(t){return{x:Rs(t),y:As(t)}}var oe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(oe||(oe={}));function Ts(t){return!Cn||!t?!1:t===document.scrollingElement}function Ds(t){const e={x:0,y:0},n=Ts(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const co={x:.2,y:.2};function lo(t,e,n,r,s){let{top:i,left:a,right:c,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=co);const{isTop:f,isBottom:d,isLeft:h,isRight:b}=Ds(t),g={x:0,y:0},N={x:0,y:0},m={height:e.height*s.y,width:e.width*s.x};return!f&&i<=e.top+m.height?(g.y=oe.Backward,N.y=r*Math.abs((e.top+m.height-i)/m.height)):!d&&l>=e.bottom-m.height&&(g.y=oe.Forward,N.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!b&&c>=e.right-m.width?(g.x=oe.Forward,N.x=r*Math.abs((e.right-m.width-c)/m.width)):!h&&a<=e.left+m.width&&(g.x=oe.Backward,N.x=r*Math.abs((e.left+m.width-a)/m.width)),{direction:g,speed:N}}function uo(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function _s(t){return t.reduce((e,n)=>Et(e,Gn(n)),He)}function fo(t){return t.reduce((e,n)=>e+Rs(n),0)}function ho(t){return t.reduce((e,n)=>e+As(n),0)}function po(t,e){if(e===void 0&&(e=Rt),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Ss(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const mo=[["x",["left","right"],fo],["y",["top","bottom"],ho]];class mr{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=jn(n),s=_s(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,c]of mo)for(const l of a)Object.defineProperty(this,l,{get:()=>{const f=c(r),d=s[i]-f;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Pt{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function go(t){const{EventTarget:e}=Ce(t);return t instanceof e?t:St(t)}function Pn(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var De;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(De||(De={}));function Fr(t){t.preventDefault()}function vo(t){t.stopPropagation()}var z;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(z||(z={}));const Ls={start:[z.Space,z.Enter],cancel:[z.Esc],end:[z.Space,z.Enter,z.Tab]},bo=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case z.Right:return{...n,x:n.x+25};case z.Left:return{...n,x:n.x-25};case z.Down:return{...n,y:n.y+25};case z.Up:return{...n,y:n.y-25}}};class gr{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Pt(St(n)),this.windowListeners=new Pt(Ce(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(De.Resize,this.handleCancel),this.windowListeners.add(De.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(De.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&po(r),n(He)}handleKeyDown(e){if(pr(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Ls,coordinateGetter:a=bo,scrollBehavior:c="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:f}=r.current,d=f?{x:f.left,y:f.top}:He;this.referenceCoordinates||(this.referenceCoordinates=d);const h=a(e,{active:n,context:r.current,currentCoordinates:d});if(h){const b=zt(h,d),g={x:0,y:0},{scrollableAncestors:N}=r.current;for(const m of N){const y=e.code,{isTop:C,isRight:j,isLeft:w,isBottom:u,maxScroll:E,minScroll:x}=Ds(m),k=uo(m),S={x:Math.min(y===z.Right?k.right-k.width/2:k.right,Math.max(y===z.Right?k.left:k.left+k.width/2,h.x)),y:Math.min(y===z.Down?k.bottom-k.height/2:k.bottom,Math.max(y===z.Down?k.top:k.top+k.height/2,h.y))},A=y===z.Right&&!j||y===z.Left&&!w,T=y===z.Down&&!u||y===z.Up&&!C;if(A&&S.x!==h.x){const D=m.scrollLeft+b.x,P=y===z.Right&&D<=E.x||y===z.Left&&D>=x.x;if(P&&!b.y){m.scrollTo({left:D,behavior:c});return}P?g.x=m.scrollLeft-D:g.x=y===z.Right?m.scrollLeft-E.x:m.scrollLeft-x.x,g.x&&m.scrollBy({left:-g.x,behavior:c});break}else if(T&&S.y!==h.y){const D=m.scrollTop+b.y,P=y===z.Down&&D<=E.y||y===z.Up&&D>=x.y;if(P&&!b.x){m.scrollTo({top:D,behavior:c});return}P?g.y=m.scrollTop-D:g.y=y===z.Down?m.scrollTop-E.y:m.scrollTop-x.y,g.y&&m.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,Et(zt(h,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gr.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Ls,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ur(t){return!!(t&&"distance"in t)}function qr(t){return!!(t&&"delay"in t)}class vr{constructor(e,n,r){var s;r===void 0&&(r=go(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=St(a),this.documentListeners=new Pt(this.document),this.listeners=new Pt(r),this.windowListeners=new Pt(Ce(a)),this.initialCoordinates=(s=Jn(i))!=null?s:He,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(De.Resize,this.handleCancel),this.windowListeners.add(De.DragStart,Fr),this.windowListeners.add(De.VisibilityChange,this.handleCancel),this.windowListeners.add(De.ContextMenu,Fr),this.documentListeners.add(De.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ur(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(De.Click,vo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(De.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:c}}=i;if(!s)return;const l=(n=Jn(e))!=null?n:He,f=zt(s,l);if(!r&&c){if(Ur(c)){if(c.tolerance!=null&&Pn(f,c.tolerance))return this.handleCancel();if(Pn(f,c.distance))return this.handleStart()}if(qr(c)&&Pn(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===z.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const yo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class br extends vr{constructor(e){const{event:n}=e,r=St(n.target);super(e,yo,r)}}br.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const xo={move:{name:"mousemove"},end:{name:"mouseup"}};var Qn;(function(t){t[t.RightClick=2]="RightClick"})(Qn||(Qn={}));class wo extends vr{constructor(e){super(e,xo,St(e.event.target))}}wo.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Qn.RightClick?!1:(r==null||r({event:n}),!0)}}];const In={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Eo extends vr{constructor(e){super(e,In)}static setup(){return window.addEventListener(In.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(In.move.name,e)};function e(){}}}Eo.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var It;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(It||(It={}));var yn;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(yn||(yn={}));function No(t){let{acceleration:e,activator:n=It.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:c=yn.TreeOrder,pointerCoordinates:l,scrollableAncestors:f,scrollableAncestorRects:d,delta:h,threshold:b}=t;const g=jo({delta:h,disabled:!i}),[N,m]=Li(),y=p.useRef({x:0,y:0}),C=p.useRef({x:0,y:0}),j=p.useMemo(()=>{switch(n){case It.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case It.DraggableRect:return s}},[n,s,l]),w=p.useRef(null),u=p.useCallback(()=>{const x=w.current;if(!x)return;const k=y.current.x*C.current.x,S=y.current.y*C.current.y;x.scrollBy(k,S)},[]),E=p.useMemo(()=>c===yn.TreeOrder?[...f].reverse():f,[c,f]);p.useEffect(()=>{if(!i||!f.length||!j){m();return}for(const x of E){if((r==null?void 0:r(x))===!1)continue;const k=f.indexOf(x),S=d[k];if(!S)continue;const{direction:A,speed:T}=lo(x,S,j,e,b);for(const D of["x","y"])g[D][A[D]]||(T[D]=0,A[D]=0);if(T.x>0||T.y>0){m(),w.current=x,N(u,a),y.current=T,C.current=A;return}}y.current={x:0,y:0},C.current={x:0,y:0},m()},[e,u,r,m,i,a,JSON.stringify(j),JSON.stringify(g),N,f,E,d,JSON.stringify(b)])}const Co={x:{[oe.Backward]:!1,[oe.Forward]:!1},y:{[oe.Backward]:!1,[oe.Forward]:!1}};function jo(t){let{delta:e,disabled:n}=t;const r=Kn(e);return Jt(s=>{if(n||!r||!s)return Co;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[oe.Backward]:s.x[oe.Backward]||i.x===-1,[oe.Forward]:s.x[oe.Forward]||i.x===1},y:{[oe.Backward]:s.y[oe.Backward]||i.y===-1,[oe.Forward]:s.y[oe.Forward]||i.y===1}}},[n,e,r])}function ko(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Jt(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function Oo(t,e){return p.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var Wt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Wt||(Wt={}));var Zn;(function(t){t.Optimized="optimized"})(Zn||(Zn={}));const Vr=new Map;function So(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=p.useState(null),{frequency:c,measure:l,strategy:f}=s,d=p.useRef(t),h=y(),b=Vt(h),g=p.useCallback(function(C){C===void 0&&(C=[]),!b.current&&a(j=>j===null?C:j.concat(C.filter(w=>!j.includes(w))))},[b]),N=p.useRef(null),m=Jt(C=>{if(h&&!n)return Vr;if(!C||C===Vr||d.current!==t||i!=null){const j=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){j.set(w.id,w.rect.current);continue}const u=w.node.current,E=u?new mr(l(u),u):null;w.rect.current=E,E&&j.set(w.id,E)}return j}return C},[t,i,n,h,l]);return p.useEffect(()=>{d.current=t},[t]),p.useEffect(()=>{h||g()},[n,h]),p.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),p.useEffect(()=>{h||typeof c!="number"||N.current!==null||(N.current=setTimeout(()=>{g(),N.current=null},c))},[c,h,g,...r]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:i!=null};function y(){switch(f){case Wt.Always:return!1;case Wt.BeforeDragging:return n;default:return!n}}}function Bs(t,e){return Jt(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Ro(t,e){return Bs(t,e)}function Ao(t){let{callback:e,disabled:n}=t;const r=hr(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function kn(t){let{callback:e,disabled:n}=t;const r=hr(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function To(t){return new mr(Rt(t),t)}function zr(t,e,n){e===void 0&&(e=To);const[r,s]=p.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=l??n)!=null?f:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const a=Ao({callback(l){if(t)for(const f of l){const{type:d,target:h}=f;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),c=kn({callback:i});return Ze(()=>{i(),t?(c==null||c.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[t]),r}function Do(t){const e=Bs(t);return Os(t,e)}const Hr=[];function _o(t){const e=p.useRef(t),n=Jt(r=>t?r&&r!==Hr&&t&&e.current&&t.parentNode===e.current.parentNode?r:jn(t):Hr,[t]);return p.useEffect(()=>{e.current=t},[t]),n}function Lo(t){const[e,n]=p.useState(null),r=p.useRef(t),s=p.useCallback(i=>{const a=Mn(i.target);a&&n(c=>c?(c.set(a,Gn(a)),new Map(c)):null)},[]);return p.useEffect(()=>{const i=r.current;if(t!==i){a(i);const c=t.map(l=>{const f=Mn(l);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,Gn(f)]):null}).filter(l=>l!=null);n(c.length?new Map(c):null),r.current=t}return()=>{a(t),a(i)};function a(c){c.forEach(l=>{const f=Mn(l);f==null||f.removeEventListener("scroll",s)})}},[s,t]),p.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>Et(i,a),He):_s(t):He,[t,e])}function Wr(t,e){e===void 0&&(e=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},e),p.useEffect(()=>{const r=t!==He;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?zt(t,n.current):He}function Bo(t){p.useEffect(()=>{if(!Cn)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Mo(t,e){return p.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function Ms(t){return p.useMemo(()=>t?io(t):null,[t])}const Xr=[];function Po(t,e){e===void 0&&(e=Rt);const[n]=t,r=Ms(n?Ce(n):null),[s,i]=p.useState(Xr);function a(){i(()=>t.length?t.map(l=>Ts(l)?r:new mr(e(l),l)):Xr)}const c=kn({callback:a});return Ze(()=>{c==null||c.disconnect(),a(),t.forEach(l=>c==null?void 0:c.observe(l))},[t]),s}function Io(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Kt(e)?e:t}function $o(t){let{measure:e}=t;const[n,r]=p.useState(null),s=p.useCallback(f=>{for(const{target:d}of f)if(Kt(d)){r(h=>{const b=e(d);return h?{...h,width:b.width,height:b.height}:b});break}},[e]),i=kn({callback:s}),a=p.useCallback(f=>{const d=Io(f);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?e(d):null)},[e,i]),[c,l]=vn(a);return p.useMemo(()=>({nodeRef:c,rect:n,setRef:l}),[n,c,l])}const Fo=[{sensor:br,options:{}},{sensor:gr,options:{}}],Uo={current:{}},dn={draggable:{measure:$r},droppable:{measure:$r,strategy:Wt.WhileDragging,frequency:Zn.Optimized},dragOverlay:{measure:Rt}};class $t extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const qo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $t,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:bn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dn,measureDroppableContainers:bn,windowRect:null,measuringScheduled:!1},Vo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:bn,draggableNodes:new Map,over:null,measureDroppableContainers:bn},On=p.createContext(Vo),Ps=p.createContext(qo);function zo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $t}}}function Ho(t,e){switch(e.type){case re.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case re.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new $t(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case re.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new $t(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case re.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new $t(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Wo(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=p.useContext(On),i=Kn(r),a=Kn(n==null?void 0:n.id);return p.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!pr(i)||document.activeElement===i.target)return;const c=s.get(a);if(!c)return;const{activatorNode:l,node:f}=c;if(!l.current&&!f.current)return;requestAnimationFrame(()=>{for(const d of[l.current,f.current]){if(!d)continue;const h=Pi(d);if(h){h.focus();break}}})}},[r,e,s,a,i]),null}function Xo(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function Yo(t){return p.useMemo(()=>({draggable:{...dn.draggable,...t==null?void 0:t.draggable},droppable:{...dn.droppable,...t==null?void 0:t.droppable},dragOverlay:{...dn.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Ko(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=p.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;Ze(()=>{if(!a&&!c||!e){i.current=!1;return}if(i.current||!r)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const d=n(f),h=Os(d,r);if(a||(h.x=0),c||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const b=Ss(f);b&&b.scrollBy({top:h.y,left:h.x})}},[e,a,c,r,n])}const Is=p.createContext({...He,scaleX:1,scaleY:1});var dt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(dt||(dt={}));const Jo=p.memo(function(e){var n,r,s,i;let{id:a,accessibility:c,autoScroll:l=!0,children:f,sensors:d=Fo,collisionDetection:h=Qi,measuring:b,modifiers:g,...N}=e;const m=p.useReducer(Ho,void 0,zo),[y,C]=m,[j,w]=Vi(),[u,E]=p.useState(dt.Uninitialized),x=u===dt.Initialized,{draggable:{active:k,nodes:S,translate:A},droppable:{containers:T}}=y,D=k!=null?S.get(k):null,P=p.useRef({initial:null,translated:null}),I=p.useMemo(()=>{var te;return k!=null?{id:k,data:(te=D==null?void 0:D.data)!=null?te:Uo,rect:P}:null},[k,D]),F=p.useRef(null),[_,V]=p.useState(null),[O,M]=p.useState(null),W=Vt(N,Object.values(N)),Y=Gt("DndDescribedBy",a),ae=p.useMemo(()=>T.getEnabled(),[T]),X=Yo(b),{droppableRects:Z,measureDroppableContainers:ce,measuringScheduled:le}=So(ae,{dragging:x,dependencies:[A.x,A.y],config:X.droppable}),J=ko(S,k),Pe=p.useMemo(()=>O?Jn(O):null,[O]),se=at(),pe=Ro(J,X.draggable.measure);Ko({activeNode:k!=null?S.get(k):null,config:se.layoutShiftCompensation,initialRect:pe,measure:X.draggable.measure});const U=zr(J,X.draggable.measure,pe),Se=zr(J?J.parentElement:null),me=p.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=T.getNodeFor((n=me.current.over)==null?void 0:n.id),be=$o({measure:X.dragOverlay.measure}),Ie=(r=be.nodeRef.current)!=null?r:J,Ae=x?(s=be.rect)!=null?s:U:null,st=!!(be.nodeRef.current&&be.rect),ht=Do(st?null:U),it=Ms(Ie?Ce(Ie):null),ie=_o(x?Re??J:null),je=Po(ie),We=Xo(g,{transform:{x:A.x-ht.x,y:A.y-ht.y,scaleX:1,scaleY:1},activatorEvent:O,active:I,activeNodeRect:U,containerNodeRect:Se,draggingNodeRect:Ae,over:me.current.over,overlayNodeRect:be.rect,scrollableAncestors:ie,scrollableAncestorRects:je,windowRect:it}),Xe=Pe?Et(Pe,A):null,ot=Lo(ie),bt=Wr(ot),yt=Wr(ot,[U]),$e=Et(We,bt),Fe=Ae?to(Ae,We):null,pt=I&&Fe?h({active:I,collisionRect:Fe,droppableRects:Z,droppableContainers:ae,pointerCoordinates:Xe}):null,tn=ks(pt,"id"),[Ye,nn]=p.useState(null),_n=st?We:Et(We,yt),v=Zi(_n,(i=Ye==null?void 0:Ye.rect)!=null?i:null,U),R=p.useRef(null),L=p.useCallback((te,G)=>{let{sensor:ue,options:ke}=G;if(F.current==null)return;const ne=S.get(F.current);if(!ne)return;const ge=te.nativeEvent,xe=new ue({active:F.current,activeNode:ne,event:ge,options:ke,context:me,onAbort(fe){if(!S.get(fe))return;const{onDragAbort:Ke}=W.current,nt={id:fe};Ke==null||Ke(nt),j({type:"onDragAbort",event:nt})},onPending(fe,ct,Ke,nt){if(!S.get(fe))return;const{onDragPending:Dt}=W.current,lt={id:fe,constraint:ct,initialCoordinates:Ke,offset:nt};Dt==null||Dt(lt),j({type:"onDragPending",event:lt})},onStart(fe){const ct=F.current;if(ct==null)return;const Ke=S.get(ct);if(!Ke)return;const{onDragStart:nt}=W.current,Tt={activatorEvent:ge,active:{id:ct,data:Ke.data,rect:P}};wt.unstable_batchedUpdates(()=>{nt==null||nt(Tt),E(dt.Initializing),C({type:re.DragStart,initialCoordinates:fe,active:ct}),j({type:"onDragStart",event:Tt}),V(R.current),M(ge)})},onMove(fe){C({type:re.DragMove,coordinates:fe})},onEnd:Ue(re.DragEnd),onCancel:Ue(re.DragCancel)});R.current=xe;function Ue(fe){return async function(){const{active:Ke,collisions:nt,over:Tt,scrollAdjustedTranslate:Dt}=me.current;let lt=null;if(Ke&&Dt){const{cancelDrop:_t}=W.current;lt={activatorEvent:ge,active:Ke,collisions:nt,delta:Dt,over:Tt},fe===re.DragEnd&&typeof _t=="function"&&await Promise.resolve(_t(lt))&&(fe=re.DragCancel)}F.current=null,wt.unstable_batchedUpdates(()=>{C({type:fe}),E(dt.Uninitialized),nn(null),V(null),M(null),R.current=null;const _t=fe===re.DragEnd?"onDragEnd":"onDragCancel";if(lt){const Ln=W.current[_t];Ln==null||Ln(lt),j({type:_t,event:lt})}})}}},[S]),K=p.useCallback((te,G)=>(ue,ke)=>{const ne=ue.nativeEvent,ge=S.get(ke);if(F.current!==null||!ge||ne.dndKit||ne.defaultPrevented)return;const xe={active:ge};te(ue,G.options,xe)===!0&&(ne.dndKit={capturedBy:G.sensor},F.current=ke,L(ue,G))},[S,L]),q=Oo(d,K);Bo(d),Ze(()=>{U&&u===dt.Initializing&&E(dt.Initialized)},[U,u]),p.useEffect(()=>{const{onDragMove:te}=W.current,{active:G,activatorEvent:ue,collisions:ke,over:ne}=me.current;if(!G||!ue)return;const ge={active:G,activatorEvent:ue,collisions:ke,delta:{x:$e.x,y:$e.y},over:ne};wt.unstable_batchedUpdates(()=>{te==null||te(ge),j({type:"onDragMove",event:ge})})},[$e.x,$e.y]),p.useEffect(()=>{const{active:te,activatorEvent:G,collisions:ue,droppableContainers:ke,scrollAdjustedTranslate:ne}=me.current;if(!te||F.current==null||!G||!ne)return;const{onDragOver:ge}=W.current,xe=ke.get(tn),Ue=xe&&xe.rect.current?{id:xe.id,rect:xe.rect.current,data:xe.data,disabled:xe.disabled}:null,fe={active:te,activatorEvent:G,collisions:ue,delta:{x:ne.x,y:ne.y},over:Ue};wt.unstable_batchedUpdates(()=>{nn(Ue),ge==null||ge(fe),j({type:"onDragOver",event:fe})})},[tn]),Ze(()=>{me.current={activatorEvent:O,active:I,activeNode:J,collisionRect:Fe,collisions:pt,droppableRects:Z,draggableNodes:S,draggingNode:Ie,draggingNodeRect:Ae,droppableContainers:T,over:Ye,scrollableAncestors:ie,scrollAdjustedTranslate:$e},P.current={initial:Ae,translated:Fe}},[I,J,pt,Fe,S,Ie,Ae,Z,T,Ye,ie,$e]),No({...se,delta:A,draggingRect:Fe,pointerCoordinates:Xe,scrollableAncestors:ie,scrollableAncestorRects:je});const de=p.useMemo(()=>({active:I,activeNode:J,activeNodeRect:U,activatorEvent:O,collisions:pt,containerNodeRect:Se,dragOverlay:be,draggableNodes:S,droppableContainers:T,droppableRects:Z,over:Ye,measureDroppableContainers:ce,scrollableAncestors:ie,scrollableAncestorRects:je,measuringConfiguration:X,measuringScheduled:le,windowRect:it}),[I,J,U,O,pt,Se,be,S,T,Z,Ye,ce,ie,je,X,le,it]),ye=p.useMemo(()=>({activatorEvent:O,activators:q,active:I,activeNodeRect:U,ariaDescribedById:{draggable:Y},dispatch:C,draggableNodes:S,over:Ye,measureDroppableContainers:ce}),[O,q,I,U,C,Y,S,Ye,ce]);return he.createElement(Ns.Provider,{value:w},he.createElement(On.Provider,{value:ye},he.createElement(Ps.Provider,{value:de},he.createElement(Is.Provider,{value:v},f)),he.createElement(Wo,{disabled:(c==null?void 0:c.restoreFocus)===!1})),he.createElement(Wi,{...c,hiddenTextDescribedById:Y}));function at(){const te=(_==null?void 0:_.autoScrollEnabled)===!1,G=typeof l=="object"?l.enabled===!1:l===!1,ue=x&&!te&&!G;return typeof l=="object"?{...l,enabled:ue}:{enabled:ue}}}),Go=p.createContext(null),Yr="button",Qo="Draggable";function Zo(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Gt(Qo),{activators:a,activatorEvent:c,active:l,activeNodeRect:f,ariaDescribedById:d,draggableNodes:h,over:b}=p.useContext(On),{role:g=Yr,roleDescription:N="draggable",tabIndex:m=0}=s??{},y=(l==null?void 0:l.id)===e,C=p.useContext(y?Is:Go),[j,w]=vn(),[u,E]=vn(),x=Mo(a,e),k=Vt(n);Ze(()=>(h.set(e,{id:e,key:i,node:j,activatorNode:u,data:k}),()=>{const A=h.get(e);A&&A.key===i&&h.delete(e)}),[h,e]);const S=p.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":r,"aria-pressed":y&&g===Yr?!0:void 0,"aria-roledescription":N,"aria-describedby":d.draggable}),[r,g,m,y,N,d.draggable]);return{active:l,activatorEvent:c,activeNodeRect:f,attributes:S,isDragging:y,listeners:r?void 0:x,node:j,over:b,setNodeRef:w,setActivatorNodeRef:E,transform:C}}function ea(){return p.useContext(Ps)}const ta="Droppable",na={timeout:25};function ra(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Gt(ta),{active:a,dispatch:c,over:l,measureDroppableContainers:f}=p.useContext(On),d=p.useRef({disabled:n}),h=p.useRef(!1),b=p.useRef(null),g=p.useRef(null),{disabled:N,updateMeasurementsFor:m,timeout:y}={...na,...s},C=Vt(m??r),j=p.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),g.current=null},y)},[y]),w=kn({callback:j,disabled:N||!a}),u=p.useCallback((S,A)=>{w&&(A&&(w.unobserve(A),h.current=!1),S&&w.observe(S))},[w]),[E,x]=vn(u),k=Vt(e);return p.useEffect(()=>{!w||!E.current||(w.disconnect(),h.current=!1,w.observe(E.current))},[E,w]),p.useEffect(()=>(c({type:re.RegisterDroppable,element:{id:r,key:i,disabled:n,node:E,rect:b,data:k}}),()=>c({type:re.UnregisterDroppable,key:i,id:r})),[r]),p.useEffect(()=>{n!==d.current.disabled&&(c({type:re.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,c]),{active:a,rect:b,isOver:(l==null?void 0:l.id)===r,node:E,over:l,setNodeRef:x}}function yr(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function sa(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function rn(t){return t!==null&&t>=0}function ia(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function oa(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const sn={scaleX:1,scaleY:1},aa=t=>{var e;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:i,index:a}=t;const c=(e=n[s])!=null?e:r;if(!c)return null;const l=ca(n,a,s);if(a===s){const f=n[i];return f?{x:s<i?f.left+f.width-(c.left+c.width):f.left-c.left,y:0,...sn}:null}return a>s&&a<=i?{x:-c.width-l,y:0,...sn}:a<s&&a>=i?{x:c.width+l,y:0,...sn}:{x:0,y:0,...sn}};function ca(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return!r||!s&&!i?0:n<e?s?r.left-(s.left+s.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(s.left+s.width)}const $s=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=yr(e,r,n),a=e[s],c=i[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Fs="Sortable",Us=he.createContext({activeIndex:-1,containerId:Fs,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$s,disabled:{draggable:!1,droppable:!1}});function la(t){let{children:e,id:n,items:r,strategy:s=$s,disabled:i=!1}=t;const{active:a,dragOverlay:c,droppableRects:l,over:f,measureDroppableContainers:d}=ea(),h=Gt(Fs,n),b=c.rect!==null,g=p.useMemo(()=>r.map(x=>typeof x=="object"&&"id"in x?x.id:x),[r]),N=a!=null,m=a?g.indexOf(a.id):-1,y=f?g.indexOf(f.id):-1,C=p.useRef(g),j=!ia(g,C.current),w=y!==-1&&m===-1||j,u=oa(i);Ze(()=>{j&&N&&d(g)},[j,g,N,d]),p.useEffect(()=>{C.current=g},[g]);const E=p.useMemo(()=>({activeIndex:m,containerId:h,disabled:u,disableTransforms:w,items:g,overIndex:y,useDragOverlay:b,sortedRects:sa(g,l),strategy:s}),[m,h,u.draggable,u.droppable,w,g,y,l,b,s]);return he.createElement(Us.Provider,{value:E},e)}const da=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return yr(n,r,s).indexOf(e)},ua=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:c,previousContainerId:l,transition:f}=t;return!f||!r||c!==i&&s===a?!1:n?!0:a!==s&&e===l},fa={duration:200,easing:"ease"},qs="transform",ha=Ht.Transition.toString({property:qs,duration:0,easing:"linear"}),pa={roleDescription:"sortable"};function ma(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=p.useState(null),c=p.useRef(n);return Ze(()=>{if(!e&&n!==c.current&&r.current){const l=s.current;if(l){const f=Rt(r.current,{ignoreTransform:!0}),d={x:l.left-f.left,y:l.top-f.top,scaleX:l.width/f.width,scaleY:l.height/f.height};(d.x||d.y)&&a(d)}}n!==c.current&&(c.current=n)},[e,n,r,s]),p.useEffect(()=>{i&&a(null)},[i]),i}function ga(t){let{animateLayoutChanges:e=ua,attributes:n,disabled:r,data:s,getNewIndex:i=da,id:a,strategy:c,resizeObserverConfig:l,transition:f=fa}=t;const{items:d,containerId:h,activeIndex:b,disabled:g,disableTransforms:N,sortedRects:m,overIndex:y,useDragOverlay:C,strategy:j}=p.useContext(Us),w=va(r,g),u=d.indexOf(a),E=p.useMemo(()=>({sortable:{containerId:h,index:u,items:d},...s}),[h,s,u,d]),x=p.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:k,node:S,isOver:A,setNodeRef:T}=ra({id:a,data:E,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...l}}),{active:D,activatorEvent:P,activeNodeRect:I,attributes:F,setNodeRef:_,listeners:V,isDragging:O,over:M,setActivatorNodeRef:W,transform:Y}=Zo({id:a,data:E,attributes:{...pa,...n},disabled:w.draggable}),ae=_i(T,_),X=!!D,Z=X&&!N&&rn(b)&&rn(y),ce=!C&&O,le=ce&&Z?Y:null,Pe=Z?le??(c??j)({rects:m,activeNodeRect:I,activeIndex:b,overIndex:y,index:u}):null,se=rn(b)&&rn(y)?i({id:a,items:d,activeIndex:b,overIndex:y}):u,pe=D==null?void 0:D.id,U=p.useRef({activeId:pe,items:d,newIndex:se,containerId:h}),Se=d!==U.current.items,me=e({active:D,containerId:h,isDragging:O,isSorting:X,id:a,index:u,items:d,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:f,wasDragging:U.current.activeId!=null}),Re=ma({disabled:!me,index:u,node:S,rect:k});return p.useEffect(()=>{X&&U.current.newIndex!==se&&(U.current.newIndex=se),h!==U.current.containerId&&(U.current.containerId=h),d!==U.current.items&&(U.current.items=d)},[X,se,h,d]),p.useEffect(()=>{if(pe===U.current.activeId)return;if(pe!=null&&U.current.activeId==null){U.current.activeId=pe;return}const Ie=setTimeout(()=>{U.current.activeId=pe},50);return()=>clearTimeout(Ie)},[pe]),{active:D,activeIndex:b,attributes:F,data:E,rect:k,index:u,newIndex:se,items:d,isOver:A,isSorting:X,isDragging:O,listeners:V,node:S,overIndex:y,over:M,setNodeRef:ae,setActivatorNodeRef:W,setDroppableNodeRef:T,setDraggableNodeRef:_,transform:Re??Pe,transition:be()};function be(){if(Re||Se&&U.current.newIndex===u)return ha;if(!(ce&&!pr(P)||!f)&&(X||me))return Ht.Transition.toString({...f,property:qs})}}function va(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function xn(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const ba=[z.Down,z.Right,z.Up,z.Left],ya=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:c}}=e;if(ba.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const b=s.get(h.id);if(b)switch(t.code){case z.Down:r.top<b.top&&l.push(h);break;case z.Up:r.top>b.top&&l.push(h);break;case z.Left:r.left>b.left&&l.push(h);break;case z.Right:r.left<b.left&&l.push(h);break}});const f=Ji({collisionRect:r,droppableRects:s,droppableContainers:l});let d=ks(f,"id");if(d===(a==null?void 0:a.id)&&f.length>1&&(d=f[1].id),d!=null){const h=i.get(n.id),b=i.get(d),g=b?s.get(b.id):null,N=b==null?void 0:b.node.current;if(N&&g&&h&&b){const y=jn(N).some((x,k)=>c[k]!==x),C=Vs(h,b),j=xa(h,b),w=y||!C?{x:0,y:0}:{x:j?r.width-g.width:0,y:j?r.height-g.height:0},u={x:g.left,y:g.top};return w.x&&w.y?u:zt(u,w)}}}};function Vs(t,e){return!xn(t)||!xn(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function xa(t,e){return!xn(t)||!xn(e)||!Vs(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const wa=()=>{const t=B.Local.get("adminto_settings")??{},e=document.getElementById("bs-default-stylesheet"),n=document.getElementById("bs-dark-stylesheet"),r=document.getElementById("app-default-stylesheet"),s=document.getElementById("app-dark-stylesheet"),i=document.getElementById("dg-default-stylesheet"),a=document.getElementById("dg-dark-stylesheet");t.theme=="dark"?(n.disabled=!1,s.disabled=!1,a.disabled=!1,e.disabled=!0,r.disabled=!0,i.disabled=!0):(e.disabled=!1,r.disabled=!1,i.disabled=!1,n.disabled=!0,s.disabled=!0,a.disabled=!0);const c=document.body;return c.setAttribute("data-layout-width",t.width??"fluid"),c.setAttribute("data-layout-menu-position",t.menuPosition??"fixed"),c.setAttribute("data-sidebar-color",t.menuColor??"light"),c.setAttribute("data-sidebar-showuser",t.userInfo??!0),c.setAttribute("data-sidebar-size",t.menuSize??"default"),c.setAttribute("data-topbar-color",t.navbarColor??"light"),o.jsx("div",{className:"right-bar",children:o.jsxs("div",{"data-simplebar":!0,className:"h-100",children:[o.jsxs("div",{className:"rightbar-title",children:[o.jsx("a",{href:"#",className:"right-bar-toggle float-end",children:o.jsx("i",{className:"mdi mdi-close"})}),o.jsx("h4",{className:"font-16 m-0 text-white",children:"Configurar tema"})]}),o.jsx("div",{className:"tab-content pt-0",children:o.jsx("div",{className:"tab-pane active",id:"settings-tab",role:"tabpanel",children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"alert alert-warning",role:"alert",children:[o.jsx("strong",{children:"Modifica "})," el tema, el menu, la barra superior, etc."]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Tema principal"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"color-scheme-mode",id:"light-mode-check",defaultChecked:t.theme=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"light-mode-check",children:t.theme=="dark"?"Modo oscuro":"Modo claro"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Ancho de la ventana"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"width",id:"fluid-check",defaultChecked:t.width=="boxed"}),o.jsx("label",{className:"form-check-label",htmlFor:"fluid-check",children:t.width=="boxed"?"Encuadrado":"Completo"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Posicion del menu y el nabvar"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"menus-position",id:"fixed-check",defaultChecked:t.menuPosition=="scrollable"}),o.jsx("label",{className:"form-check-label",htmlFor:"fixed-check",children:t.menuPosition=="scrollable"?"Posision dinamica":"Posicion fija"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color del menu"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"light",id:"light-check",defaultChecked:!t.menuColor||t.menuColor=="light"}),o.jsx("label",{className:"form-check-label",htmlFor:"light-check",children:"Claro"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"dark",id:"dark-check",defaultChecked:t.menuColor=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"dark-check",children:"Oscuro"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"brand",id:"brand-check",defaultChecked:t.menuColor=="brand"}),o.jsx("label",{className:"form-check-label",htmlFor:"brand-check",children:"Brand"})]}),o.jsxs("div",{className:"form-check form-switch mb-3",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"gradient",id:"gradient-check",defaultChecked:t.menuColor=="gradient"}),o.jsx("label",{className:"form-check-label",htmlFor:"gradient-check",children:"Gradiente"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Medida del menu"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"default",id:"default-size-check",defaultChecked:!t.menuSize||t.menuSize=="default"}),o.jsx("label",{className:"form-check-label",htmlFor:"default-size-check",children:"Por defecto"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"condensed",id:"condensed-check",defaultChecked:t.menuSize=="condensed"}),o.jsxs("label",{className:"form-check-label",htmlFor:"condensed-check",children:["Condensado ",o.jsx("small",{children:"(Tamao extra pequeo)"})]})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"compact",id:"compact-check",defaultChecked:t.menuSize=="compact"}),o.jsxs("label",{className:"form-check-label",htmlFor:"compact-check",children:["Compacto ",o.jsx("small",{children:"(Tamao pequeo)"})]})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Informacion del Usuario (Menu)"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"leftsidebar-user",value:"fixed",id:"sidebaruser-check",defaultChecked:t.userInfo!=!1}),o.jsx("label",{className:"form-check-label",htmlFor:"sidebaruser-check",children:t.userInfo=="false"?"Ocultar":"Mostrar"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color de la barra superior"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"topbar-color",value:"dark",id:"darktopbar-check",defaultChecked:t.navbarColor=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"darktopbar-check",children:t.navbarColor=="dark"?"Oscuro":"Acorde al cuerpo"})]}),o.jsx("div",{className:"d-grid mt-4",children:o.jsx("button",{className:"btn btn-primary",id:"resetBtn",children:"Restablecer"})})]})})})]})})},zs={null:{icon:"mdi mdi-qrcode",text:"Inicia sesin en WhatsApp",color:"dark"},verifying:{icon:"fa fa-spinner fa-spin",text:"Verificando sesin...",color:"secondary"},qr:{icon:"mdi mdi-qrcode-scan",text:"Escanea el QR",color:"danger"},loading_screen:{icon:"fa fa-spinner fa-spin",text:"Cargando...",color:"secondary"},authenticated:{icon:"fa fa-check",text:"Sesin activa",color:"primary"},ready:{icon:"fa fa-check",text:"Sesin activa y lista",color:"success"},close:{icon:"fa fa-warning",text:"Sesin cerrada",color:"danger"}},Ea=({id:t,uuid:e,name:n,person:r,session:s,APP_PROTOCOL:i,APP_DOMAIN:a})=>{const c=t!=s.business_id,l=async()=>{await Si.activeService(e)&&location.reload()};return o.jsx("span",{className:"dropdown-item notify-item",style:{cursor:c?"pointer":"default"},onClick:l,children:o.jsxs("div",{className:"d-flex align-items-start",children:[o.jsx("img",{className:"d-flex me-2 rounded-circle",src:`//${a}/api/logo/thumbnail/null`,alt:n,height:"32"}),o.jsxs("div",{className:"w-100",children:[o.jsx("h5",{className:`m-0 font-14 ${!c&&"text-primary"} text-truncate`,style:{width:"115px"},children:n}),o.jsxs("span",{className:"font-12 mb-0",children:["RUC: ",r.document_number]})]})]})})};class Sn{constructor(){Q(this,"path",null);Q(this,"hasFiles",!1);Q(this,"controller",null);Q(this,"paginateSufix",null);Q(this,"paginate",async e=>{this.controller.abort("Nothing"),this.controller=new AbortController;const n=this.controller.signal,s=await(await fetch(`/api/${this.path}/paginate${this.paginateSufix?`/${this.paginateSufix}`:""}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:B.JSON.stringify(e),signal:n})).text();return B.JSON.parseable(s)?B.JSON.parse(s):null});Q(this,"save",async(e,n=!0)=>{try{let r=!1,s={};if(this.hasFiles){const i=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:e});r=i.ok,s=B.JSON.parseable(await i.text())}else{const i=await B.Fetch(`/api/${this.path}`,{method:"POST",body:B.JSON.stringify(e)});r=i.status,s=i.result}if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),s.data||!0}catch(r){return n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),null}});Q(this,"status",async({id:e,status:n})=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:B.JSON.stringify({id:e,status:n})});if(!r)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),s}catch(r){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),!1}});Q(this,"boolean",async({id:e,field:n,value:r},s=!0)=>{try{const{status:i,result:a}=await B.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:B.JSON.stringify({id:e,field:n,value:r})});if(!i)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return s&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:a.message,type:"success"}),!0}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});Q(this,"delete",async e=>{try{const{status:n,result:r}=await B.Fetch(`/api/${this.path}/${e}`,{method:"DELETE"});if(!n)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(n){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:n.message,type:"danger"}),!1}});this.controller=new AbortController}}class xr extends Sn{constructor(){super(...arguments);Q(this,"path","notifications")}}const Na=new xr,Ca=({id:t,name:e,message:n,description:r,created_at:s,link_to:i,creator:a,icon:c,APP_DOMAIN:l})=>{const f=async()=>{await Na.boolean({id:t,field:"seen",value:!0},!1)&&(location.href=`${i}#${t}`)};return o.jsx(o.Fragment,{children:o.jsxs("div",{style:{cursor:"pointer"},className:"dropdown-item notify-item",onClick:f,children:[o.jsx("div",{className:`notify-icon ${a?"":"bg-primary"}`,children:a?o.jsxs("div",{className:"position-relative",children:[o.jsx("img",{src:`//${l}/api/profile/${a.relative_id}`,onError:d=>{d.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"img-fluid rounded-circle",alt:a.fullname}),o.jsx("span",{className:"position-absolute top-100 translate-middle badge rounded-pill bg-success text-sm",children:o.jsx("small",{className:c})})]}):o.jsx("i",{className:c})}),o.jsx("p",{className:"notify-details mb-0",style:{paddingLeft:"8px"},children:e}),o.jsx("p",{className:"text-muted mb-1 user-msg",style:{paddingLeft:"8px"},children:n}),r&&o.jsx("p",{className:"notify-details mb-1 border py-1 px-2",style:{borderRadius:"4px",textWrap:"wrap",maxHeight:"48px",overflow:"hidden",lineClamp:2,textOverflow:"ellipsis",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical"},children:o.jsx("small",{children:r})}),o.jsx("p",{className:"text-muted mb-0 user-msg",children:o.jsx("small",{children:moment(s).format("LLL")})})]})})},et=Object.create(null);et.open="0";et.close="1";et.ping="2";et.pong="3";et.message="4";et.upgrade="5";et.noop="6";const un=Object.create(null);Object.keys(et).forEach(t=>{un[et[t]]=t});const er={type:"error",data:"parser error"},Hs=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ws=typeof ArrayBuffer=="function",Xs=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,wr=({type:t,data:e},n,r)=>Hs&&e instanceof Blob?n?r(e):Kr(e,r):Ws&&(e instanceof ArrayBuffer||Xs(e))?n?r(e):Kr(new Blob([e]),r):r(et[t]+(e||"")),Kr=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Jr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let $n;function ja(t,e){if(Hs&&t.data instanceof Blob)return t.data.arrayBuffer().then(Jr).then(e);if(Ws&&(t.data instanceof ArrayBuffer||Xs(t.data)))return e(Jr(t.data));wr(t,!1,n=>{$n||($n=new TextEncoder),e($n.encode(n))})}const Gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Gr.length;t++)Mt[Gr.charCodeAt(t)]=t;const ka=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,c,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),d=new Uint8Array(f);for(r=0;r<n;r+=4)i=Mt[t.charCodeAt(r)],a=Mt[t.charCodeAt(r+1)],c=Mt[t.charCodeAt(r+2)],l=Mt[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|c>>2,d[s++]=(c&3)<<6|l&63;return f},Oa=typeof ArrayBuffer=="function",Er=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ys(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Sa(t.substring(1),e)}:un[n]?t.length>1?{type:un[n],data:t.substring(1)}:{type:un[n]}:er},Sa=(t,e)=>{if(Oa){const n=ka(t);return Ys(n,e)}else return{base64:!0,data:t}},Ys=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Ks="",Ra=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{wr(i,!1,c=>{r[a]=c,++s===n&&e(r.join(Ks))})})},Aa=(t,e)=>{const n=t.split(Ks),r=[];for(let s=0;s<n.length;s++){const i=Er(n[s],e);if(r.push(i),i.type==="error")break}return r};function Ta(){return new TransformStream({transform(t,e){ja(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let Fn;function on(t){return t.reduce((e,n)=>e+n.length,0)}function an(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Da(t,e){Fn||(Fn=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,c){for(n.push(a);;){if(r===0){if(on(n)<1)break;const l=an(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(on(n)<2)break;const l=an(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(on(n)<8)break;const l=an(n,8),f=new DataView(l.buffer,l.byteOffset,l.length),d=f.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(er);break}s=d*Math.pow(2,32)+f.getUint32(4),r=3}else{if(on(n)<s)break;const l=an(n,s);c.enqueue(Er(i?l:Fn.decode(l),e)),r=0}if(s===0||s>t){c.enqueue(er);break}}}})}const Js=4;function ee(t){if(t)return _a(t)}function _a(t){for(var e in ee.prototype)t[e]=ee.prototype[e];return t}ee.prototype.on=ee.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ee.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ee.prototype.off=ee.prototype.removeListener=ee.prototype.removeAllListeners=ee.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ee.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};ee.prototype.emitReserved=ee.prototype.emit;ee.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ee.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Rn=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),_e=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),La="arraybuffer";function Gs(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Ba=_e.setTimeout,Ma=_e.clearTimeout;function An(t,e){e.useNativeTimers?(t.setTimeoutFn=Ba.bind(_e),t.clearTimeoutFn=Ma.bind(_e)):(t.setTimeoutFn=_e.setTimeout.bind(_e),t.clearTimeoutFn=_e.clearTimeout.bind(_e))}const Pa=1.33;function Ia(t){return typeof t=="string"?$a(t):Math.ceil((t.byteLength||t.size)*Pa)}function $a(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Qs(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Fa(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Ua(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class qa extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Nr extends ee{constructor(e){super(),this.writable=!1,An(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new qa(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Er(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Fa(e);return n.length?"?"+n:""}}class Va extends Nr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Aa(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ra(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Qs()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Zs=!1;try{Zs=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const za=Zs;function Ha(){}class Wa extends Va{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Ge extends ee{constructor(e,n,r){super(),this.createRequest=e,An(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Gs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ge.requestsCount++,Ge.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ha,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ge.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ge.requestsCount=0;Ge.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Qr);else if(typeof addEventListener=="function"){const t="onpagehide"in _e?"pagehide":"unload";addEventListener(t,Qr,!1)}}function Qr(){for(let t in Ge.requests)Ge.requests.hasOwnProperty(t)&&Ge.requests[t].abort()}const Xa=function(){const t=ei({xdomain:!1});return t&&t.responseType!==null}();class Ya extends Wa{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Xa&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ge(ei,this.uri(),e)}}function ei(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||za))return new XMLHttpRequest}catch{}if(!e)try{return new _e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ti=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ka extends Nr{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=ti?{}:Gs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;wr(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Rn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Qs()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Un=_e.WebSocket||_e.MozWebSocket;class Ja extends Ka{createSocket(e,n,r){return ti?new Un(e,n,r):n?new Un(e,n):new Un(e)}doWrite(e,n){this.ws.send(n)}}class Ga extends Nr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Da(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=Ta();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Rn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Qa={websocket:Ja,webtransport:Ga,polling:Ya},Za=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ec=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tr(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Za.exec(t||""),i={},a=14;for(;a--;)i[ec[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=tc(i,i.path),i.queryKey=nc(i,i.query),i}function tc(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nc(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const nr=typeof addEventListener=="function"&&typeof removeEventListener=="function",fn=[];nr&&addEventListener("offline",()=>{fn.forEach(t=>t())},!1);class ut extends ee{constructor(e,n){if(super(),this.binaryType=La,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=tr(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=tr(n.host).host);An(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ua(this.opts.query)),nr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Js,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ut.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ut.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Ia(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Rn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ut.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),nr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=fn.indexOf(this._offlineEventListener);r!==-1&&fn.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ut.protocol=Js;class rc extends ut{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ut.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ut.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=n.name,this.emitReserved("upgradeError",b)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const a=h=>{const b=new Error("probe error: "+h);b.transport=n.name,i(),this.emitReserved("upgradeError",b)};function c(){a("transport closed")}function l(){a("socket closed")}function f(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",c),this.off("close",l),this.off("upgrading",f)};n.once("open",s),n.once("error",a),n.once("close",c),this.once("close",l),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let sc=class extends rc{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Qa[s]).filter(s=>!!s)),super(e,r)}};function ic(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=tr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const oc=typeof ArrayBuffer=="function",ac=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,ni=Object.prototype.toString,cc=typeof Blob=="function"||typeof Blob<"u"&&ni.call(Blob)==="[object BlobConstructor]",lc=typeof File=="function"||typeof File<"u"&&ni.call(File)==="[object FileConstructor]";function Cr(t){return oc&&(t instanceof ArrayBuffer||ac(t))||cc&&t instanceof Blob||lc&&t instanceof File}function hn(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(hn(t[n]))return!0;return!1}if(Cr(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return hn(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&hn(t[n]))return!0;return!1}function dc(t){const e=[],n=t.data,r=t;return r.data=rr(n,e),r.attachments=e.length,{packet:r,buffers:e}}function rr(t,e){if(!t)return t;if(Cr(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=rr(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=rr(t[r],e));return n}return t}function uc(t,e){return t.data=sr(t.data,e),delete t.attachments,t}function sr(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=sr(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=sr(t[n],e));return t}const fc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],hc=5;var H;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class pc{constructor(e){this.replacer=e}encode(e){return(e.type===H.EVENT||e.type===H.ACK)&&hn(e)?this.encodeAsBinary({type:e.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===H.BINARY_EVENT||e.type===H.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=dc(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Zr(t){return Object.prototype.toString.call(t)==="[object Object]"}class jr extends ee{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===H.BINARY_EVENT;r||n.type===H.BINARY_ACK?(n.type=r?H.EVENT:H.ACK,this.reconstructor=new mc(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Cr(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(H[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(jr.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case H.CONNECT:return Zr(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||Zr(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&fc.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=uc(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jr,Encoder:pc,get PacketType(){return H},protocol:hc},Symbol.toStringTag,{value:"Module"}));function Ve(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const vc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ri extends ee{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ve(e,"open",this.onopen.bind(this)),Ve(e,"packet",this.onpacket.bind(this)),Ve(e,"error",this.onerror.bind(this)),Ve(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(vc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:H.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),a.id=d}const c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},s),a=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,c)=>a?s(a):r(c);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case H.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(e);break;case H.ACK:case H.BINARY_ACK:this.onack(e);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:H.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function At(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}At.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};At.prototype.reset=function(){this.attempts=0};At.prototype.setMin=function(t){this.ms=t};At.prototype.setMax=function(t){this.max=t};At.prototype.setJitter=function(t){this.jitter=t};class ir extends ee{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,An(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new At({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||gc;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sc(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Ve(n,"open",function(){r.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=Ve(n,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ve(e,"ping",this.onping.bind(this)),Ve(e,"data",this.ondata.bind(this)),Ve(e,"error",this.onerror.bind(this)),Ve(e,"close",this.onclose.bind(this)),Ve(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Rn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new ri(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Lt={};function pn(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ic(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Lt[s]&&i in Lt[s].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return c?l=new ir(r,e):(Lt[s]||(Lt[s]=new ir(r,e)),l=Lt[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(pn,{Manager:ir,Socket:ri,io:pn,connect:pn});var Ee="top",Be="bottom",Me="right",Ne="left",kr="auto",Qt=[Ee,Be,Me,Ne],Nt="start",Xt="end",bc="clippingParents",si="viewport",Bt="popper",yc="reference",es=Qt.reduce(function(t,e){return t.concat([e+"-"+Nt,e+"-"+Xt])},[]),ii=[].concat(Qt,[kr]).reduce(function(t,e){return t.concat([e,e+"-"+Nt,e+"-"+Xt])},[]),xc="beforeRead",wc="read",Ec="afterRead",Nc="beforeMain",Cc="main",jc="afterMain",kc="beforeWrite",Oc="write",Sc="afterWrite",Rc=[xc,wc,Ec,Nc,Cc,jc,kc,Oc,Sc];function tt(t){return t?(t.nodeName||"").toLowerCase():null}function Oe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function vt(t){var e=Oe(t).Element;return t instanceof e||t instanceof Element}function Le(t){var e=Oe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Or(t){if(typeof ShadowRoot>"u")return!1;var e=Oe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ac(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Le(i)||!tt(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(a){var c=s[a];c===!1?i.removeAttribute(a):i.setAttribute(a,c===!0?"":c)}))})}function Tc(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=a.reduce(function(l,f){return l[f]="",l},{});!Le(s)||!tt(s)||(Object.assign(s.style,c),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const oi={name:"applyStyles",enabled:!0,phase:"write",fn:Ac,effect:Tc,requires:["computeStyles"]};function Qe(t){return t.split("-")[0]}var gt=Math.max,wn=Math.min,Ct=Math.round;function or(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ai(){return!/^((?!chrome|android).)*safari/i.test(or())}function jt(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Le(t)&&(s=t.offsetWidth>0&&Ct(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Ct(r.height)/t.offsetHeight||1);var a=vt(t)?Oe(t):window,c=a.visualViewport,l=!ai()&&n,f=(r.left+(l&&c?c.offsetLeft:0))/s,d=(r.top+(l&&c?c.offsetTop:0))/i,h=r.width/s,b=r.height/i;return{width:h,height:b,top:d,right:f+h,bottom:d+b,left:f,x:f,y:d}}function Sr(t){var e=jt(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ci(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Or(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function rt(t){return Oe(t).getComputedStyle(t)}function Dc(t){return["table","td","th"].indexOf(tt(t))>=0}function ft(t){return((vt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Tn(t){return tt(t)==="html"?t:t.assignedSlot||t.parentNode||(Or(t)?t.host:null)||ft(t)}function ts(t){return!Le(t)||rt(t).position==="fixed"?null:t.offsetParent}function _c(t){var e=/firefox/i.test(or()),n=/Trident/i.test(or());if(n&&Le(t)){var r=rt(t);if(r.position==="fixed")return null}var s=Tn(t);for(Or(s)&&(s=s.host);Le(s)&&["html","body"].indexOf(tt(s))<0;){var i=rt(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Zt(t){for(var e=Oe(t),n=ts(t);n&&Dc(n)&&rt(n).position==="static";)n=ts(n);return n&&(tt(n)==="html"||tt(n)==="body"&&rt(n).position==="static")?e:n||_c(t)||e}function Rr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ft(t,e,n){return gt(t,wn(e,n))}function Lc(t,e,n){var r=Ft(t,e,n);return r>n?n:r}function li(){return{top:0,right:0,bottom:0,left:0}}function di(t){return Object.assign({},li(),t)}function ui(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Bc=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,di(typeof e!="number"?e:ui(e,Qt))};function Mc(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,c=Qe(n.placement),l=Rr(c),f=[Ne,Me].indexOf(c)>=0,d=f?"height":"width";if(!(!i||!a)){var h=Bc(s.padding,n),b=Sr(i),g=l==="y"?Ee:Ne,N=l==="y"?Be:Me,m=n.rects.reference[d]+n.rects.reference[l]-a[l]-n.rects.popper[d],y=a[l]-n.rects.reference[l],C=Zt(i),j=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,w=m/2-y/2,u=h[g],E=j-b[d]-h[N],x=j/2-b[d]/2+w,k=Ft(u,x,E),S=l;n.modifiersData[r]=(e={},e[S]=k,e.centerOffset=k-x,e)}}function Pc(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||ci(e.elements.popper,s)&&(e.elements.arrow=s))}const Ic={name:"arrow",enabled:!0,phase:"main",fn:Mc,effect:Pc,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function kt(t){return t.split("-")[1]}var $c={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fc(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:Ct(n*s)/s||0,y:Ct(r*s)/s||0}}function ns(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,a=t.offsets,c=t.position,l=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,b=a.x,g=b===void 0?0:b,N=a.y,m=N===void 0?0:N,y=typeof d=="function"?d({x:g,y:m}):{x:g,y:m};g=y.x,m=y.y;var C=a.hasOwnProperty("x"),j=a.hasOwnProperty("y"),w=Ne,u=Ee,E=window;if(f){var x=Zt(n),k="clientHeight",S="clientWidth";if(x===Oe(n)&&(x=ft(n),rt(x).position!=="static"&&c==="absolute"&&(k="scrollHeight",S="scrollWidth")),x=x,s===Ee||(s===Ne||s===Me)&&i===Xt){u=Be;var A=h&&x===E&&E.visualViewport?E.visualViewport.height:x[k];m-=A-r.height,m*=l?1:-1}if(s===Ne||(s===Ee||s===Be)&&i===Xt){w=Me;var T=h&&x===E&&E.visualViewport?E.visualViewport.width:x[S];g-=T-r.width,g*=l?1:-1}}var D=Object.assign({position:c},f&&$c),P=d===!0?Fc({x:g,y:m},Oe(n)):{x:g,y:m};if(g=P.x,m=P.y,l){var I;return Object.assign({},D,(I={},I[u]=j?"0":"",I[w]=C?"0":"",I.transform=(E.devicePixelRatio||1)<=1?"translate("+g+"px, "+m+"px)":"translate3d("+g+"px, "+m+"px, 0)",I))}return Object.assign({},D,(e={},e[u]=j?m+"px":"",e[w]=C?g+"px":"",e.transform="",e))}function Uc(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,c=n.roundOffsets,l=c===void 0?!0:c,f={placement:Qe(e.placement),variation:kt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ns(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ns(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const qc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Uc,data:{}};var cn={passive:!0};function Vc(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,a=r.resize,c=a===void 0?!0:a,l=Oe(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&f.forEach(function(d){d.addEventListener("scroll",n.update,cn)}),c&&l.addEventListener("resize",n.update,cn),function(){i&&f.forEach(function(d){d.removeEventListener("scroll",n.update,cn)}),c&&l.removeEventListener("resize",n.update,cn)}}const zc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vc,data:{}};var Hc={left:"right",right:"left",bottom:"top",top:"bottom"};function mn(t){return t.replace(/left|right|bottom|top/g,function(e){return Hc[e]})}var Wc={start:"end",end:"start"};function rs(t){return t.replace(/start|end/g,function(e){return Wc[e]})}function Ar(t){var e=Oe(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Tr(t){return jt(ft(t)).left+Ar(t).scrollLeft}function Xc(t,e){var n=Oe(t),r=ft(t),s=n.visualViewport,i=r.clientWidth,a=r.clientHeight,c=0,l=0;if(s){i=s.width,a=s.height;var f=ai();(f||!f&&e==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:c+Tr(t),y:l}}function Yc(t){var e,n=ft(t),r=Ar(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=gt(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=gt(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+Tr(t),l=-r.scrollTop;return rt(s||n).direction==="rtl"&&(c+=gt(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:c,y:l}}function Dr(t){var e=rt(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function fi(t){return["html","body","#document"].indexOf(tt(t))>=0?t.ownerDocument.body:Le(t)&&Dr(t)?t:fi(Tn(t))}function Ut(t,e){var n;e===void 0&&(e=[]);var r=fi(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Oe(r),a=s?[i].concat(i.visualViewport||[],Dr(r)?r:[]):r,c=e.concat(a);return s?c:c.concat(Ut(Tn(a)))}function ar(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Kc(t,e){var n=jt(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ss(t,e,n){return e===si?ar(Xc(t,n)):vt(e)?Kc(e,n):ar(Yc(ft(t)))}function Jc(t){var e=Ut(Tn(t)),n=["absolute","fixed"].indexOf(rt(t).position)>=0,r=n&&Le(t)?Zt(t):t;return vt(r)?e.filter(function(s){return vt(s)&&ci(s,r)&&tt(s)!=="body"}):[]}function Gc(t,e,n,r){var s=e==="clippingParents"?Jc(t):[].concat(e),i=[].concat(s,[n]),a=i[0],c=i.reduce(function(l,f){var d=ss(t,f,r);return l.top=gt(d.top,l.top),l.right=wn(d.right,l.right),l.bottom=wn(d.bottom,l.bottom),l.left=gt(d.left,l.left),l},ss(t,a,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function hi(t){var e=t.reference,n=t.element,r=t.placement,s=r?Qe(r):null,i=r?kt(r):null,a=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,l;switch(s){case Ee:l={x:a,y:e.y-n.height};break;case Be:l={x:a,y:e.y+e.height};break;case Me:l={x:e.x+e.width,y:c};break;case Ne:l={x:e.x-n.width,y:c};break;default:l={x:e.x,y:e.y}}var f=s?Rr(s):null;if(f!=null){var d=f==="y"?"height":"width";switch(i){case Nt:l[f]=l[f]-(e[d]/2-n[d]/2);break;case Xt:l[f]=l[f]+(e[d]/2-n[d]/2);break}}return l}function Yt(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,a=i===void 0?t.strategy:i,c=n.boundary,l=c===void 0?bc:c,f=n.rootBoundary,d=f===void 0?si:f,h=n.elementContext,b=h===void 0?Bt:h,g=n.altBoundary,N=g===void 0?!1:g,m=n.padding,y=m===void 0?0:m,C=di(typeof y!="number"?y:ui(y,Qt)),j=b===Bt?yc:Bt,w=t.rects.popper,u=t.elements[N?j:b],E=Gc(vt(u)?u:u.contextElement||ft(t.elements.popper),l,d,a),x=jt(t.elements.reference),k=hi({reference:x,element:w,placement:s}),S=ar(Object.assign({},w,k)),A=b===Bt?S:x,T={top:E.top-A.top+C.top,bottom:A.bottom-E.bottom+C.bottom,left:E.left-A.left+C.left,right:A.right-E.right+C.right},D=t.modifiersData.offset;if(b===Bt&&D){var P=D[s];Object.keys(T).forEach(function(I){var F=[Me,Be].indexOf(I)>=0?1:-1,_=[Ee,Be].indexOf(I)>=0?"y":"x";T[I]+=P[_]*F})}return T}function Qc(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,c=n.flipVariations,l=n.allowedAutoPlacements,f=l===void 0?ii:l,d=kt(r),h=d?c?es:es.filter(function(N){return kt(N)===d}):Qt,b=h.filter(function(N){return f.indexOf(N)>=0});b.length===0&&(b=h);var g=b.reduce(function(N,m){return N[m]=Yt(t,{placement:m,boundary:s,rootBoundary:i,padding:a})[Qe(m)],N},{});return Object.keys(g).sort(function(N,m){return g[N]-g[m]})}function Zc(t){if(Qe(t)===kr)return[];var e=mn(t);return[rs(t),e,rs(e)]}function el(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,c=a===void 0?!0:a,l=n.fallbackPlacements,f=n.padding,d=n.boundary,h=n.rootBoundary,b=n.altBoundary,g=n.flipVariations,N=g===void 0?!0:g,m=n.allowedAutoPlacements,y=e.options.placement,C=Qe(y),j=C===y,w=l||(j||!N?[mn(y)]:Zc(y)),u=[y].concat(w).reduce(function(ce,le){return ce.concat(Qe(le)===kr?Qc(e,{placement:le,boundary:d,rootBoundary:h,padding:f,flipVariations:N,allowedAutoPlacements:m}):le)},[]),E=e.rects.reference,x=e.rects.popper,k=new Map,S=!0,A=u[0],T=0;T<u.length;T++){var D=u[T],P=Qe(D),I=kt(D)===Nt,F=[Ee,Be].indexOf(P)>=0,_=F?"width":"height",V=Yt(e,{placement:D,boundary:d,rootBoundary:h,altBoundary:b,padding:f}),O=F?I?Me:Ne:I?Be:Ee;E[_]>x[_]&&(O=mn(O));var M=mn(O),W=[];if(i&&W.push(V[P]<=0),c&&W.push(V[O]<=0,V[M]<=0),W.every(function(ce){return ce})){A=D,S=!1;break}k.set(D,W)}if(S)for(var Y=N?3:1,ae=function(le){var J=u.find(function(Pe){var se=k.get(Pe);if(se)return se.slice(0,le).every(function(pe){return pe})});if(J)return A=J,"break"},X=Y;X>0;X--){var Z=ae(X);if(Z==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}const tl={name:"flip",enabled:!0,phase:"main",fn:el,requiresIfExists:["offset"],data:{_skip:!1}};function is(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function os(t){return[Ee,Me,Be,Ne].some(function(e){return t[e]>=0})}function nl(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,a=Yt(e,{elementContext:"reference"}),c=Yt(e,{altBoundary:!0}),l=is(a,r),f=is(c,s,i),d=os(l),h=os(f);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const rl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nl};function sl(t,e,n){var r=Qe(t),s=[Ne,Ee].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],c=i[1];return a=a||0,c=(c||0)*s,[Ne,Me].indexOf(r)>=0?{x:c,y:a}:{x:a,y:c}}function il(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,a=ii.reduce(function(d,h){return d[h]=sl(h,e.rects,i),d},{}),c=a[e.placement],l=c.x,f=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=a}const ol={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:il};function al(t){var e=t.state,n=t.name;e.modifiersData[n]=hi({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const cl={name:"popperOffsets",enabled:!0,phase:"read",fn:al,data:{}};function ll(t){return t==="x"?"y":"x"}function dl(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,c=a===void 0?!1:a,l=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.padding,b=n.tether,g=b===void 0?!0:b,N=n.tetherOffset,m=N===void 0?0:N,y=Yt(e,{boundary:l,rootBoundary:f,padding:h,altBoundary:d}),C=Qe(e.placement),j=kt(e.placement),w=!j,u=Rr(C),E=ll(u),x=e.modifiersData.popperOffsets,k=e.rects.reference,S=e.rects.popper,A=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,T=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(x){if(i){var I,F=u==="y"?Ee:Ne,_=u==="y"?Be:Me,V=u==="y"?"height":"width",O=x[u],M=O+y[F],W=O-y[_],Y=g?-S[V]/2:0,ae=j===Nt?k[V]:S[V],X=j===Nt?-S[V]:-k[V],Z=e.elements.arrow,ce=g&&Z?Sr(Z):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:li(),J=le[F],Pe=le[_],se=Ft(0,k[V],ce[V]),pe=w?k[V]/2-Y-se-J-T.mainAxis:ae-se-J-T.mainAxis,U=w?-k[V]/2+Y+se+Pe+T.mainAxis:X+se+Pe+T.mainAxis,Se=e.elements.arrow&&Zt(e.elements.arrow),me=Se?u==="y"?Se.clientTop||0:Se.clientLeft||0:0,Re=(I=D==null?void 0:D[u])!=null?I:0,be=O+pe-Re-me,Ie=O+U-Re,Ae=Ft(g?wn(M,be):M,O,g?gt(W,Ie):W);x[u]=Ae,P[u]=Ae-O}if(c){var st,ht=u==="x"?Ee:Ne,it=u==="x"?Be:Me,ie=x[E],je=E==="y"?"height":"width",We=ie+y[ht],Xe=ie-y[it],ot=[Ee,Ne].indexOf(C)!==-1,bt=(st=D==null?void 0:D[E])!=null?st:0,yt=ot?We:ie-k[je]-S[je]-bt+T.altAxis,$e=ot?ie+k[je]+S[je]-bt-T.altAxis:Xe,Fe=g&&ot?Lc(yt,ie,$e):Ft(g?yt:We,ie,g?$e:Xe);x[E]=Fe,P[E]=Fe-ie}e.modifiersData[r]=P}}const ul={name:"preventOverflow",enabled:!0,phase:"main",fn:dl,requiresIfExists:["offset"]};function fl(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function hl(t){return t===Oe(t)||!Le(t)?Ar(t):fl(t)}function pl(t){var e=t.getBoundingClientRect(),n=Ct(e.width)/t.offsetWidth||1,r=Ct(e.height)/t.offsetHeight||1;return n!==1||r!==1}function ml(t,e,n){n===void 0&&(n=!1);var r=Le(e),s=Le(e)&&pl(e),i=ft(e),a=jt(t,s,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((tt(e)!=="body"||Dr(i))&&(c=hl(e)),Le(e)?(l=jt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Tr(i))),{x:a.left+c.scrollLeft-l.x,y:a.top+c.scrollTop-l.y,width:a.width,height:a.height}}function gl(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(c){if(!n.has(c)){var l=e.get(c);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function vl(t){var e=gl(t);return Rc.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function bl(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function yl(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var as={placement:"bottom",modifiers:[],strategy:"absolute"};function cs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xl(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?as:s;return function(c,l,f){f===void 0&&(f=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},as,i),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},h=[],b=!1,g={state:d,setOptions:function(C){var j=typeof C=="function"?C(d.options):C;m(),d.options=Object.assign({},i,d.options,j),d.scrollParents={reference:vt(c)?Ut(c):c.contextElement?Ut(c.contextElement):[],popper:Ut(l)};var w=vl(yl([].concat(r,d.options.modifiers)));return d.orderedModifiers=w.filter(function(u){return u.enabled}),N(),g.update()},forceUpdate:function(){if(!b){var C=d.elements,j=C.reference,w=C.popper;if(cs(j,w)){d.rects={reference:ml(j,Zt(w),d.options.strategy==="fixed"),popper:Sr(w)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(T){return d.modifiersData[T.name]=Object.assign({},T.data)});for(var u=0;u<d.orderedModifiers.length;u++){if(d.reset===!0){d.reset=!1,u=-1;continue}var E=d.orderedModifiers[u],x=E.fn,k=E.options,S=k===void 0?{}:k,A=E.name;typeof x=="function"&&(d=x({state:d,options:S,name:A,instance:g})||d)}}}},update:bl(function(){return new Promise(function(y){g.forceUpdate(),y(d)})}),destroy:function(){m(),b=!0}};if(!cs(c,l))return g;g.setOptions(f).then(function(y){!b&&f.onFirstUpdate&&f.onFirstUpdate(y)});function N(){d.orderedModifiers.forEach(function(y){var C=y.name,j=y.options,w=j===void 0?{}:j,u=y.effect;if(typeof u=="function"){var E=u({state:d,name:C,instance:g,options:w}),x=function(){};h.push(E||x)}})}function m(){h.forEach(function(y){return y()}),h=[]}return g}}var wl=[zc,cl,qc,oi,ol,tl,ul,Ic,rl],El=xl({defaultModifiers:wl}),Nl="tippy-box",pi="tippy-content",Cl="tippy-backdrop",mi="tippy-arrow",gi="tippy-svg-arrow",mt={passive:!0,capture:!0},vi=function(){return document.body};function qn(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function _r(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function bi(t,e){return typeof t=="function"?t.apply(void 0,e):t}function ls(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function jl(t){return t.split(/\s+/).filter(Boolean)}function xt(t){return[].concat(t)}function ds(t,e){t.indexOf(e)===-1&&t.push(e)}function kl(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ol(t){return t.split("-")[0]}function En(t){return[].slice.call(t)}function us(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function qt(){return document.createElement("div")}function Dn(t){return["Element","Fragment"].some(function(e){return _r(t,e)})}function Sl(t){return _r(t,"NodeList")}function Rl(t){return _r(t,"MouseEvent")}function Al(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Tl(t){return Dn(t)?[t]:Sl(t)?En(t):Array.isArray(t)?t:En(document.querySelectorAll(t))}function Vn(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function fs(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Dl(t){var e,n=xt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _l(t,e){var n=e.clientX,r=e.clientY;return t.every(function(s){var i=s.popperRect,a=s.popperState,c=s.props,l=c.interactiveBorder,f=Ol(a.placement),d=a.modifiersData.offset;if(!d)return!0;var h=f==="bottom"?d.top.y:0,b=f==="top"?d.bottom.y:0,g=f==="right"?d.left.x:0,N=f==="left"?d.right.x:0,m=i.top-r+h>l,y=r-i.bottom-b>l,C=i.left-n+g>l,j=n-i.right-N>l;return m||y||C||j})}function zn(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,n)})}function hs(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Je={isTouch:!1},ps=0;function Ll(){Je.isTouch||(Je.isTouch=!0,window.performance&&document.addEventListener("mousemove",yi))}function yi(){var t=performance.now();t-ps<20&&(Je.isTouch=!1,document.removeEventListener("mousemove",yi)),ps=t}function Bl(){var t=document.activeElement;if(Al(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ml(){document.addEventListener("touchstart",Ll,mt),window.addEventListener("blur",Bl)}var Pl=typeof window<"u"&&typeof document<"u",Il=Pl?!!window.msCrypto:!1,$l={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Fl={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ze=Object.assign({appendTo:vi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},$l,Fl),Ul=Object.keys(ze),ql=function(e){var n=Object.keys(e);n.forEach(function(r){ze[r]=e[r]})};function xi(t){var e=t.plugins||[],n=e.reduce(function(r,s){var i=s.name,a=s.defaultValue;if(i){var c;r[i]=t[i]!==void 0?t[i]:(c=ze[i])!=null?c:a}return r},{});return Object.assign({},t,n)}function Vl(t,e){var n=e?Object.keys(xi(Object.assign({},ze,{plugins:e}))):Ul,r=n.reduce(function(s,i){var a=(t.getAttribute("data-tippy-"+i)||"").trim();if(!a)return s;if(i==="content")s[i]=a;else try{s[i]=JSON.parse(a)}catch{s[i]=a}return s},{});return r}function ms(t,e){var n=Object.assign({},e,{content:bi(e.content,[t])},e.ignoreAttributes?{}:Vl(t,e.plugins));return n.aria=Object.assign({},ze.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var zl=function(){return"innerHTML"};function cr(t,e){t[zl()]=e}function gs(t){var e=qt();return t===!0?e.className=mi:(e.className=gi,Dn(t)?e.appendChild(t):cr(e,t)),e}function vs(t,e){Dn(e.content)?(cr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?cr(t,e.content):t.textContent=e.content)}function lr(t){var e=t.firstElementChild,n=En(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(pi)}),arrow:n.find(function(r){return r.classList.contains(mi)||r.classList.contains(gi)}),backdrop:n.find(function(r){return r.classList.contains(Cl)})}}function wi(t){var e=qt(),n=qt();n.className=Nl,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=qt();r.className=pi,r.setAttribute("data-state","hidden"),vs(r,t.props),e.appendChild(n),n.appendChild(r),s(t.props,t.props);function s(i,a){var c=lr(e),l=c.box,f=c.content,d=c.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(i.content!==a.content||i.allowHTML!==a.allowHTML)&&vs(f,t.props),a.arrow?d?i.arrow!==a.arrow&&(l.removeChild(d),l.appendChild(gs(a.arrow))):l.appendChild(gs(a.arrow)):d&&l.removeChild(d)}return{popper:e,onUpdate:s}}wi.$$tippy=!0;var Hl=1,ln=[],Hn=[];function Wl(t,e){var n=ms(t,Object.assign({},ze,xi(us(e)))),r,s,i,a=!1,c=!1,l=!1,f=!1,d,h,b,g=[],N=ls(be,n.interactiveDebounce),m,y=Hl++,C=null,j=kl(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},u={id:y,reference:t,popper:qt(),popperInstance:C,props:n,state:w,plugins:j,clearDelayTimeouts:yt,setProps:$e,setContent:Fe,show:pt,hide:tn,hideWithInteractivity:Ye,enable:ot,disable:bt,unmount:nn,destroy:_n};if(!n.render)return u;var E=n.render(u),x=E.popper,k=E.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+u.id,u.popper=x,t._tippy=u,x._tippy=u;var S=j.map(function(v){return v.fn(u)}),A=t.hasAttribute("aria-expanded");return Se(),Y(),O(),M("onCreate",[u]),n.showOnCreate&&We(),x.addEventListener("mouseenter",function(){u.props.interactive&&u.state.isVisible&&u.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){u.props.interactive&&u.props.trigger.indexOf("mouseenter")>=0&&F().addEventListener("mousemove",N)}),u;function T(){var v=u.props.touch;return Array.isArray(v)?v:[v,0]}function D(){return T()[0]==="hold"}function P(){var v;return!!((v=u.props.render)!=null&&v.$$tippy)}function I(){return m||t}function F(){var v=I().parentNode;return v?Dl(v):document}function _(){return lr(x)}function V(v){return u.state.isMounted&&!u.state.isVisible||Je.isTouch||d&&d.type==="focus"?0:qn(u.props.delay,v?0:1,ze.delay)}function O(v){v===void 0&&(v=!1),x.style.pointerEvents=u.props.interactive&&!v?"":"none",x.style.zIndex=""+u.props.zIndex}function M(v,R,L){if(L===void 0&&(L=!0),S.forEach(function(q){q[v]&&q[v].apply(q,R)}),L){var K;(K=u.props)[v].apply(K,R)}}function W(){var v=u.props.aria;if(v.content){var R="aria-"+v.content,L=x.id,K=xt(u.props.triggerTarget||t);K.forEach(function(q){var de=q.getAttribute(R);if(u.state.isVisible)q.setAttribute(R,de?de+" "+L:L);else{var ye=de&&de.replace(L,"").trim();ye?q.setAttribute(R,ye):q.removeAttribute(R)}})}}function Y(){if(!(A||!u.props.aria.expanded)){var v=xt(u.props.triggerTarget||t);v.forEach(function(R){u.props.interactive?R.setAttribute("aria-expanded",u.state.isVisible&&R===I()?"true":"false"):R.removeAttribute("aria-expanded")})}}function ae(){F().removeEventListener("mousemove",N),ln=ln.filter(function(v){return v!==N})}function X(v){if(!(Je.isTouch&&(l||v.type==="mousedown"))){var R=v.composedPath&&v.composedPath()[0]||v.target;if(!(u.props.interactive&&hs(x,R))){if(xt(u.props.triggerTarget||t).some(function(L){return hs(L,R)})){if(Je.isTouch||u.state.isVisible&&u.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[u,v]);u.props.hideOnClick===!0&&(u.clearDelayTimeouts(),u.hide(),c=!0,setTimeout(function(){c=!1}),u.state.isMounted||J())}}}function Z(){l=!0}function ce(){l=!1}function le(){var v=F();v.addEventListener("mousedown",X,!0),v.addEventListener("touchend",X,mt),v.addEventListener("touchstart",ce,mt),v.addEventListener("touchmove",Z,mt)}function J(){var v=F();v.removeEventListener("mousedown",X,!0),v.removeEventListener("touchend",X,mt),v.removeEventListener("touchstart",ce,mt),v.removeEventListener("touchmove",Z,mt)}function Pe(v,R){pe(v,function(){!u.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&R()})}function se(v,R){pe(v,R)}function pe(v,R){var L=_().box;function K(q){q.target===L&&(zn(L,"remove",K),R())}if(v===0)return R();zn(L,"remove",h),zn(L,"add",K),h=K}function U(v,R,L){L===void 0&&(L=!1);var K=xt(u.props.triggerTarget||t);K.forEach(function(q){q.addEventListener(v,R,L),g.push({node:q,eventType:v,handler:R,options:L})})}function Se(){D()&&(U("touchstart",Re,{passive:!0}),U("touchend",Ie,{passive:!0})),jl(u.props.trigger).forEach(function(v){if(v!=="manual")switch(U(v,Re),v){case"mouseenter":U("mouseleave",Ie);break;case"focus":U(Il?"focusout":"blur",Ae);break;case"focusin":U("focusout",Ae);break}})}function me(){g.forEach(function(v){var R=v.node,L=v.eventType,K=v.handler,q=v.options;R.removeEventListener(L,K,q)}),g=[]}function Re(v){var R,L=!1;if(!(!u.state.isEnabled||st(v)||c)){var K=((R=d)==null?void 0:R.type)==="focus";d=v,m=v.currentTarget,Y(),!u.state.isVisible&&Rl(v)&&ln.forEach(function(q){return q(v)}),v.type==="click"&&(u.props.trigger.indexOf("mouseenter")<0||a)&&u.props.hideOnClick!==!1&&u.state.isVisible?L=!0:We(v),v.type==="click"&&(a=!L),L&&!K&&Xe(v)}}function be(v){var R=v.target,L=I().contains(R)||x.contains(R);if(!(v.type==="mousemove"&&L)){var K=je().concat(x).map(function(q){var de,ye=q._tippy,at=(de=ye.popperInstance)==null?void 0:de.state;return at?{popperRect:q.getBoundingClientRect(),popperState:at,props:n}:null}).filter(Boolean);_l(K,v)&&(ae(),Xe(v))}}function Ie(v){var R=st(v)||u.props.trigger.indexOf("click")>=0&&a;if(!R){if(u.props.interactive){u.hideWithInteractivity(v);return}Xe(v)}}function Ae(v){u.props.trigger.indexOf("focusin")<0&&v.target!==I()||u.props.interactive&&v.relatedTarget&&x.contains(v.relatedTarget)||Xe(v)}function st(v){return Je.isTouch?D()!==v.type.indexOf("touch")>=0:!1}function ht(){it();var v=u.props,R=v.popperOptions,L=v.placement,K=v.offset,q=v.getReferenceClientRect,de=v.moveTransition,ye=P()?lr(x).arrow:null,at=q?{getBoundingClientRect:q,contextElement:q.contextElement||I()}:t,te={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ke){var ne=ke.state;if(P()){var ge=_(),xe=ge.box;["placement","reference-hidden","escaped"].forEach(function(Ue){Ue==="placement"?xe.setAttribute("data-placement",ne.placement):ne.attributes.popper["data-popper-"+Ue]?xe.setAttribute("data-"+Ue,""):xe.removeAttribute("data-"+Ue)}),ne.attributes.popper={}}}},G=[{name:"offset",options:{offset:K}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!de}},te];P()&&ye&&G.push({name:"arrow",options:{element:ye,padding:3}}),G.push.apply(G,(R==null?void 0:R.modifiers)||[]),u.popperInstance=El(at,x,Object.assign({},R,{placement:L,onFirstUpdate:b,modifiers:G}))}function it(){u.popperInstance&&(u.popperInstance.destroy(),u.popperInstance=null)}function ie(){var v=u.props.appendTo,R,L=I();u.props.interactive&&v===vi||v==="parent"?R=L.parentNode:R=bi(v,[L]),R.contains(x)||R.appendChild(x),u.state.isMounted=!0,ht()}function je(){return En(x.querySelectorAll("[data-tippy-root]"))}function We(v){u.clearDelayTimeouts(),v&&M("onTrigger",[u,v]),le();var R=V(!0),L=T(),K=L[0],q=L[1];Je.isTouch&&K==="hold"&&q&&(R=q),R?r=setTimeout(function(){u.show()},R):u.show()}function Xe(v){if(u.clearDelayTimeouts(),M("onUntrigger",[u,v]),!u.state.isVisible){J();return}if(!(u.props.trigger.indexOf("mouseenter")>=0&&u.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(v.type)>=0&&a)){var R=V(!1);R?s=setTimeout(function(){u.state.isVisible&&u.hide()},R):i=requestAnimationFrame(function(){u.hide()})}}function ot(){u.state.isEnabled=!0}function bt(){u.hide(),u.state.isEnabled=!1}function yt(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(i)}function $e(v){if(!u.state.isDestroyed){M("onBeforeUpdate",[u,v]),me();var R=u.props,L=ms(t,Object.assign({},R,us(v),{ignoreAttributes:!0}));u.props=L,Se(),R.interactiveDebounce!==L.interactiveDebounce&&(ae(),N=ls(be,L.interactiveDebounce)),R.triggerTarget&&!L.triggerTarget?xt(R.triggerTarget).forEach(function(K){K.removeAttribute("aria-expanded")}):L.triggerTarget&&t.removeAttribute("aria-expanded"),Y(),O(),k&&k(R,L),u.popperInstance&&(ht(),je().forEach(function(K){requestAnimationFrame(K._tippy.popperInstance.forceUpdate)})),M("onAfterUpdate",[u,v])}}function Fe(v){u.setProps({content:v})}function pt(){var v=u.state.isVisible,R=u.state.isDestroyed,L=!u.state.isEnabled,K=Je.isTouch&&!u.props.touch,q=qn(u.props.duration,0,ze.duration);if(!(v||R||L||K)&&!I().hasAttribute("disabled")&&(M("onShow",[u],!1),u.props.onShow(u)!==!1)){if(u.state.isVisible=!0,P()&&(x.style.visibility="visible"),O(),le(),u.state.isMounted||(x.style.transition="none"),P()){var de=_(),ye=de.box,at=de.content;Vn([ye,at],0)}b=function(){var G;if(!(!u.state.isVisible||f)){if(f=!0,x.offsetHeight,x.style.transition=u.props.moveTransition,P()&&u.props.animation){var ue=_(),ke=ue.box,ne=ue.content;Vn([ke,ne],q),fs([ke,ne],"visible")}W(),Y(),ds(Hn,u),(G=u.popperInstance)==null||G.forceUpdate(),M("onMount",[u]),u.props.animation&&P()&&se(q,function(){u.state.isShown=!0,M("onShown",[u])})}},ie()}}function tn(){var v=!u.state.isVisible,R=u.state.isDestroyed,L=!u.state.isEnabled,K=qn(u.props.duration,1,ze.duration);if(!(v||R||L)&&(M("onHide",[u],!1),u.props.onHide(u)!==!1)){if(u.state.isVisible=!1,u.state.isShown=!1,f=!1,a=!1,P()&&(x.style.visibility="hidden"),ae(),J(),O(!0),P()){var q=_(),de=q.box,ye=q.content;u.props.animation&&(Vn([de,ye],K),fs([de,ye],"hidden"))}W(),Y(),u.props.animation?P()&&Pe(K,u.unmount):u.unmount()}}function Ye(v){F().addEventListener("mousemove",N),ds(ln,N),N(v)}function nn(){u.state.isVisible&&u.hide(),u.state.isMounted&&(it(),je().forEach(function(v){v._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),Hn=Hn.filter(function(v){return v!==u}),u.state.isMounted=!1,M("onHidden",[u]))}function _n(){u.state.isDestroyed||(u.clearDelayTimeouts(),u.unmount(),me(),delete t._tippy,u.state.isDestroyed=!0,M("onDestroy",[u]))}}function en(t,e){e===void 0&&(e={});var n=ze.plugins.concat(e.plugins||[]);Ml();var r=Object.assign({},e,{plugins:n}),s=Tl(t),i=s.reduce(function(a,c){var l=c&&Wl(c,r);return l&&a.push(l),a},[]);return Dn(t)?i[0]:i}en.defaultProps=ze;en.setDefaultProps=ql;en.currentInput=Je;Object.assign({},oi,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});en.setDefaultProps({render:wi});function Ei(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var Ni=typeof window<"u"&&typeof document<"u";function dr(t,e){t&&(typeof t=="function"&&t(e),{}.hasOwnProperty.call(t,"current")&&(t.current=e))}function bs(){return Ni&&document.createElement("div")}function Xl(t){var e={"data-placement":t.placement};return t.referenceHidden&&(e["data-reference-hidden"]=""),t.escaped&&(e["data-escaped"]=""),e}function Ci(t,e){if(t===e)return!0;if(typeof t=="object"&&t!=null&&typeof e=="object"&&e!=null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(e.hasOwnProperty(n)){if(!Ci(t[n],e[n]))return!1}else return!1;return!0}else return!1}function Yl(t){var e=[];return t.forEach(function(n){e.find(function(r){return Ci(n,r)})||e.push(n)}),e}function Kl(t,e){var n,r;return Object.assign({},e,{popperOptions:Object.assign({},t.popperOptions,e.popperOptions,{modifiers:Yl([].concat(((n=t.popperOptions)==null?void 0:n.modifiers)||[],((r=e.popperOptions)==null?void 0:r.modifiers)||[]))})})}var Wn=Ni?p.useLayoutEffect:p.useEffect;function Jl(t){var e=p.useRef();return e.current||(e.current=typeof t=="function"?t():t),e.current}function ys(t,e,n){n.split(/\s+/).forEach(function(r){r&&t.classList[e](r)})}var Gl={name:"className",defaultValue:"",fn:function(e){var n=e.popper.firstElementChild,r=function(){var c;return!!((c=e.props.render)!=null&&c.$$tippy)};function s(){e.props.className&&!r()||ys(n,"add",e.props.className)}function i(){r()&&ys(n,"remove",e.props.className)}return{onCreate:s,onBeforeUpdate:i,onAfterUpdate:s}}};function Ql(t){function e(n){var r=n.children,s=n.content,i=n.visible,a=n.singleton,c=n.render,l=n.reference,f=n.disabled,d=f===void 0?!1:f,h=n.ignoreAttributes,b=h===void 0?!0:h;n.__source,n.__self;var g=Ei(n,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),N=i!==void 0,m=a!==void 0,y=p.useState(!1),C=y[0],j=y[1],w=p.useState({}),u=w[0],E=w[1],x=p.useState(),k=x[0],S=x[1],A=Jl(function(){return{container:bs(),renders:1}}),T=Object.assign({ignoreAttributes:b},g,{content:A.container});N&&(T.trigger="manual",T.hideOnClick=!1),m&&(d=!0);var D=T,P=T.plugins||[];c&&(D=Object.assign({},T,{plugins:m&&a.data!=null?[].concat(P,[{fn:function(){return{onTrigger:function(V,O){var M=a.data.children.find(function(W){var Y=W.instance;return Y.reference===O.currentTarget});V.state.$$activeSingletonInstance=M.instance,S(M.content)}}}}]):P,render:function(){return{popper:A.container}}}));var I=[l].concat(r?[r.type]:[]);return Wn(function(){var F=l;l&&l.hasOwnProperty("current")&&(F=l.current);var _=t(F||A.ref||bs(),Object.assign({},D,{plugins:[Gl].concat(T.plugins||[])}));return A.instance=_,d&&_.disable(),i&&_.show(),m&&a.hook({instance:_,content:s,props:D,setSingletonContent:S}),j(!0),function(){_.destroy(),a==null||a.cleanup(_)}},I),Wn(function(){var F;if(A.renders===1){A.renders++;return}var _=A.instance;_.setProps(Kl(_.props,D)),(F=_.popperInstance)==null||F.forceUpdate(),d?_.disable():_.enable(),N&&(i?_.show():_.hide()),m&&a.hook({instance:_,content:s,props:D,setSingletonContent:S})}),Wn(function(){var F;if(c){var _=A.instance;_.setProps({popperOptions:Object.assign({},_.props.popperOptions,{modifiers:[].concat((((F=_.props.popperOptions)==null?void 0:F.modifiers)||[]).filter(function(V){var O=V.name;return O!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(O){var M,W=O.state,Y=(M=W.modifiersData)==null?void 0:M.hide;(u.placement!==W.placement||u.referenceHidden!==(Y==null?void 0:Y.isReferenceHidden)||u.escaped!==(Y==null?void 0:Y.hasPopperEscaped))&&E({placement:W.placement,referenceHidden:Y==null?void 0:Y.isReferenceHidden,escaped:Y==null?void 0:Y.hasPopperEscaped}),W.attributes.popper={}}}])})})}},[u.placement,u.referenceHidden,u.escaped].concat(I)),he.createElement(he.Fragment,null,r?p.cloneElement(r,{ref:function(_){A.ref=_,dr(r.ref,_)}}):null,C&&wt.createPortal(c?c(Xl(u),k,A.instance):s,A.container))}return e}var Zl=function(t,e){return p.forwardRef(function(r,s){var i=r.children,a=Ei(r,["children"]);return he.createElement(t,Object.assign({},e,a),i?p.cloneElement(i,{ref:function(l){dr(s,l),dr(i.ref,l)}}):null)})},Nn=Zl(Ql(en));class ed extends Sn{constructor(){super(...arguments);Q(this,"path","atalaya/users-by-services-by-business");Q(this,"authorize",async n=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}/authorize`,{method:"POST",body:JSON.stringify(n)});if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error al abrir el servicio");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(r){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),!1}})}}const td=we.APP_CORRELATIVE,ji=we.EVENTS_URL;console.log("Evento url:",ji);const qe=pn(`${ji}/${td}`,{autoConnect:!1}),nd=new Audio("/assets/sounds/notification.wav"),Lr=(t={})=>{const[e,n]=p.useState(!1),[r,s]=p.useState(0),i={environment:we.APP_ENV,business_id:gn.business_id,user_id:gn.service_user.id},a=async()=>{const c=new xr,{totalCount:l,status:f}=await c.paginate({requireTotalCount:!0,requireData:!1});f==200&&s(l)};return p.useEffect(()=>(qe.connected||qe.connect(),console.log("Conectando a socket..."),qe.on("connect",()=>{qe.emit("register_filters",{...i,...t})}),qe.on("filters_registered",({service:c,filters:l})=>{n(!0)}),qe.on("notification",c=>{if(Ai(c,{icon:o.jsx("i",{className:"mdi mdi-bell"})}),a(),!document.hasFocus()){const l=new BroadcastChannel("focus-check");l.postMessage("check-focus"),l.onmessage=f=>{f.data},setTimeout(()=>{nd.play(),l.close()},100)}}),qe.on("error",c=>{console.error(" Error:",c)}),qe.on("disconnect",()=>n(!1)),()=>{console.log("Apagando eventos socket")}),[null]),p.useEffect(()=>{qe.connected&&qe.emit("update_filters",{...i,...t})},[JSON.stringify({...i,...t})]),{wsActive:e,socket:qe,notificationsCount:r}},Xn=({title:t,icon:e,children:n})=>{var a;const r=[];Array.isArray(n)?n.forEach(c=>{var l;return r.push((l=c==null?void 0:c.props)==null?void 0:l.href)}):r.push((a=n==null?void 0:n.props)==null?void 0:a.href);const s=r.filter(Boolean).some(c=>location.pathname.includes(c)),i=`item-${crypto.randomUUID()}`;return o.jsxs("li",{children:[o.jsxs("a",{href:`#${i}`,"data-bs-toggle":"collapse","aria-expanded":s,children:[o.jsx("i",{className:`${e} mdi-18px`}),o.jsxs("span",{style:{fontSize:"16px"},children:[" ",t," "]}),o.jsx("span",{className:"menu-arrow"})]}),o.jsx("div",{className:`collapse ${s&&"show"}`,id:i,children:o.jsx("ul",{className:"nav-second-level",children:n})})]})},ve=({id:t,className:e="",href:n,icon:r,children:s,badge:i,pinned:a,setPinned:c,pinLabel:l})=>{const[f,d]=p.useState(!1),h=p.useRef(null),b=m=>{m.preventDefault(),d(!0)},g=()=>{const m=a.some(y=>y.href===n);c(m?y=>y.filter(C=>C.href!==n):y=>[...y,{icon:r,href:n,name:l??s}]),d(!1)};p.useEffect(()=>{const m=y=>{h.current&&!h.current.contains(y.target)&&d(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const N=a.some(m=>m.href===n);return o.jsxs("li",{ref:h,className:`${location.pathname==n?"menuitem-active":""} ${e}`,onContextMenu:b,style:{position:"relative"},children:[o.jsxs("a",{id:t,href:n,className:location.pathname==n?"active":"",children:[o.jsx("i",{className:`${r} mdi-18px`}),i&&o.jsx("span",{className:"badge bg-info float-end text-truncate",children:i}),o.jsxs("span",{style:{fontSize:"16px"},children:[" ",s," "]})]}),f&&o.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:20,zIndex:1e3,display:"block",float:"left",minWidth:"8rem",padding:"0.125rem 0",margin:"0.125rem 0 0",fontSize:"1rem",color:"#212529",textAlign:"left",listStyle:"none",backgroundColor:"#fff",backgroundClip:"padding-box",border:"1px solid rgba(0,0,0,.15)",borderRadius:"0.25rem"},children:o.jsxs("button",{className:"dropdown-item",onClick:g,children:[o.jsx("i",{className:`mdi ${N?"mdi-pin-off":"mdi-pin"} me-1`}),N?"Desfijar":"Fijar"]})})]})},xs=new xr,rd=new ed;new Audio("/assets/sounds/notification.wav");const sd=({can:t,session:e={},services:n,theme:r,setTheme:s,title:i="",wsActive:a,setWsActive:c,whatsappStatus:l,businesses:f,APP_PROTOCOL:d,APP_DOMAIN:h})=>{const{color:b}=zs[l],[g,N]=p.useState([]),{notificationsCount:m}=Lr();f.filter(({id:w})=>e.business_id!=w);const y=async()=>{if(!$("#notifications").is(":visible"))return;const{data:u,totalCount:E}=await xs.paginate({requireTotalCount:!0});N(u??[])},C=async()=>{await xs.boolean({field:"seen",value:!0},!1),N([])},j=async({correlative:w,i_work:u,status:E})=>{if(!E)return;if(!u){location.href=`${d}://${h}/businesses`;return}await rd.authorize({service:w})&&(location.href=`${d}://${w}.${h}/home`)};return p.useEffect(()=>($(document).on("change","#light-mode-check",w=>{s(w.target.checked?"dark":"light")}),()=>{$(document).off("change","#light-mode-check")}),[r]),p.useEffect(()=>{m>0?document.title=`(${m}) ${i} | Atalaya`:document.title=`${i} | Atalaya`},[m]),p.useEffect(()=>{},[null]),o.jsxs("div",{className:`navbar-custom border-bottom ${r=="light"?"bg-white":""}`,style:{backgroundColor:r=="light"?void 0:"#313844"},children:[o.jsxs("ul",{className:"list-unstyled topnav-menu float-end mb-0",children:[o.jsx("li",{className:"dropdown notification-list d-none d-lg-block",children:o.jsx("div",{className:"nav-link",children:o.jsx("label",{htmlFor:"light-mode-check",type:"button",className:`btn btn-xs ${r=="dark","btn-secondary"} rounded-pill waves-effect waves-light`,children:r=="dark"?o.jsxs(o.Fragment,{children:["Light",o.jsx("span",{className:"btn-label-right ms-1",style:{paddingLeft:"6px"},children:o.jsx("i",{className:"mdi mdi-weather-sunny"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"btn-label me-1",style:{paddingRight:"6px"},children:o.jsx("i",{className:"mdi mdi-moon-waning-crescent"})}),"Dark"]})})})}),t("whatsapp","root","all")&&o.jsx("li",{className:"notification-list topbar-dropdown d-none d-lg-block",children:o.jsx("a",{className:"nav-link waves-effect waves-light","data-bs-toggle":"modal","data-bs-target":"#whatsapp-modal",children:o.jsxs("span",{className:"position-relative",children:[o.jsx("i",{className:"mdi mdi-whatsapp noti-icon"}),o.jsx("span",{className:`position-absolute top-0 start-100 translate-middle p-1 bg-${b} rounded-circle`,children:o.jsx("span",{className:"visually-hidden",children:"New alerts"})})]})})}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsxs("a",{className:"nav-link dropdown-toggle waves-effect waves-light driver-js-notifications","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",onClick:y,children:[o.jsx("i",{className:`fe-bell noti-icon rounded-pill ${m>0&&"pulse"}`}),m>0?o.jsx("span",{className:"badge bg-danger rounded-circle noti-icon-badge",children:m}):""]}),o.jsxs("div",{id:"notifications",className:"dropdown-menu dropdown-menu-end dropdown-lg",children:[o.jsx("div",{className:"dropdown-item noti-title",children:o.jsxs("h5",{className:"m-0",children:[m>0&&o.jsx("span",{className:"float-end",children:o.jsx(Nn,{content:"Marcar todo como leido",children:o.jsxs("span",{className:"link text-dark",style:{cursor:"pointer"},onClick:C,children:[o.jsx("i",{className:"mdi mdi-check-all me-1"}),o.jsx("small",{children:"Ledo"})]})})}),"Notificaciones"]})}),o.jsx("div",{className:"noti-scroll",style:{maxHeight:"230px",overflowY:"auto"},children:g.length>0?g.map((w,u)=>o.jsx(Ca,{...w,APP_DOMAIN:h},`notification-${u}`)):o.jsx("div",{className:"text-center",style:{overflow:"hidden",padding:"0px 20px"},children:o.jsx("span",{className:"text-muted",children:"No tienes notificaciones nuevas"})})})]})]}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsx("a",{className:"nav-link dropdown-toggle waves-effect waves-light","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",children:o.jsx("i",{className:"fe-grid noti-icon"})}),o.jsxs("div",{className:"dropdown-menu dropdown-menu-end dropdown-lg",children:[o.jsx("div",{className:"dropdown-header noti-title pb-0",children:o.jsx("h5",{className:"m-0",children:"Aplicaciones"})}),o.jsxs("div",{className:"row g-0 gy-2 px-2 py-2",children:[o.jsx("div",{className:"col-4 text-center",children:o.jsxs("button",{onClick:()=>window.location.href=`//${h}/account`,className:"d-block btn-ligth bg-white rounded waves-effect p-1 pt-2 border-0 w-100",title:"Mi cuenta","data-bs-toggle":"tooltip","data-bs-placement":"bottom",children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${e.relative_id}`,onError:w=>{w.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},alt:"Mi cuenta",className:"mb-1 rounded-circle",style:{width:"40px",height:"40px"}}),o.jsx("div",{className:"small fw-semibold",children:"Mi cuenta"})]})}),n.map((w,u)=>o.jsx("div",{className:"col-4 text-center",children:o.jsxs("button",{disabled:!w.status||!w.i_work,onClick:()=>j(w),className:"d-block btn-ligth bg-white rounded waves-effect p-1 pt-2 border-0 w-100",style:{cursor:w.status&&w.i_work?"pointer":"not-allowed"},title:w.description,children:[o.jsxs("div",{className:"position-relative d-inline-block mb-1",children:[o.jsx("img",{src:`//${w.correlative}.${we.APP_DOMAIN}/assets/img/icon.svg`,onError:E=>E.target.src=`//${h}/assets/img/icon.svg`,alt:w.name,style:{width:"40px",height:"40px",objectFit:"contain",objectPosition:"center",opacity:w.status&&w.i_work?1:.75}}),!w.status&&o.jsx("span",{className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-danger",style:{fontSize:"8px"},children:"Proximamente"}),w.status&&!w.i_work&&o.jsx("span",{className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"8px"},children:"Por activar"})]}),o.jsx("div",{className:"small fw-semibold text-truncate",children:w.name})]})},u))]})]})]}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsxs("a",{className:"nav-link dropdown-toggle nav-user me-0 waves-effect waves-light driver-js-account","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",children:[o.jsxs("div",{className:"d-inline-block position-relative",style:{height:"max-content"},children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${e.relative_id}`,alt:"user-image",onError:w=>{w.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"rounded-circle",style:{objectFit:"cover",objectPosition:"center"}}),o.jsx("span",{className:`d-block ${a?"bg-success":"bg-danger"} position-absolute rounded-circle`,style:{width:"8px",height:"8px",bottom:"16px",right:"0px"}})]}),o.jsxs("span",{className:"pro-user-name ms-1",children:[e.name.split(" ")[0]," ",e.lastname.split(" ")[0],o.jsx("i",{className:"mdi mdi-chevron-down"})]})]}),o.jsxs("div",{className:"dropdown-menu dropdown-menu-end profile-dropdown driver-js-account-dropdown ",onClick:w=>w.stopPropagation(),children:[o.jsx("div",{className:"dropdown-header noti-title",children:o.jsx("h6",{className:"text-overflow m-0",children:"Bienvenido !"})}),o.jsxs("a",{href:`//${h}/profile`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"fe-user"}),o.jsx("span",{children:"Mi perfil"})]}),o.jsxs("a",{href:`//${h}/account`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-account-key-outline"}),o.jsx("span",{children:"Mi cuenta"})]}),o.jsx("div",{className:"dropdown-divider"}),(t("users","root","all","list")||t("roles","root","all","list")||t("permissions","root","all","list"))&&o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"#users-roles",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"users-roles",children:[o.jsx("i",{className:"mdi mdi-account-lock me-1"}),o.jsx("span",{children:"Usuarios y roles"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"users-roles",children:[t("users","root","all","list")&&o.jsxs("a",{href:"/users",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-account me-1"}),o.jsx("span",{children:"Usuarios"})]}),t("roles","root","all","list")&&o.jsxs("a",{href:"/roles",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-account-convert me-1"}),o.jsx("span",{children:"Roles"})]})]})]}),o.jsxs("a",{href:"/default-messages",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-message-bulleted me-1"}),o.jsx("span",{children:"Mensajes predeter..."})]}),o.jsxs("a",{href:"/repository",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-database me-1"}),o.jsx("span",{children:"Repositorio"})]}),t("apikeys","root","all","list")&&o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"#integrations",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"integrations",children:[o.jsx("i",{className:"mdi mdi-api me-1"}),o.jsx("span",{children:"Integraciones"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"integrations",children:[o.jsxs("a",{href:"/webhooks",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-webhook me-1"}),o.jsx("span",{children:"Redes sociales"})]}),o.jsxs("a",{href:"/apikeys",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-form-textbox me-1"}),o.jsx("span",{children:"Formulario Externo"})]})]})]}),(t("tables","root","all","list")||t("statuses","root","all","list")||t("types","root","all","list"))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"dropdown-header noti-title",children:o.jsx("h6",{className:"text-overflow m-0",children:"Menus del sistema"})}),o.jsxs("a",{href:"#maintenance",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"maintenance",children:[o.jsx("i",{className:"mdi mdi-application-cog me-1"}),o.jsx("span",{children:"Mantenimiento"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"maintenance",children:[t("statuses","root","all","list")&&o.jsxs("a",{href:"/statuses",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-format-list-checks me-1"}),o.jsx("span",{children:"Estados"})]}),t("types","root","all","list")&&o.jsxs("a",{href:"/types",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-format-list-text me-1"}),o.jsx("span",{children:"Tipos"})]})]}),t("settings","root","all","list")&&o.jsxs("a",{href:"/settings",className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-cogs me-1"}),o.jsx("span",{children:"Configuraciones"})]})]}),o.jsx("div",{className:"dropdown-divider"}),o.jsxs("a",{href:"#",className:"dropdown-item notify-item",onClick:Ri,children:[o.jsx("i",{className:"fe-log-out"}),o.jsx("span",{children:"Cerrar sesion"})]})]})]})]}),o.jsxs("div",{className:"logo-box border-bottom",children:[o.jsxs("a",{href:"/",className:"logo logo-light text-center",children:[o.jsx("span",{className:"logo-sm",children:o.jsx("img",{src:"/assets/img/icon.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"22"})}),o.jsx("span",{className:"logo-lg",children:o.jsx("img",{src:"/assets/img/logo.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"32"})})]}),o.jsxs("a",{href:"/",className:"logo logo-dark text-center",children:[o.jsx("span",{className:"logo-sm",children:o.jsx("img",{src:"/assets/img/icon-dark.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"22"})}),o.jsx("span",{className:"logo-lg",children:o.jsx("img",{src:"/assets/img/logo-dark.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"32"})})]})]}),o.jsx("ul",{className:"list-unstyled topnav-menu topnav-menu-left mb-0",children:o.jsx("li",{children:o.jsx("button",{className:"button-menu-mobile disable-btn waves-effect",children:o.jsx("i",{className:"fe-menu"})})})}),o.jsx("div",{className:"clearfix"})]})};let Yn=new AbortController;class id extends Sn{constructor(){super(...arguments);Q(this,"path","messages");Q(this,"countUnSeenMessages",async(n=[])=>{var r;Yn.abort(),Yn=new AbortController;try{const s=await fetch(`/api/${this.path}/count-unseen`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({assigneds:n}),signal:Yn.signal});if(!s.ok)throw new Error(((r=await s.json())==null?void 0:r.message)??"Error inesperado");const i=await s.json();return(i==null?void 0:i.data)??0}catch(s){return s.name!=="AbortError"&&console.log("Error:",s.message),null}})}}const od=(t,e=[])=>{const n=`susid-${t}`,[r,s]=p.useState(()=>{try{const c=B.Local.get(n);return c||e}catch(c){return console.warn("Error leyendo localStorage:",c),e}}),i=p.useRef(new BroadcastChannel(n));return p.useEffect(()=>{const c=i.current;c.onmessage=f=>{Array.isArray(f.data)&&(s(f.data),B.Local.set(n,f.data))};const l=f=>{if(f.key===n&&f.newValue)try{const d=B.Local.get(n);Array.isArray(d)&&s(d)}catch{console.warn("Error parseando localStorage",f.newValue)}};return window.addEventListener("storage",l),()=>{c.close(),window.removeEventListener("storage",l)}},[n]),[r,c=>{if(!Array.isArray(c)){console.warn("updateSelectedUsers esperaba un array, recibi:",c);return}s(c),B.Local.set(n,c),i.current.postMessage(c)}]},ad=new Audio("/assets/sounds/message.mp3"),cd=new id,ld=({session:t,theme:e,can:n,whatsAppStatus:r,APP_PROTOCOL:s,APP_DOMAIN:i,leadsCount:a,tasksCount:c,businesses:l,wsActive:f,pinned:d,setPinned:h})=>{const[b,g]=p.useState(0),[N]=od(gn.business_id,[gn.service_user.id]),{socket:m}=Lr();let y={};t.is_owner?y={name:"Owner",description:"Persona que crea la empresa"}:y=t.service_user.roles[0]??{name:"Sin rol",description:"El usuario an no tiene un rol asignado"};const C=l.find(({id:E})=>t.business_id==E),j=l.filter(({id:E})=>t.business_id!=E),w=moment(t.birthdate).format("MM-DD")==moment().format("MM-DD"),u=async()=>{const E=await cd.countUnSeenMessages(N);E!==null&&g(E)};return p.useEffect(()=>(m.on("client.updated.menu",E=>{(N.length===0||N.length>0&&N.includes(E.assigned_to))&&E.notify&&ad.play(),u()}),()=>{m.off("client.updated.menu")}),[m,N]),p.useEffect(()=>{u()},[N]),o.jsx("div",{className:"left-side-menu py-0",children:o.jsxs("div",{className:"h-100 pt-3 driver-js-menu","data-simplebar":!0,children:[o.jsxs("div",{className:"user-box w-100 mb-2",style:{padding:"0px 20px"},children:[o.jsxs("div",{className:"position-relative",style:{width:"max-content",height:"max-content"},children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${t.relative_id}?v=${new Date(t.updated_at).getTime()}`,alt:t.name,title:t.name,onError:E=>{E.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"rounded-circle img-thumbnail avatar-md mb-2",style:{padding:0,backgroundColor:"unset",objectFit:"cover",objectPosition:"center"}}),o.jsx("span",{className:`d-block ${f?"bg-success":"bg-danger"} position-absolute rounded-circle`,style:{width:"12px",height:"12px",bottom:"16px",right:"0px"}})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-1",children:[o.jsxs("div",{className:"w-100",style:{maxWidth:"70%"},children:[o.jsxs("span",{className:"user-name h4 mt-0 mb-0 d-block text-truncate",style:{fontFamily:"'Nunito Sans', sans-serif",color:e=="dark"?"#fff":void 0},children:[t.name.split(" ")[0]," ",t.lastname.split(" ")[0],w&&o.jsx(Nn,{content:`Feliz cumpleaos ${t.name}`,arrow:!0,children:o.jsx("i",{className:"fas fa-birthday-cake text-danger ms-1"})})]}),o.jsx("small",{className:"text-muted text-truncate d-block",children:t.email})]}),o.jsx(Nn,{content:y.description,arrow:!0,children:o.jsx("span",{className:"badge bg-soft-primary text-primary rounded-pill",children:y.name})})]})]}),o.jsxs("div",{className:`px-2 py-1 text-center ${j.length>0?"d-block":""}`,style:{position:"relative"},children:[o.jsxs("span",{className:"btn dropdown-toggle waves-effect waves-light d-flex align-items-center justify-content-between gap-1 mx-auto","data-bs-toggle":j.length>0?"dropdown":void 0,role:"button","aria-haspopup":"false","aria-expanded":"false",style:{borderColor:"rgba(187, 187, 187, .25)",width:"200px",boxShadow:"0 0 8px rgba(187, 187, 187, .125)",borderRadius:"8px",cursor:j.length>0?"pointer":"default"},children:[o.jsxs("div",{className:"d-flex align-items-start",children:[o.jsx("img",{className:"d-flex me-2 rounded-circle",src:`//${i}/api/logo/thumbnail/null`,alt:C.name,height:"32"}),o.jsxs("div",{className:"w-100 text-start",children:[o.jsx("h5",{className:"m-0 font-14 text-primary text-truncate",style:{width:"115px"},children:C.name}),o.jsxs("span",{className:"font-12 mb-0",children:["RUC: ",C.person.document_number]})]})]}),j.length>0&&o.jsx("i",{className:"mdi mdi-chevron-down"})]}),j.length>0&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"dropdown-menu dropdown-menu-center profile-dropdown w-full",children:[o.jsx("div",{className:"notification-list",children:j.sort((E,x)=>E.id==t.business_id?-1:1).map((E,x)=>o.jsx(Ea,{...E,session:t,APP_PROTOCOL:s,APP_DOMAIN:i},`business-${x}`))}),o.jsx("div",{className:"dropdown-divider"}),o.jsxs("a",{href:`//${i}/businesses`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"fe-arrow-up-right"}),o.jsx("span",{children:"Otras empresas"})]})]})})]}),o.jsx("div",{id:"sidebar-menu",className:"show",children:o.jsxs("ul",{id:"side-menu",children:[o.jsx("li",{className:"menu-title",children:"Panel de navegacion"}),o.jsxs(Xn,{title:"KPIs",icon:"mdi mdi-chart-donut-variant",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/home",icon:"mdi mdi-account-multiple",pinLabel:"KPIs  Leads",children:"Leads"}),n("dashboard","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/home/projects",icon:"mdi mdi-page-next",pinLabel:"KPIs  Proyectos",children:"Proyectos"})]}),o.jsx(ve,{pinned:d,setPinned:h,href:"/tasks",icon:"mdi mdi-format-list-checks",badge:c>0?c:"",children:"Tareas"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/chat",icon:"mdi mdi-chat",badge:b||void 0,children:"Chat"}),o.jsxs(Xn,{title:"Personas",icon:"mdi mdi-account-group",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/leads",icon:"mdi mdi-account",badge:a>0?a:"",pinLabel:"Personas  Leads",children:"Leads"}),n("clients","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/clients",icon:"mdi mdi-account-multiple",pinLabel:"Personas  Clientes",children:"Clientes"}),o.jsx(ve,{pinned:d,setPinned:h,id:"archived-item",href:"/archived",icon:"mdi mdi-archive",pinLabel:"Personas  Archivados",children:"Archivados"})]}),r=="ready"&&o.jsx(ve,{pinned:d,setPinned:h,href:"/messages",icon:"mdi mdi-forum",children:"Mensajes"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/products",icon:"mdi mdi-layers",children:"Productos"}),n("processes","root","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/processes",icon:"mdi mdi-timeline-text",children:"Procesos"}),n("campaigns","root","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/campaigns",icon:"mdi mdi-google-ads",children:"Campaas"}),n("projects","root","all","list")&&o.jsxs(Xn,{title:"Proyectos",icon:"mdi mdi-page-next",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/projects",icon:"mdi mdi-lan-pending",pinLabel:"Proyectos  En curso",children:"En curso"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/done",icon:"mdi mdi-check",pinLabel:"Proyectos  Entregados",children:"Entregados"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/archived",icon:"mdi mdi-archive",pinLabel:"Proyectos  Archivados",children:"Archivados"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/taskboard",icon:"mdi mdi-view-dashboard",pinLabel:"Proyectos  Cuadro de control",children:"Cuadro de control"})]})]})}),o.jsx("div",{className:"clearfix"})]})})},dd=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"footer",children:o.jsx("div",{className:"container-fluid",children:o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-md-6",children:[t,"  Atalaya | Propiedad de ",o.jsx("a",{href:"//mundoweb.pe",children:"Mundo Web"})]}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"text-md-end footer-links d-none d-sm-block",children:[o.jsx("a",{href:"#",children:"Sobre nosotros"}),o.jsx("a",{href:"#",children:"Manual de usuario"}),o.jsx("a",{href:"#",children:"Contactanos"})]})})]})})})};class ud extends Sn{constructor(){super(...arguments);Q(this,"path","whatsapp");Q(this,"verify",async(n=!1)=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}`);return{status:s.status,data:s.data}}catch(r){return console.error(r.message),n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),{status:400,data:null}}});Q(this,"send",async(n,r)=>{try{const{status:s,result:i}=await B.Fetch(`/api/${this.path}/send`,{method:"POST",body:JSON.stringify({client_id:n,message:r})});if(!s)throw new Error((i==null?void 0:i.message)??"Ocurrio un error al enviar el mensaje");return i}catch(s){return console.error(s.message),B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});Q(this,"sendAudio",async(n,r)=>{try{const s=new FormData;s.append("client_id",n),s.append("audio",r);const i=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:s}),a=await i.json();if(!i.ok)throw new Error((a==null?void 0:a.message)??"Ocurrio un error al enviar el mensaje");return a}catch(s){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});Q(this,"sendImage",async(n,r,s)=>{try{const i=new FormData;i.append("client_id",n),i.append("image",r),s!=null&&s.trim()&&i.append("message",s);const a=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:i}),c=await a.json();if(!a.ok)throw new Error((c==null?void 0:c.message)??"Ocurrio un error al enviar el mensaje");return c}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});Q(this,"sendDocument",async(n,r,s)=>{try{const i=new FormData;i.append("client_id",n),i.append("document",r),s!=null&&s.trim()&&i.append("message",s);const a=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:i}),c=await a.json();if(!a.ok)throw new Error((c==null?void 0:c.message)??"Ocurrio un error al enviar el mensaje");return c}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}})}}const fd=new ud;let Te={};const hd=({prefixes:t,status:e,setStatus:n,WA_URL:r,APP_URL:s,session:i,setWAPhone:a})=>{var D,P,I,F,_,V;const c=p.useRef(),l=p.useRef(),f=p.useRef(),{color:d,icon:h,text:b}=zs[e],[g,N]=p.useState(0),[m,y]=p.useState({}),[C,j]=p.useState(!1),[w,u]=p.useState("51"),E=i.business_uuid,x=async()=>{var W;const{status:O,data:M}=await fd.verify();O==200?(n("ready"),y(M),a(((W=M==null?void 0:M.me)==null?void 0:W.user)||null)):O==404?n("close"):n(null)},k=()=>{j(!0)},S=()=>{var O;(O=Te==null?void 0:Te.close)==null||O.call(Te),j(!1),e!="ready"&&n(null)};p.useEffect(()=>{const O=document.getElementById("whatsapp-modal");return O.addEventListener("show.bs.modal",k),O.addEventListener("hide.bs.modal",S),()=>{O.removeEventListener("show.bs.modal",k),O.removeEventListener("hide.bs.modal",S)}},[e]),p.useEffect(()=>{if(e=="verifying"){const O=new URLSearchParams({session:E});Te=new EventSource(`/api/whatsapp/verify?${O}`),Te.onmessage=({data:M})=>{var Z;if(M=="ping")return console.log("Realtime active");const{status:W,qr:Y,percent:ae,info:X}=JSON.parse(M);switch(W){case"ping":console.log("Evento del servidor");break;case"qr":n("qr"),$(l.current).empty(),new QRCode(l.current,{text:Y,width:200,height:200,colorDark:"#343a40"});break;case"loading_screen":n("loading_screen"),N(ae);break;case"authenticated":n("authenticated");break;case"ready":n("ready"),y(X),a(((Z=X==null?void 0:X.me)==null?void 0:Z.user)||null),Te.close();break;case"close":n("close"),Te.close(),setTimeout(()=>{n("verifying")},5e3);break;default:Te.close();break}},Te.onerror=M=>{console.log("Realtime closed: Perdida de conexion (Timeout)"),n("close"),Te.close(),setTimeout(()=>{n("verifying")},5e3)}}else e==null&&!C&&(console.log("Realtime closed: Modal cerrado"),x())},[e,C]);const A=async()=>{const{isConfirmed:O}=await Ti.fire({title:"Ests seguro?",text:"Se cerrar la sesin actual",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});O&&(await B.Fetch("/api/whatsapp",{method:"DELETE"}),B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacin correcta",body:`Se cerr la sesin de ${(m==null?void 0:m.pushname)||"WhatsApp"}`}),y({}),a(null),n(null))},T=async()=>{try{const{status:O,result:M}=await B.Fetch("/api/whatsapp/send",{method:"POST",body:JSON.stringify({phone:`${w}${f.current.value}`,message:`Hola! 
Este es un mensaje de prueba para confirmar que el servicio de WhatsApp est funcionando correctamente.
> Mensaje automtico de verificacin`})});if(!O)throw new Error((M==null?void 0:M.message)||"No se pudo enviar el ping");u("51"),f.current.value="",B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacion correcta",body:`Se envio el ping a ${f.current.value}`})}catch(O){B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:O.message,type:"danger"})}};return o.jsx("div",{ref:c,id:"whatsapp-modal",className:"modal fade","aria-hidden":"true","data-bs-backdrop":"static",children:o.jsx("div",{className:"modal-dialog modal-sm modal-dialog-centered",children:o.jsx("div",{className:"modal-content",children:o.jsx("div",{className:"modal-body",children:o.jsxs("div",{className:"text-center",children:[o.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 me-2 mt-2","data-bs-dismiss":"modal","aria-label":"Close"}),o.jsx("i",{className:`${h} h1 text-${d} my-2 d-block`}),o.jsxs("h4",{className:"mt-2",children:[b," ",e=="loading_screen"&&g&&`[${g}%]`]}),o.jsxs("div",{className:"position-relative",hidden:e!=="qr",children:[o.jsx("img",{className:"position-absolute",src:`//${we.APP_DOMAIN}/assets/img/icon-border.svg`,alt:"Atalaya",style:{width:"30px",aspectRatio:"30px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),o.jsx("div",{ref:l,id:"qr-code",className:`mt-3 text-center ${e=="qr"?"d-block":"d-none"}`})]}),e==null&&o.jsxs("button",{className:"btn btn-sm btn-dark waves-effect waves-light mt-2",type:"button",onClick:()=>n("verifying"),children:[o.jsx("i",{className:"mdi mdi-qrcode-plus me-1"}),"Generar QR"]}),e=="ready"&&o.jsxs("div",{className:"d-block py-2",children:[o.jsx("img",{className:"d-block mb-2 avatar-md rounded-circle mx-auto",src:(m==null?void 0:m.profile)||`//${we.APP_DOMAIN}/api/profile/thumbnail/undefined`,onError:O=>{O.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},alt:m==null?void 0:m.pushname}),o.jsx("b",{children:m==null?void 0:m.pushname}),o.jsx("br",{}),o.jsxs("span",{className:"text-muted",children:[(D=m==null?void 0:m.me)==null?void 0:D.user,"@",(P=m==null?void 0:m.me)==null?void 0:P.server]}),o.jsxs("div",{className:"row mt-2",children:[o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-account-multiple h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Contacts"}),o.jsx("div",{children:((I=m==null?void 0:m.count)==null?void 0:I.contacts)||0})]}),o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-chat-processing h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Chats"}),o.jsx("div",{children:((F=m==null?void 0:m.count)==null?void 0:F.chats)||0})]}),o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-message-text h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Messages"}),o.jsx("div",{children:((_=m==null?void 0:m.count)==null?void 0:_.messages)||0})]})]}),o.jsxs("div",{className:"mt-3 text-start",children:[o.jsx("label",{htmlFor:"ping-phone-number",className:"form-label mb-1",children:"Enva un ping a:"}),o.jsxs("div",{className:"input-group",children:[o.jsxs("div",{className:"dropdown",children:[o.jsx("button",{className:"btn btn-white btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",style:{minWidth:"10px"},children:o.jsx("span",{className:"d-flex align-items-center",children:(V=t.find(O=>O.realCode==w))==null?void 0:V.beautyCode})}),o.jsx("div",{className:"dropdown-menu",style:{maxHeight:"200px",overflowY:"auto"},children:t.map((O,M)=>o.jsx("button",{className:"dropdown-item",onClick:()=>u(O.realCode),children:o.jsxs("div",{children:[o.jsx("span",{className:"font-emoji",children:O.flag})," ",O.beautyCode,o.jsx("small",{className:"d-block text-muted",children:O.country})]})},M))})]}),o.jsx("input",{ref:f,id:"ping-phone-number",type:"text",className:"form-control form-control-sm",placeholder:"000000000"}),o.jsx(Nn,{content:"Enviar mensaje ping",children:o.jsx("button",{className:"btn btn-sm input-group-text btn-dark waves-effect waves-light",type:"button",onClick:T,children:o.jsx("i",{className:"mdi mdi-arrow-top-right"})})})]})]})]}),e=="ready"&&o.jsx("button",{type:"button",className:"btn btn-danger my-2",onClick:A,children:"Cerrar sesin"})]})})})})})};moment.tz.setDefault("UTC");const pd=({item:t})=>{const{attributes:e,listeners:n,setNodeRef:r,transform:s,transition:i}=ga({id:t.href}),a={transform:Ht.Transform.toString(s),transition:i};return o.jsxs("a",{ref:r,style:a,href:t.href,className:"d-block btn btn-light btn-sm d-flex align-items-center gap-1 rounded-pill",...e,...n,children:[o.jsx("i",{className:t.icon}),o.jsx("span",{children:t.name})]})},xd=({session:t,children:e,notificationsCount:n,prefixes:r,title:s,showTitle:i=!0,description:a,floatEnd:c,can:l,WA_URL:f,APP_URL:d,presets:h,businesses:b,services:g,APP_PROTOCOL:N,APP_DOMAIN:m,leadsCount:y,tasksCount:C,setWAPhone:j=()=>{},setThemeParent:w=()=>{}})=>{const u=B.Local.get("adminto_settings")??{},E=B.Local.get("menu-pinned")??[],[x,k]=p.useState(u.theme??"light"),[S,A]=p.useState(null),[T,D]=p.useState(E),{wsActive:P}=Lr(),I=Xi(Mr(br),Mr(gr,{coordinateGetter:ya}));p.useEffect(()=>{w(x)},[x]),p.useEffect(()=>{B.Local.set("menu-pinned",T)},[T]);const F=_=>{const{active:V,over:O}=_;V.id!==O.id&&D(M=>{const W=M.findIndex(X=>X.href===V.id),Y=M.findIndex(X=>X.href===O.id),ae=yr(M,W,Y);return B.Local.set("menu-pinned",ae),ae})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{id:"wrapper",children:[o.jsx(Di,{}),o.jsx(sd,{session:t,services:g,theme:x,setTheme:k,title:s,can:l,whatsappStatus:S,businesses:b,APP_DOMAIN:m,APP_PROTOCOL:N,notificationsCount:n,wsActive:P}),o.jsx(ld,{session:t,theme:x,can:l,presets:h,whatsappStatus:S,APP_DOMAIN:m,businesses:b,APP_PROTOCOL:N,leadsCount:y,tasksCount:C,wsActive:P,pinned:T,setPinned:D}),o.jsxs("div",{className:"content-page",children:[o.jsxs("div",{className:"content",children:[T.length>0&&o.jsx("div",{className:"container-fluid",style:{marginTop:"1rem"},children:o.jsx(Jo,{sensors:I,collisionDetection:Ki,onDragEnd:F,children:o.jsx(la,{items:T.map(_=>_.href),strategy:aa,children:o.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[o.jsx("i",{className:"mdi mdi-pin"}),T.map(_=>o.jsx(pd,{item:_,onClick:V=>{if(!V.currentTarget.dataset.reordered)return!0;V.preventDefault()}},_.href))]})})})}),o.jsxs("div",{className:"container-fluid mt-2",children:[o.jsxs("div",{className:"mb-2 d-flex flex-wrap gap-2 justify-content-between align-items-center",children:[i&&o.jsxs("div",{children:[o.jsx("h4",{className:"my-0",children:s}),a&&o.jsx("small",{className:"",children:a})]}),o.jsx("div",{children:c})]}),e]})]}),o.jsx(dd,{})]})]}),l("whatsapp","all")&&o.jsx(hd,{session:t,prefixes:r,status:S,setStatus:A,WA_URL:f,APP_URL:d,setWAPhone:j}),o.jsx(wa,{}),o.jsx("div",{className:"rightbar-overlay"})]})};export{xd as A,Sn as B,id as M,ud as W,od as a,Nn as i,Lr as u};

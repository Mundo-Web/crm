var p=Object.defineProperty;var E=(a,t,s)=>t in a?p(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var m=(a,t,s)=>(E(a,typeof t!="symbol"?t+"":t,s),s);import{m as o,C as f,c as v,R as e}from"./CreateReactScript-BRq5AIp1.js";import{B as N}from"./BasicRest-Cn0ep-ua.js";import{A as h,i as w}from"./Adminto-DQqDQkur.js";class y extends N{constructor(){super(...arguments);m(this,"path","users");m(this,"assignRole",async s=>{try{const{status:l,result:r}=await o.Fetch(`/api/${this.path}/assign-role`,{method:"POST",body:JSON.stringify(s)});if(!l)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(l){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:l.message,type:"danger"}),!1}})}}const x=new y,b=({can:a,users:t,roles:s,APP_DOMAIN:l})=>{console.log(t);const r=async(n,i)=>{await x.assignRole({role:n.id,user:i.id})&&location.reload()};return e.createElement(e.Fragment,null,e.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center",style:{minHeight:"calc(100vh - 135px)",maxHeight:"max-content"}},e.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-2"},t.map((n,i)=>{var g,u;const d=((u=(g=n.service_user)==null?void 0:g.roles)==null?void 0:u[0])??{name:"Sin rol",description:"El usuario no tiene un rol asignado"};return e.createElement("div",{key:`user-${i}`,className:"card mb-0",style:{width:"360px"}},e.createElement("div",{className:"card-body widget-user"},e.createElement("div",{className:"d-flex align-items-center"},e.createElement("div",{className:"flex-shrink-0 avatar-lg me-3"},e.createElement("img",{src:`//${l}/api/profile/thumbnail/${n.relative_id}`,className:"img-fluid rounded-circle",alt:"user"})),e.createElement("div",null,e.createElement("div",{className:"flex-grow-1 overflow-hidden",style:{width:"215px"}},e.createElement("h5",{className:"mt-0 mb-1"},n.name," ",n.lastname),e.createElement("p",{className:"text-muted mb-2 font-13 text-truncate"},n.email)),e.createElement("div",null,e.createElement("div",{className:"btn-group"},e.createElement("button",{className:"btn btn-light btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},d.name," ",e.createElement("i",{className:"mdi mdi-chevron-down"})),e.createElement("div",{className:"dropdown-menu"},s.map((c,R)=>e.createElement(w,{content:`Asignar rol ${c.name}`},e.createElement("a",{className:"dropdown-item",href:"#",onClick:()=>r(c,n)},e.createElement("i",{className:"mdi mdi-account-convert me-2"}),c.name))),e.createElement("div",{className:"dropdown-divider"}),e.createElement("a",{className:"dropdown-item",href:"#"},e.createElement("i",{className:"mdi mdi-plus me-2"}),"Nuevo rol"))))))))}))))};f((a,t)=>{v(a).render(e.createElement(h,{...t,title:"Usuarios"},e.createElement(b,{...t})))});

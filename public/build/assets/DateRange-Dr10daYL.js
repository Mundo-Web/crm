var b=Object.defineProperty;var h=(i,a,e)=>a in i?b(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var n=(i,a,e)=>h(i,typeof a!="symbol"?a+"":a,e);import{m as o,R as r,G as u}from"./CreateReactScript-BzwrR0sZ.js";import{i as E}from"./Adminto-Dbxnl_Yc.js";import{r as N}from"./server.browser-CLYKlTOS.js";class d{}n(d,"paginate",async a=>{const{result:e}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});return e}),n(d,"save",async a=>{try{const{status:e,result:t}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(a)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}}),n(d,"status",async({id:a,status:e})=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:a,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),n(d,"projectStatus",async(a,e)=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:a,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),n(d,"delete",async a=>{try{const{status:e,result:t}=await o.Fetch(`/api/projects/${a}`,{method:"DELETE"});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});class p{}n(p,"getUser",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/${a}`);return(e==null?void 0:e.data)??null}),n(p,"byProject",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/project/${a}`);return(e==null?void 0:e.data)??[]}),n(p,"massiveByProject",async a=>{try{const{status:e,result:t}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(a)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});const O=i=>r.createElement("div",{className:"avatar-group m-0"},i.map(a=>r.createElement(E,{key:`user-${a}`,content:"Cargando...",allowHTML:!0,onShow:async e=>{var l,f;const t=await p.getUser(a),s=moment(t.created_at),c=moment().diff(s,"hours")>12?s.format("lll"):s.fromNow();$(e.popper).find(".tippy-content").addClass("p-0"),e.setContent(N(r.createElement("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"}},r.createElement("div",{className:"card-body widget-user p-2"},r.createElement("div",{className:"d-flex align-items-center"},r.createElement("div",{className:"avatar-lg me-3 flex-shrink-0"},r.createElement("img",{src:`//${u.APP_DOMAIN}/api/profile/thumbnail/${a}`,className:"img-fluid rounded-circle",alt:"user",onError:y=>y.target.src=`//${u.APP_DOMAIN}/api/profile/thumbnail/undefined`})),r.createElement("div",{className:"flex-grow-1 overflow-hidden"},r.createElement("h5",{className:"text-blue mt-0 mb-1"}," ",(l=t.name.split(" "))==null?void 0:l[0]," ",(f=t.lastname.split(" "))==null?void 0:f[0]),r.createElement("p",{className:"text-dark mb-1 font-13 text-truncate"},t.email),r.createElement("small",{className:"text-muted"},"Asignado: ",r.createElement("b",null,c))))))))}},r.createElement("img",{className:"avatar-group-item avatar-xs rounded-circle mb-0",src:`/api/profile/thumbnail/${a}`,onError:e=>e.target.src=`//${u.APP_DOMAIN}/api/profile/thumbnail/undefined`,style:{backdropFilter:"blur(40px)",marginRight:"6px"}})))),A=(i,a)=>{const e=moment(i),t=moment(a),s=moment();let m=r.createElement(r.Fragment,null);if(s.isBefore(e)){const c=s.diff(e,"hours")>12?e.format("LL"):e.fromNow();m=r.createElement("i",{className:"text-muted"},"Empieza ",c)}else if(s.isAfter(t)){const c=s.diff(t,"hours")>12?t.format("LL"):t.fromNow();m=r.createElement("i",{className:"text-muted"},"Finalizo ",c)}else{const g=t.diff(e),l=s.diff(e)/g*100;m=r.createElement("div",{style:{width:"200px"}},r.createElement("p",{className:"mb-0 d-flex justify-content-between"},r.createElement("span",null,moment(i).format("DD MMM YYYY")),r.createElement("span",{className:"float-end"},moment(a).format("DD MMM YYYY"))),r.createElement("div",{className:"progress progress-bar-alt-primary progress-xl mb-0 mt-0"},r.createElement("div",{className:"progress-bar progress-bar-primary progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:`${l}%`}},l.toFixed(2),"%")))}return m};export{O as A,A as D,d as P,p as U};

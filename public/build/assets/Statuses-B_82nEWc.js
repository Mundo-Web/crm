var N=Object.defineProperty;var x=(s,r,l)=>r in s?N(s,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[r]=l;var v=(s,r,l)=>(x(s,typeof r!="symbol"?r+"":r,l),l);import{C,c as S,R as t,r as o}from"./CreateReactScript-Cr76lECz.js";import{a as k,S as B}from"./SetSelectValue-CfjBp_ib.js";import{B as G,A as j,S as A}from"./Adminto-CjgtE3kF.js";import{M as D,T as F}from"./TextareaFormGroup-DpQiZCGF.js";import{I as R}from"./InputFormGroup-DfllSyoc.js";class I extends G{constructor(){super(...arguments);v(this,"path","statuses")}}const g=new I,T=({statuses:s,tables:r})=>{const l=o.useRef(),m=o.useRef(),u=o.useRef(),a=o.useRef(),d=o.useRef(),f=o.useRef(),p=o.useRef(),[w,b]=o.useState(!1),E=e=>{var c,n,i;e!=null&&e.id?b(!0):b(!1),u.current.value=(e==null?void 0:e.id)||null,B(a.current,(c=e==null?void 0:e.table)==null?void 0:c.id,(n=e==null?void 0:e.table)==null?void 0:n.name),(i=e==null?void 0:e.table)!=null&&i.id?$(a.current).parents(".form-group").hide():$(a.current).parents(".form-group").show(),d.current.value=(e==null?void 0:e.name)||null,f.current.value=(e==null?void 0:e.color)||"#343a40",p.current.value=(e==null?void 0:e.description)||null,$(m.current).modal("show")},h=async e=>{e.preventDefault();const c={id:u.current.value||void 0,table_id:a.current.value,name:d.current.value,color:f.current.value,description:p.current.value};await g.save(c)&&($(l.current).dxDataGrid("instance").refresh(),$(m.current).modal("hide"))},y=async e=>{const{isConfirmed:c}=await A.fire({title:"Estas seguro de eliminar este estado?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!c||!await g.delete(e)||$(l.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement("div",{className:"container"},t.createElement("div",{className:"text-center"},t.createElement("button",{className:"btn btn-primary mb-4 rounded-pill",onClick:()=>E()},"Nuevo Estado")),t.createElement("div",{className:"row align-items-center justify-content-center"},r.map((e,c)=>t.createElement("div",{key:c,className:"col-md-4"},t.createElement("div",{className:"card"},t.createElement("div",{className:"card-header"},t.createElement("div",{className:"d-flex align-items-center justify-content-between"},t.createElement("h5",{className:"my-0 text-capitalize"},e.name),t.createElement("button",{className:"btn btn-xs btn-primary rounded-pill",onClick:()=>E({table:e})},"Nuevo estado"))),t.createElement("div",{className:"card-body d-flex align-items-center justify-content-center gap-2",style:{flexWrap:"wrap"}},s.filter(n=>n.table_id===e.id).map((n,i)=>t.createElement(t.Fragment,null,t.createElement("div",{key:i,class:"btn-group dropup col-auto"},t.createElement("span",{type:"button",class:"btn btn-sm btn-white",style:{cursor:"default"}},t.createElement("i",{className:"mdi mdi-circle me-1",style:{color:n.color}}),n.name),t.createElement("button",{type:"button",class:"btn btn-sm btn-white dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.createElement("i",{class:"mdi mdi-dots-vertical"})),t.createElement("div",{class:"dropdown-menu"},t.createElement("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(n)},"Editar"),t.createElement("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>y(n.id)},"Eliminar"))))))))))),t.createElement(D,{modalRef:m,title:w?"Editar estado":"Agregar estado",onSubmit:h,size:"sm"},t.createElement("div",{className:"row",id:"status-crud-container"},t.createElement("input",{ref:u,type:"hidden"}),t.createElement(R,{eRef:d,label:"Nombre de estado",col:"col-12",required:!0}),t.createElement(k,{eRef:a,label:"Tabla",col:"col-12",dropdownParent:"#status-crud-container",searchAPI:"/api/tables/paginate",searchBy:"name",required:!0}),t.createElement(R,{eRef:f,type:"color",label:"Color",col:"col-12",required:!0}),t.createElement(F,{eRef:p,label:"Descripcion",col:"col-12"}))))};C((s,r)=>{if(!r.can("statuses","root","all","list"))return location.href="/";S(s).render(t.createElement(j,{...r,title:"Gestor de estados"},t.createElement(T,{...r})))});

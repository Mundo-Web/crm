var C=Object.defineProperty;var S=(n,r,c)=>r in n?C(n,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[r]=c;var v=(n,r,c)=>(S(n,typeof r!="symbol"?r+"":r,c),c);import{R as e,C as k,c as P,r as l}from"./CreateReactScript-DiMSE74L.js";import{B,A as F,i as x,S as T}from"./Adminto-DDJrXyEx.js";import{M as A}from"./Modal-DIHwUr7I.js";import{I as b}from"./InputFormGroup-TM-cwmw7.js";import{T as D}from"./TextareaFormGroup-DptRN7bF.js";import"./server.browser-BzA2yPSr.js";import{S as G}from"./SelectFormGroup-Lynb75r5.js";class M extends B{constructor(){super(...arguments);v(this,"path","products")}}const q=({className:n,ribbon:r,children:c,...o})=>e.createElement("article",{className:`pricing-column ${n} mb-0`,...o},r?e.createElement("div",{className:"ribbon",style:{left:-5}},e.createElement("span",null,r)):"",e.createElement("div",{className:"card mb-0"},e.createElement("div",{className:"inner-box card-body p-2"},c))),y=new M,I=({products:n=[],types:r=[],can:c})=>{const o=l.useRef(),i=l.useRef(),a=l.useRef(),m=l.useRef(),u=l.useRef(),f=l.useRef(),p=l.useRef(),E=l.useRef(),[g,d]=l.useState(!1),R=t=>{t!=null&&t.id?d(!0):d(!1),a.current.value=(t==null?void 0:t.id)||null,$(m.current).val((t==null?void 0:t.type)||null),u.current.value=(t==null?void 0:t.name)||null,f.current.value=(t==null?void 0:t.price)||null,p.current.value=(t==null?void 0:t.color)||null,E.current.value=(t==null?void 0:t.description)||null,$(i.current).modal("show")},N=async t=>{t.preventDefault();const s={id:a.current.value||void 0,type:m.current.value,name:u.current.value,price:f.current.value,color:p.current.value,description:E.current.value};await y.save(s)&&$(i.current).modal("hide")},h=async t=>{const{isConfirmed:s}=await T.fire({title:"Estas seguro?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!s||!await y.delete(t)||$(o.current).dxDataGrid("instance").refresh()};return e.createElement(e.Fragment,null,e.createElement("div",{className:"row mb-4"},e.createElement("div",{className:"text-center"},e.createElement("button",{className:"btn btn-success btn-sm",onClick:R},e.createElement("i",{className:"fa fa-plus me-1"}),"Agregar producto"))),e.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-3",style:{height:"max-height"}},n.map((t,s)=>e.createElement(q,{key:s,style:{width:"300px"}},e.createElement("h4",{className:`${t.ribbon?"ms-4":""} text-center text-truncate line-clamp-2`},t.name),e.createElement("table",null,e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{style:{width:"100%"}},e.createElement("small",{className:"mb-1",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"36px"}},t.description||"- Sin descripciÃ³n -"),e.createElement("b",null,"S/.",Number(t.price).toFixed(2))),e.createElement("td",{className:"text-end"},e.createElement(x,{content:"Editar"},e.createElement("button",{className:"btn btn-xs btn-soft-primary fa fa-pen mb-1",onClick:()=>R(t)})),e.createElement(x,{content:"Eliminar"},e.createElement("button",{className:"btn btn-xs btn-soft-danger fa fa-times",onClick:()=>h(t.id)}))))))))),e.createElement(A,{modalRef:i,title:g?"Editar producto":"Agregar producto",onSubmit:N,size:"sm"},e.createElement("div",{className:"row",id:"main-container"},e.createElement("input",{ref:a,type:"hidden"}),e.createElement(G,{eRef:m,label:"Tipo de producto",dropdownParent:"#main-container",tags:!0,required:!0},r.map((t,s)=>e.createElement("option",{key:s,value:t.id},t.name))),e.createElement(b,{eRef:u,label:"Producto",col:"col-12",required:!0}),e.createElement(b,{eRef:f,label:"Precio",col:"col-12",type:"number",step:.01}),e.createElement(b,{eRef:p,label:"Color (Referencial)",col:"col-12",type:"color"}),e.createElement(D,{eRef:E,label:"Descripcion",col:"col-12"}))))};k((n,r)=>{P(n).render(e.createElement(F,{...r,title:"Productos"},e.createElement(I,{...r})))});

import{C as d,c as p,R as t,r as g,G as u}from"./CreateReactScript-Cr76lECz.js";/* empty css                    */import{T as b}from"./TasksRest-C2SmZ9uv.js";import{A as f}from"./Adminto-D9Qh2p9j.js";import{T as E,a as c}from"./Table-BOyMB7KG.js";import{R as l}from"./ReactAppend-BUdEshxq.js";import"./server.browser-Dt1gYAOJ.js";const y=new b,h=()=>{const i=g.useRef(),s={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},o={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},r={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return t.createElement(t.Fragment,null,t.createElement(E,{gridRef:i,title:"Tareas",rest:y,toolBar:a=>{a.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(i.current).dxDataGrid("instance").refresh()}}),a.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"Nuevo registro",onClick:()=>onModalOpen()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"status",caption:"Estado",width:"120px",cellTemplate:(a,{data:e})=>{a.attr("style","overflow: unset"),l(a,t.createElement("div",null,t.createElement("button",{className:`btn btn-xs ${s[e.status].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.createElement("i",{className:s[e.status].icon})," ",e.status," ",t.createElement("i",{className:"mdi mdi-chevron-down"})),t.createElement("div",{className:"dropdown-menu"},Object.keys(s).map((n,m)=>t.createElement("span",{key:`status-${m}`,className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>onChange(id,n)},t.createElement("i",{className:s[n].icon})," ",n)))))}},{dataField:"name",caption:"Titulo",dataType:"string",width:"250px",cellTemplate:(a,{data:e})=>{l(a,t.createElement("div",{style:{width:"240px"}},t.createElement("b",{className:"d-block my-0"},e.name),t.createElement("div",{className:"mb-0"},t.createElement("span",{class:"badge bg-light text-dark me-1"},t.createElement("i",{className:o[e.type].icon})," ",e.type),t.createElement("span",{class:`badge ${r[e.priority].color}`},e.priority))))}},{dataField:"type",caption:"Tipo",dataType:"string",cellTemplate:(a,{data:e})=>{a.text(e.type),a.prepend(`<i class="${o[e.type].icon} me-1"></i>`)},visible:!1},{dataField:"priority",caption:"Prioridad",dataType:"string",alignment:"center",cellTemplate:(a,{data:e})=>{l(a,t.createElement("span",{className:`badge ${r[e.priority].color}`},e.priority))},visible:!1},{dataField:"client_note.client.contact_name",caption:"Contacto asociado",cellTemplate:(a,{data:e})=>{l(a,t.createElement(t.Fragment,null,t.createElement("b",{className:"d-block my-0"},e.client_note.client.contact_name),t.createElement("small",null,e.client_note.client.contact_phone)))}},{dataField:"assigned.fullname",caption:"Asignado a",cellTemplate:(a,{data:e})=>{e.assigned&&l(a,t.createElement(t.Fragment,null,t.createElement("img",{src:`//${u.APP_DOMAIN}/api/profile/thumbnail/${e.assigned.relative_id}`,alt:e.assigned.fullname,class:"img-fluid avatar-xs rounded-circle me-1"}),t.createElement("b",null,e.assigned.fullname)))}},{dataField:"description",caption:"Tarea",cellTemplate:(a,{data:e})=>{const n=$(`<div>${e.description}</div>`);a.text(n.text())}},{dataField:"color",caption:"Color",cellTemplate:(a,{data:e})=>{l(a,t.createElement("span",{className:"badge rounded-pill",style:{backgroundColor:e.color||"#343a40"}},e.color))}},{dataField:"description",caption:"Descripcion",cellTemplate:(a,{value:e})=>{e?l(a,e):l(a,t.createElement("i",{className:"text-muted"},"- Sin descripcion -"))}},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(a,{data:e})=>{switch(e.status){case 1:l(a,t.createElement("span",{className:"badge bg-success rounded-pill"},"Activo"));break;case 0:l(a,t.createElement("span",{className:"badge bg-danger rounded-pill"},"Inactivo"));break;default:l(a,t.createElement("span",{className:"badge bg-dark rounded-pill"},"Eliminado"));break}}},{caption:"Acciones",cellTemplate:(a,{data:e})=>{a.attr("style","display: flex; gap: 4px; overflow: unset"),l(a,t.createElement(c,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>onModalOpen(e)},t.createElement("i",{className:"fa fa-pen"}))),l(a,t.createElement(c,{className:"btn btn-xs btn-light",title:e.status===null?"Restaurar":"Cambiar estado",onClick:()=>onStatusChange(e)},e.status===1?t.createElement("i",{className:"fa fa-toggle-on text-success"}):e.status===0?t.createElement("i",{className:"fa fa-toggle-off text-danger"}):t.createElement("i",{className:"fas fa-trash-restore"}))),l(a,t.createElement(c,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>onDeleteClicked(e.id)},t.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}]}))};d((i,s)=>{p(i).render(t.createElement(f,{...s,title:"Tareas"},t.createElement(h,{...s})))});

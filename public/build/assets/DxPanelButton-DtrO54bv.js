import{r as z,R as e}from"./CreateReactScript-CdTrqrJ4.js";import{r as P}from"./server.browser-Dsjl0432.js";const O=({gridRef:t,rest:s,columns:c,toolBar:d,masterDetail:u,filterValue:m,defaultRows:r,selection:o,allowedPageSizes:f=[5,10,25,50,100],pageSize:g=100,exportable:x,exportableName:b,customizeCell:h=()=>{},reloadWith:v=[null],height:E="calc(100vh - 185px)"})=>(z.useEffect(()=>{var y,D,N;DevExpress.localization.locale(navigator.language),$(t.current).data("dxDataGrid")&&((D=(y=$(t.current))==null?void 0:y.dxDataGrid("instance"))==null||D.dispose()),$(t.current).dxDataGrid({language:"es",dataSource:{load:async n=>{const a=await s.paginate(n)??{};let l=(a==null?void 0:a.data)||[];if(r){const i=r.map(w=>Object.keys(w)),k=l.concat(r.filter(w=>!l.some(B=>i.some(C=>C.every(S=>B[S]==w[S])))));a.data=k}return a}},onToolbarPreparing:n=>{const{items:a}=n.toolbarOptions;d(a)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:E,filterValue:m,selection:o||null,export:{enabled:x},onExporting:function(n){var a=new ExcelJS.Workbook,l=a.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:l,component:n.component,customizeCell:function(i){h(i),i.excelCell.alignment={horizontal:"left",vertical:"top",...i.excelCell.alignment}}}).then(function(){a.xlsx.writeBuffer().then(function(i){saveAs(new Blob([i],{type:"application/octet-stream"}),`${b}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:g},pager:{visible:!0,allowedPageSizes:f,showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:c,masterDetail:u,onContentReady:(...n)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})},onOptionChanged:n=>{if(n.fullName==="filterValue"){const a=location.pathname,l=Local.get("dxSettings")||{};l[a]={filterValue:n.value},Local.set("dxSettings",l)}}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0});const p=Local.get("dxSettings")||{};(N=p[location.pathname])!=null&&N.filterValue&&$(t.current).dxDataGrid("instance").option("filterValue",p[location.pathname].filterValue)},v),e.createElement("div",{ref:t})),L=({title:t,gridRef:s,rest:c,columns:d,toolBar:u,masterDetail:m,filterValue:r=[],defaultRows:o,selection:f,className:g="",allowedPageSizes:x,pageSize:b,exportable:h=!1,customizeCell:v,reloadWith:E,height:p})=>e.createElement("div",{className:`row ${g}`},e.createElement("div",{className:"col-12"},e.createElement("div",{className:"card"},typeof t=="object"&&e.createElement("div",{className:"card-header"},t),e.createElement("div",{className:"card-body"},typeof t=="string"&&e.createElement("h4",{className:"header-title"},e.createElement("div",{id:"header-title-options",className:"float-end"}),e.createElement("span",{id:"header-title-prefix"})," Lista de ",t," ",e.createElement("span",{id:"header-title-suffix"})),e.createElement(O,{gridRef:s,rest:c,columns:d.filter(Boolean),toolBar:u,masterDetail:m,filterValue:r,defaultRows:o,selection:f,allowedPageSizes:x,pageSize:b,exportable:h,exportableName:t,customizeCell:v,reloadWith:E,height:p}))))),M=({className:t="btn btn-xs btn-default rounded-pill",location:s="after",icon:c,text:d,title:u,onClick:m=()=>{}})=>({widget:"dxButton",location:s,options:{icon:c,text:d,hint:u,onClick:m,template:(r,o)=>{o.parent().attr("style","border: none !important; background: transparent !important"),o.attr("class",t),o.html(P(e.createElement(e.Fragment,null,r.icon&&e.createElement("i",{className:`${r.icon}`}),e.createElement("span",{className:"d-none d-md-inline-block ms-1"},r.text))))}}});export{M as D,L as T};

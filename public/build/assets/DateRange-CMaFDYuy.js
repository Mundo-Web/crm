var h=Object.defineProperty;var E=(n,r,e)=>r in n?h(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var i=(n,r,e)=>E(n,typeof r!="symbol"?r+"":r,e);import{m as o,R as a,G as p}from"./CreateReactScript-Dcnwm1IN.js";import{i as N}from"./Adminto-D9rZW2Bq.js";import{r as w}from"./server.browser-CSCYH58z.js";class d{}i(d,"paginate",async r=>{const{result:e}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});return e}),i(d,"save",async r=>{try{const{status:e,result:t}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(r)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}}),i(d,"status",async({id:r,status:e})=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:r,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),i(d,"projectStatus",async(r,e)=>{try{const{status:t,result:s}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:r,status:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),i(d,"delete",async r=>{try{const{status:e,result:t}=await o.Fetch(`/api/projects/${r}`,{method:"DELETE"});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});class f{}i(f,"getUser",async r=>{const{result:e}=await o.Fetch(`/api/users-by-projects/${r}`);return(e==null?void 0:e.data)??null}),i(f,"byProject",async r=>{const{result:e}=await o.Fetch(`/api/users-by-projects/project/${r}`);return(e==null?void 0:e.data)??[]}),i(f,"massiveByProject",async r=>{try{const{status:e,result:t}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(r)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});const O=n=>a.createElement("div",{className:"avatar-group m-0"},n.map(r=>a.createElement(N,{key:`user-${r}`,content:"Cargando...",allowHTML:!0,onShow:async e=>{var c,y;const t=await f.getUser(r),s=moment(t.created_at),m=moment().diff(s,"hours")>12?s.format("lll"):s.fromNow();$(e.popper).find(".tippy-content").addClass("p-0"),e.setContent(w(a.createElement("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"}},a.createElement("div",{className:"card-body widget-user p-2"},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"avatar-lg me-3 flex-shrink-0"},a.createElement("img",{src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${r}`,className:"img-fluid rounded-circle",alt:"user",onError:u=>u.target.src=`//${p.APP_DOMAIN}/api/profile/thumbnail/undefined`})),a.createElement("div",{className:"flex-grow-1 overflow-hidden"},a.createElement("h5",{className:"text-blue mt-0 mb-1"}," ",(c=t.name.split(" "))==null?void 0:c[0]," ",(y=t.lastname.split(" "))==null?void 0:y[0]),a.createElement("p",{className:"text-dark mb-1 font-13 text-truncate"},t.email),a.createElement("small",{className:"text-muted"},"Asignado: ",a.createElement("b",null,m))))))))}},a.createElement("img",{className:"avatar-group-item avatar-sm rounded-circle mb-0",src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${r}`,onError:e=>e.target.src=`//${p.APP_DOMAIN}/api/profile/thumbnail/undefined`,style:{backdropFilter:"blur(40px)",marginRight:"6px"}})))),C=(n,r)=>{const e=moment(n),t=moment(r),s=moment();let l=a.createElement(a.Fragment,null);if(s.isBefore(e)){const m=s.diff(e,"hours")>12?e.format("LL"):e.fromNow();l=a.createElement("i",{className:"text-muted"},"Empieza ",m)}else if(s.isAfter(t)){const m=s.diff(t,"hours")>12?t.format("LL"):t.fromNow();l=a.createElement("i",{className:"text-muted"},"Finalizo ",m)}else{const g=t.diff(e),c=s.diff(e)/g*100,u=(b=>b<=25?"success":b<=50?"primary":b<=75?"warning":"danger")(c);l=a.createElement("div",{style:{width:"200px"}},a.createElement("p",{className:"mb-0 d-flex justify-content-between"},a.createElement("span",null,moment(n).format("DD MMM YYYY")),a.createElement("span",{className:"float-end"},moment(r).format("DD MMM YYYY"))),a.createElement("div",{className:`progress progress-bar-alt-${u} progress-xl mb-0 mt-0`},a.createElement("div",{className:`progress-bar bg-${u} progress-bar-animated`,role:"progressbar","aria-valuenow":c,"aria-valuemin":"0","aria-valuemax":"100",style:{width:`${c}%`}},c.toFixed(2),"%")))}return l};export{O as A,C as D,d as P,f as U};

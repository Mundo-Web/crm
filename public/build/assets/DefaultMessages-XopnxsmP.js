var v=Object.defineProperty;var w=(r,t,i)=>t in r?v(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var p=(r,t,i)=>w(r,typeof t!="symbol"?t+"":t,i);import{C as D,c as C,j as s,r as a}from"./CreateReactScript-DSh221L4.js";import{R as l}from"./ReactAppend-CCPXxX5R.js";import{B as E,A as T,S as A}from"./Adminto-Vq4BPRvv.js";import{M as B}from"./Modal-DB4W-Fff.js";import{T as M,D as x}from"./DxPanelButton-B7q8MKlo.js";import{I as N}from"./InputFormGroup-DsuG1yrP.js";import{T as y}from"./TextareaFormGroup-CVonM_0b.js";import{T as R}from"./TippyButton-TtdwxLOB.js";import"./server.browser-DoheiHq8.js";class S extends E{constructor(){super(...arguments);p(this,"path","default-messages")}}const f=new S,k=({title:r})=>{const t=a.useRef(),i=a.useRef(),o=a.useRef(),c=a.useRef(),u=a.useRef(),[g,m]=a.useState(!1),d=e=>{e!=null&&e.id?m(!0):m(!1),o.current.value=(e==null?void 0:e.id)||null,c.current.value=(e==null?void 0:e.name)||null,u.current.value=(e==null?void 0:e.description)||null,$(i.current).modal("show")},j=async e=>{e.preventDefault();const n={id:o.current.value||void 0,name:c.current.value,description:u.current.value};await f.save(n)&&($(t.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},b=async e=>{const{isConfirmed:n}=await A.fire({title:"Eliminar registro",text:"Â¿Desea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0});!n||!await f.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return s.jsxs(s.Fragment,{children:[s.jsx(M,{gridRef:t,title:r,rest:f,toolBar:e=>{e.unshift(x({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(t.current).dxDataGrid("instance").refresh()})),e.unshift(x({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>d()}))},columns:[{dataField:"name",caption:"Alias"},{dataField:"description",caption:"Descripcion",cellTemplate:(e,{value:n})=>{n?l(e,n):l(e,s.jsx("i",{className:"text-muted",children:"- Sin descripcion -"}))}},{caption:"Acciones",cellTemplate:(e,{data:n})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),l(e,s.jsx(R,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>d(n),children:s.jsx("i",{className:"fa fa-pen"})})),l(e,s.jsx(R,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>b(n.id),children:s.jsx("i",{className:"fa fa-trash-alt"})}))},allowFiltering:!1,allowExporting:!1}]}),s.jsx(B,{modalRef:i,title:g?"Editar mensaje predeterminado":"Agregar mensaje predeterminado",onSubmit:j,children:s.jsxs("div",{className:"row",children:[s.jsx("input",{ref:o,type:"hidden"}),s.jsx(N,{eRef:c,label:"Alias",col:"col-12",required:!0}),s.jsx(y,{eRef:u,label:"Mensaje",col:"col-12",required:!0})]})})]})};D((r,t)=>{t.title="Mensajes Predeterminados",C(r).render(s.jsx(T,{...t,children:s.jsx(k,{...t})}))});

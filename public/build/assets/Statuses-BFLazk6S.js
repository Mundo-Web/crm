import{C as h,c as N,R as t,r as n}from"./CreateReactScript-Cr76lECz.js";import{a as x,S}from"./SetSelectValue-CfjBp_ib.js";import{S as C}from"./StatusesRest-XVef_LMD.js";import{A as k,S as G}from"./Adminto-D4ON7X_J.js";import{M as j,T as A}from"./TextareaFormGroup-DpQiZCGF.js";import{I as v}from"./InputFormGroup-DfllSyoc.js";const R=new C,D=({statuses:a,tables:c})=>{const E=n.useRef(),i=n.useRef(),m=n.useRef(),s=n.useRef(),u=n.useRef(),d=n.useRef(),f=n.useRef(),[g,b]=n.useState(!1);n.useState(null);const p=e=>{var l,r,o;e!=null&&e.id?b(!0):b(!1),m.current.value=(e==null?void 0:e.id)||null,S(s.current,(l=e==null?void 0:e.table)==null?void 0:l.id,(r=e==null?void 0:e.table)==null?void 0:r.name),(o=e==null?void 0:e.table)!=null&&o.id?$(s.current).parents(".form-group").hide():$(s.current).parents(".form-group").show(),u.current.value=(e==null?void 0:e.name)||null,d.current.value=(e==null?void 0:e.color)||"#343a40",f.current.value=(e==null?void 0:e.description)||null,$(i.current).modal("show")},w=async e=>{e.preventDefault();const l={id:m.current.value||void 0,table_id:s.current.value,name:u.current.value,color:d.current.value,description:f.current.value};await R.save(l)&&($(E.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},y=async e=>{const{isConfirmed:l}=await G.fire({title:"Estas seguro de eliminar este estado?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!l||!await R.delete(e)||$(E.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement("div",{className:"container"},t.createElement("div",{className:"text-center"},t.createElement("button",{className:"btn btn-primary mb-4 rounded-pill",onClick:()=>p()},"Nuevo Estado")),t.createElement("div",{className:"row align-items-center justify-content-center"},c.map((e,l)=>t.createElement("div",{key:l,className:"col-md-4"},t.createElement("div",{className:"card"},t.createElement("div",{className:"card-header"},t.createElement("div",{className:"d-flex align-items-center justify-content-between"},t.createElement("h5",{className:"my-0 text-capitalize"},e.name),t.createElement("button",{className:"btn btn-xs btn-primary rounded-pill",onClick:()=>p({table:e})},"Nuevo estado"))),t.createElement("div",{className:"card-body d-flex align-items-center justify-content-center gap-2",style:{flexWrap:"wrap"}},a.filter(r=>r.table_id===e.id).map((r,o)=>t.createElement(t.Fragment,null,t.createElement("div",{key:o,class:"btn-group dropup col-auto"},t.createElement("span",{type:"button",class:"btn btn-sm btn-white",style:{cursor:"default"}},t.createElement("i",{className:"mdi mdi-circle me-1",style:{color:r.color}}),r.name),t.createElement("button",{type:"button",class:"btn btn-sm btn-white dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.createElement("i",{class:"mdi mdi-dots-vertical"})),t.createElement("div",{class:"dropdown-menu"},t.createElement("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>p(r)},"Editar"),t.createElement("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>y(r.id)},"Eliminar"))))))))))),t.createElement(j,{modalRef:i,title:g?"Editar estado":"Agregar estado",onSubmit:w,size:"sm"},t.createElement("div",{className:"row",id:"status-crud-container"},t.createElement("input",{ref:m,type:"hidden"}),t.createElement(v,{eRef:u,label:"Nombre de estado",col:"col-12",required:!0}),t.createElement(x,{eRef:s,label:"Tabla",col:"col-12",dropdownParent:"#status-crud-container",searchAPI:"/api/tables/paginate",searchBy:"name",required:!0}),t.createElement(v,{eRef:d,type:"color",label:"Color",col:"col-12",required:!0}),t.createElement(A,{eRef:f,label:"Descripcion",col:"col-12"}))))};h((a,c)=>{if(!c.can("statuses","root","all","list"))return location.href="/";N(a).render(t.createElement(k,{...c,title:"Gestor de estados"},t.createElement(D,{...c})))});

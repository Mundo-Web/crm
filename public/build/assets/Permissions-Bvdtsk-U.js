import{C as R,c as g,j as t,r as n}from"./CreateReactScript-ByDl3m9l.js";import{R as o}from"./ReactAppend-C4mird4q.js";import{P as d}from"./PermissionsRest-B60dIQaT.js";import{A as v}from"./Adminto-BksISQOY.js";import{M as T}from"./Modal-CJxY9cBG.js";import{T as y}from"./Table-CyFFtqJD.js";import{I as F}from"./InputFormGroup-DtEJO489.js";import{T as D}from"./TextareaFormGroup-39uCvdJc.js";import{T as f}from"./TippyButton-6ubjU2sn.js";import{D as x}from"./DxPanelButton-Bfx2Xjlg.js";import"./Logout-DquunmIv.js";import"./sweetalert2.esm.all-C32wHI3n.js";import"./server.browser-CMbz63Ok.js";import"./default-BbN4y6Mb.js";import"./index-D_o9jIE1.js";const E=({can:i})=>{const r=n.useRef(),l=n.useRef(),a=n.useRef(),c=n.useRef(),m=n.useRef(),[p,u]=n.useState(!1),h=e=>{e!=null&&e.id?u(!0):u(!1),a.current.value=(e==null?void 0:e.id)||null,c.current.value=(e==null?void 0:e.name)||null,m.current.value=(e==null?void 0:e.description)||null,$(l.current).modal("show")},j=async e=>{e.preventDefault();const s={id:a.current.value||void 0,name:c.current.value,description:m.current.value};await d.save(s)&&($(r.current).dxDataGrid("instance").refresh(),$(l.current).modal("hide"))},b=async e=>{await d.delete(e)&&$(r.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(y,{gridRef:r,title:"Permisos",rest:d,toolBar:e=>{e.unshift(x({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(r.current).dxDataGrid("instance").refresh()})),i("permissions","all","create")&&e.unshift(x({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},columns:[{dataField:"id",caption:"ID",dataType:"number",sortOrder:"asc"},{dataField:"name",caption:"Permiso"},{dataField:"description",caption:"Descripcion"},{dataField:"created_at",caption:"Fecha creacion",dataType:"date",cellTemplate:(e,{data:s})=>{o(e,t.jsx("span",{children:moment(s.created_at).format("LL")}))}},{dataField:"updated_at",caption:"Fecha actualizacion",dataType:"date",cellTemplate:(e,{data:s})=>{o(e,t.jsx("span",{children:moment(s.updated_at).format("LL")}))}},i("permissions","root","all","update","delete")?{caption:"Acciones",cellTemplate:(e,{data:s})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),i("permissions","root","all","update")&&o(e,t.jsx(f,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>h(s),children:t.jsx("i",{className:"fa fa-pen"})})),i("permissions","root","all","delete")&&o(e,t.jsx(f,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>b(s.id),children:t.jsx("i",{className:"fa fa-trash-alt"})}))},allowFiltering:!1,allowExporting:!1}:null]}),t.jsx(T,{modalRef:l,title:p?"Editar permiso":"Agregar permiso",onSubmit:j,children:t.jsxs("div",{className:"row",children:[t.jsxs("p",{children:["Intenta con el formato ",t.jsx("code",{children:"ventana.permiso"}),". Ej: ",t.jsx("code",{children:"clients.create"}),", ",t.jsx("code",{children:"clients.list"}),", ",t.jsx("code",{children:"clients.update"}),", ",t.jsx("code",{children:"clients.delete"})]}),t.jsx("input",{ref:a,type:"hidden"}),t.jsx(F,{eRef:c,label:"Permiso",col:"col-12",required:!0,disabled:p}),t.jsx(D,{eRef:m,label:"Descripcion",col:"col-12"})]})})]})};R((i,r)=>{if(!r.can("permissions","root","all","list"))return location.href="/";g(i).render(t.jsx(v,{...r,title:"Permisos",children:t.jsx(E,{...r})}))});

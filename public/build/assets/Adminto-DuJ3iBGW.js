var Oi=Object.defineProperty;var Si=(t,e,n)=>e in t?Oi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>Si(t,typeof e!="symbol"?e+"":e,n);import{r as p,d as he,a as Et,m as B,j as o,A as Ri,G as we,L as vn}from"./CreateReactScript-BvCtOVXi.js";import{L as Ai}from"./Logout-D-WLkxh-.js";import{t as Ti,S as Di,T as _i}from"./sweetalert2.esm.all-Bee8ig8x.js";function Li(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const kn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function St(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function fr(t){return"nodeType"in t}function Ce(t){var e,n;return t?St(t)?t:fr(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function hr(t){const{Document:e}=Ce(t);return t instanceof e}function Jt(t){return St(t)?!1:t instanceof Ce(t).HTMLElement}function Es(t){return t instanceof Ce(t).SVGElement}function Rt(t){return t?St(t)?t.document:fr(t)?hr(t)?t:Jt(t)||Es(t)?t.ownerDocument:document:document:document}const et=kn?p.useLayoutEffect:p.useEffect;function pr(t){const e=p.useRef(t);return et(()=>{e.current=t}),p.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Bi(){const t=p.useRef(null),e=p.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=p.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Vt(t,e){e===void 0&&(e=[t]);const n=p.useRef(t);return et(()=>{n.current!==t&&(n.current=t)},e),n}function Gt(t,e){const n=p.useRef();return p.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function bn(t){const e=pr(t),n=p.useRef(null),r=p.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Jn(t){const e=p.useRef();return p.useEffect(()=>{e.current=t},[t]),e.current}let Mn={};function Qt(t,e){return p.useMemo(()=>{if(e)return e;const n=Mn[t]==null?0:Mn[t]+1;return Mn[t]=n,t+"-"+n},[t,e])}function Ns(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const c=Object.entries(a);for(const[l,f]of c){const d=i[l];d!=null&&(i[l]=d+t*f)}return i},{...e})}}const Nt=Ns(1),Ht=Ns(-1);function Mi(t){return"clientX"in t&&"clientY"in t}function mr(t){if(!t)return!1;const{KeyboardEvent:e}=Ce(t.target);return e&&t instanceof e}function Ii(t){if(!t)return!1;const{TouchEvent:e}=Ce(t.target);return e&&t instanceof e}function Gn(t){if(Ii(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Mi(t)?{x:t.clientX,y:t.clientY}:null}const Wt=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Wt.Translate.toString(t),Wt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Mr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pi(t){return t.matches(Mr)?t:t.querySelector(Mr)}const $i={display:"none"};function Fi(t){let{id:e,value:n}=t;return he.createElement("div",{id:e,style:$i},n)}function Ui(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return he.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function qi(){const[t,e]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Cs=p.createContext(null);function zi(t){const e=p.useContext(Cs);p.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Vi(){const[t]=p.useState(()=>new Set),e=p.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[p.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,i)})},[t]),e]}const Hi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Wi={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Xi(t){let{announcements:e=Wi,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Hi}=t;const{announce:i,announcement:a}=qi(),c=Qt("DndLiveRegion"),[l,f]=p.useState(!1);if(p.useEffect(()=>{f(!0)},[]),zi(p.useMemo(()=>({onDragStart(h){let{active:v}=h;i(e.onDragStart({active:v}))},onDragMove(h){let{active:v,over:g}=h;e.onDragMove&&i(e.onDragMove({active:v,over:g}))},onDragOver(h){let{active:v,over:g}=h;i(e.onDragOver({active:v,over:g}))},onDragEnd(h){let{active:v,over:g}=h;i(e.onDragEnd({active:v,over:g}))},onDragCancel(h){let{active:v,over:g}=h;i(e.onDragCancel({active:v,over:g}))}}),[i,e])),!l)return null;const d=he.createElement(he.Fragment,null,he.createElement(Fi,{id:r,value:s.draggable}),he.createElement(Ui,{id:c,announcement:a}));return n?Et.createPortal(d,n):d}var re;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(re||(re={}));function yn(){}function Ir(t,e){return p.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Yi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const He=Object.freeze({x:0,y:0});function ks(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function js(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function Ki(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Pr(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function Os(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function $r(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Ji=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=$r(e,e.left,e.top),i=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=ks($r(l),s);i.push({id:c,data:{droppableContainer:a,value:f}})}}return i.sort(js)},Gi=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Pr(e),i=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=Pr(l),d=s.reduce((v,g,E)=>v+ks(f[E],g),0),h=Number((d/4).toFixed(4));i.push({id:c,data:{droppableContainer:a,value:h}})}}return i.sort(js)};function Qi(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,c=i-n;if(r<s&&n<i){const l=e.width*e.height,f=t.width*t.height,d=a*c,h=d/(l+f-d);return Number(h.toFixed(4))}return 0}const Zi=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const l=Qi(c,e);l>0&&s.push({id:a,data:{droppableContainer:i,value:l}})}}return s.sort(Ki)};function eo(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Ss(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:He}function to(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,c)=>({...a,top:a.top+t*c.y,bottom:a.bottom+t*c.y,left:a.left+t*c.x,right:a.right+t*c.x}),{...n})}}const no=to(1);function ro(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function so(t,e,n){const r=ro(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:c}=r,l=t.left-a-(1-s)*parseFloat(n),f=t.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,h=i?t.height/i:t.height;return{width:d,height:h,top:f,right:l+d,bottom:f+h,left:l}}const io={ignoreTransform:!1};function At(t,e){e===void 0&&(e=io);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:d}=Ce(t).getComputedStyle(t);f&&(n=so(n,f,d))}const{top:r,left:s,width:i,height:a,bottom:c,right:l}=n;return{top:r,left:s,width:i,height:a,bottom:c,right:l}}function Fr(t){return At(t,{ignoreTransform:!0})}function oo(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function ao(t,e){return e===void 0&&(e=Ce(t).getComputedStyle(t)),e.position==="fixed"}function co(t,e){e===void 0&&(e=Ce(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function jn(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(hr(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Jt(s)||Es(s)||n.includes(s))return n;const i=Ce(t).getComputedStyle(s);return s!==t&&co(s,i)&&n.push(s),ao(s,i)?n:r(s.parentNode)}return t?r(t):n}function Rs(t){const[e]=jn(t,1);return e??null}function In(t){return!kn||!t?null:St(t)?t:fr(t)?hr(t)||t===Rt(t).scrollingElement?window:Jt(t)?t:null:null}function As(t){return St(t)?t.scrollX:t.scrollLeft}function Ts(t){return St(t)?t.scrollY:t.scrollTop}function Qn(t){return{x:As(t),y:Ts(t)}}var oe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(oe||(oe={}));function Ds(t){return!kn||!t?!1:t===document.scrollingElement}function _s(t){const e={x:0,y:0},n=Ds(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const lo={x:.2,y:.2};function uo(t,e,n,r,s){let{top:i,left:a,right:c,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=lo);const{isTop:f,isBottom:d,isLeft:h,isRight:v}=_s(t),g={x:0,y:0},E={x:0,y:0},m={height:e.height*s.y,width:e.width*s.x};return!f&&i<=e.top+m.height?(g.y=oe.Backward,E.y=r*Math.abs((e.top+m.height-i)/m.height)):!d&&l>=e.bottom-m.height&&(g.y=oe.Forward,E.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!v&&c>=e.right-m.width?(g.x=oe.Forward,E.x=r*Math.abs((e.right-m.width-c)/m.width)):!h&&a<=e.left+m.width&&(g.x=oe.Backward,E.x=r*Math.abs((e.left+m.width-a)/m.width)),{direction:g,speed:E}}function fo(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Ls(t){return t.reduce((e,n)=>Nt(e,Qn(n)),He)}function ho(t){return t.reduce((e,n)=>e+As(n),0)}function po(t){return t.reduce((e,n)=>e+Ts(n),0)}function mo(t,e){if(e===void 0&&(e=At),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Rs(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const go=[["x",["left","right"],ho],["y",["top","bottom"],po]];class gr{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=jn(n),s=Ls(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,c]of go)for(const l of a)Object.defineProperty(this,l,{get:()=>{const f=c(r),d=s[i]-f;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Pt{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function vo(t){const{EventTarget:e}=Ce(t);return t instanceof e?t:Rt(t)}function Pn(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var De;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(De||(De={}));function Ur(t){t.preventDefault()}function bo(t){t.stopPropagation()}var V;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(V||(V={}));const Bs={start:[V.Space,V.Enter],cancel:[V.Esc],end:[V.Space,V.Enter,V.Tab]},yo=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case V.Right:return{...n,x:n.x+25};case V.Left:return{...n,x:n.x-25};case V.Down:return{...n,y:n.y+25};case V.Up:return{...n,y:n.y-25}}};class vr{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Pt(Rt(n)),this.windowListeners=new Pt(Ce(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(De.Resize,this.handleCancel),this.windowListeners.add(De.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(De.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&mo(r),n(He)}handleKeyDown(e){if(mr(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Bs,coordinateGetter:a=yo,scrollBehavior:c="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:f}=r.current,d=f?{x:f.left,y:f.top}:He;this.referenceCoordinates||(this.referenceCoordinates=d);const h=a(e,{active:n,context:r.current,currentCoordinates:d});if(h){const v=Ht(h,d),g={x:0,y:0},{scrollableAncestors:E}=r.current;for(const m of E){const x=e.code,{isTop:N,isRight:C,isLeft:k,isBottom:u,maxScroll:y,minScroll:w}=_s(m),j=fo(m),S={x:Math.min(x===V.Right?j.right-j.width/2:j.right,Math.max(x===V.Right?j.left:j.left+j.width/2,h.x)),y:Math.min(x===V.Down?j.bottom-j.height/2:j.bottom,Math.max(x===V.Down?j.top:j.top+j.height/2,h.y))},T=x===V.Right&&!C||x===V.Left&&!k,A=x===V.Down&&!u||x===V.Up&&!N;if(T&&S.x!==h.x){const D=m.scrollLeft+v.x,I=x===V.Right&&D<=y.x||x===V.Left&&D>=w.x;if(I&&!v.y){m.scrollTo({left:D,behavior:c});return}I?g.x=m.scrollLeft-D:g.x=x===V.Right?m.scrollLeft-y.x:m.scrollLeft-w.x,g.x&&m.scrollBy({left:-g.x,behavior:c});break}else if(A&&S.y!==h.y){const D=m.scrollTop+v.y,I=x===V.Down&&D<=y.y||x===V.Up&&D>=w.y;if(I&&!v.x){m.scrollTo({top:D,behavior:c});return}I?g.y=m.scrollTop-D:g.y=x===V.Down?m.scrollTop-y.y:m.scrollTop-w.y,g.y&&m.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,Nt(Ht(h,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vr.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Bs,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function qr(t){return!!(t&&"distance"in t)}function zr(t){return!!(t&&"delay"in t)}class br{constructor(e,n,r){var s;r===void 0&&(r=vo(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=Rt(a),this.documentListeners=new Pt(this.document),this.listeners=new Pt(r),this.windowListeners=new Pt(Ce(a)),this.initialCoordinates=(s=Gn(i))!=null?s:He,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(De.Resize,this.handleCancel),this.windowListeners.add(De.DragStart,Ur),this.windowListeners.add(De.VisibilityChange,this.handleCancel),this.windowListeners.add(De.ContextMenu,Ur),this.documentListeners.add(De.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(qr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(De.Click,bo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(De.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:c}}=i;if(!s)return;const l=(n=Gn(e))!=null?n:He,f=Ht(s,l);if(!r&&c){if(qr(c)){if(c.tolerance!=null&&Pn(f,c.tolerance))return this.handleCancel();if(Pn(f,c.distance))return this.handleStart()}if(zr(c)&&Pn(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),a(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===V.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const xo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class yr extends br{constructor(e){const{event:n}=e,r=Rt(n.target);super(e,xo,r)}}yr.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const wo={move:{name:"mousemove"},end:{name:"mouseup"}};var Zn;(function(t){t[t.RightClick=2]="RightClick"})(Zn||(Zn={}));class Eo extends br{constructor(e){super(e,wo,Rt(e.event.target))}}Eo.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Zn.RightClick?!1:(r==null||r({event:n}),!0)}}];const $n={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class No extends br{constructor(e){super(e,$n)}static setup(){return window.addEventListener($n.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener($n.move.name,e)};function e(){}}}No.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var $t;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})($t||($t={}));var xn;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(xn||(xn={}));function Co(t){let{acceleration:e,activator:n=$t.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:c=xn.TreeOrder,pointerCoordinates:l,scrollableAncestors:f,scrollableAncestorRects:d,delta:h,threshold:v}=t;const g=jo({delta:h,disabled:!i}),[E,m]=Bi(),x=p.useRef({x:0,y:0}),N=p.useRef({x:0,y:0}),C=p.useMemo(()=>{switch(n){case $t.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case $t.DraggableRect:return s}},[n,s,l]),k=p.useRef(null),u=p.useCallback(()=>{const w=k.current;if(!w)return;const j=x.current.x*N.current.x,S=x.current.y*N.current.y;w.scrollBy(j,S)},[]),y=p.useMemo(()=>c===xn.TreeOrder?[...f].reverse():f,[c,f]);p.useEffect(()=>{if(!i||!f.length||!C){m();return}for(const w of y){if((r==null?void 0:r(w))===!1)continue;const j=f.indexOf(w),S=d[j];if(!S)continue;const{direction:T,speed:A}=uo(w,S,C,e,v);for(const D of["x","y"])g[D][T[D]]||(A[D]=0,T[D]=0);if(A.x>0||A.y>0){m(),k.current=w,E(u,a),x.current=A,N.current=T;return}}x.current={x:0,y:0},N.current={x:0,y:0},m()},[e,u,r,m,i,a,JSON.stringify(C),JSON.stringify(g),E,f,y,d,JSON.stringify(v)])}const ko={x:{[oe.Backward]:!1,[oe.Forward]:!1},y:{[oe.Backward]:!1,[oe.Forward]:!1}};function jo(t){let{delta:e,disabled:n}=t;const r=Jn(e);return Gt(s=>{if(n||!r||!s)return ko;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[oe.Backward]:s.x[oe.Backward]||i.x===-1,[oe.Forward]:s.x[oe.Forward]||i.x===1},y:{[oe.Backward]:s.y[oe.Backward]||i.y===-1,[oe.Forward]:s.y[oe.Forward]||i.y===1}}},[n,e,r])}function Oo(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Gt(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function So(t,e){return p.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var Xt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Xt||(Xt={}));var er;(function(t){t.Optimized="optimized"})(er||(er={}));const Vr=new Map;function Ro(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=p.useState(null),{frequency:c,measure:l,strategy:f}=s,d=p.useRef(t),h=x(),v=Vt(h),g=p.useCallback(function(N){N===void 0&&(N=[]),!v.current&&a(C=>C===null?N:C.concat(N.filter(k=>!C.includes(k))))},[v]),E=p.useRef(null),m=Gt(N=>{if(h&&!n)return Vr;if(!N||N===Vr||d.current!==t||i!=null){const C=new Map;for(let k of t){if(!k)continue;if(i&&i.length>0&&!i.includes(k.id)&&k.rect.current){C.set(k.id,k.rect.current);continue}const u=k.node.current,y=u?new gr(l(u),u):null;k.rect.current=y,y&&C.set(k.id,y)}return C}return N},[t,i,n,h,l]);return p.useEffect(()=>{d.current=t},[t]),p.useEffect(()=>{h||g()},[n,h]),p.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),p.useEffect(()=>{h||typeof c!="number"||E.current!==null||(E.current=setTimeout(()=>{g(),E.current=null},c))},[c,h,g,...r]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:i!=null};function x(){switch(f){case Xt.Always:return!1;case Xt.BeforeDragging:return n;default:return!n}}}function Ms(t,e){return Gt(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Ao(t,e){return Ms(t,e)}function To(t){let{callback:e,disabled:n}=t;const r=pr(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function On(t){let{callback:e,disabled:n}=t;const r=pr(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Do(t){return new gr(At(t),t)}function Hr(t,e,n){e===void 0&&(e=Do);const[r,s]=p.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=l??n)!=null?f:null}const d=e(t);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const a=To({callback(l){if(t)for(const f of l){const{type:d,target:h}=f;if(d==="childList"&&h instanceof HTMLElement&&h.contains(t)){i();break}}}}),c=On({callback:i});return et(()=>{i(),t?(c==null||c.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[t]),r}function _o(t){const e=Ms(t);return Ss(t,e)}const Wr=[];function Lo(t){const e=p.useRef(t),n=Gt(r=>t?r&&r!==Wr&&t&&e.current&&t.parentNode===e.current.parentNode?r:jn(t):Wr,[t]);return p.useEffect(()=>{e.current=t},[t]),n}function Bo(t){const[e,n]=p.useState(null),r=p.useRef(t),s=p.useCallback(i=>{const a=In(i.target);a&&n(c=>c?(c.set(a,Qn(a)),new Map(c)):null)},[]);return p.useEffect(()=>{const i=r.current;if(t!==i){a(i);const c=t.map(l=>{const f=In(l);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,Qn(f)]):null}).filter(l=>l!=null);n(c.length?new Map(c):null),r.current=t}return()=>{a(t),a(i)};function a(c){c.forEach(l=>{const f=In(l);f==null||f.removeEventListener("scroll",s)})}},[s,t]),p.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>Nt(i,a),He):Ls(t):He,[t,e])}function Xr(t,e){e===void 0&&(e=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},e),p.useEffect(()=>{const r=t!==He;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ht(t,n.current):He}function Mo(t){p.useEffect(()=>{if(!kn)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Io(t,e){return p.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function Is(t){return p.useMemo(()=>t?oo(t):null,[t])}const Yr=[];function Po(t,e){e===void 0&&(e=At);const[n]=t,r=Is(n?Ce(n):null),[s,i]=p.useState(Yr);function a(){i(()=>t.length?t.map(l=>Ds(l)?r:new gr(e(l),l)):Yr)}const c=On({callback:a});return et(()=>{c==null||c.disconnect(),a(),t.forEach(l=>c==null?void 0:c.observe(l))},[t]),s}function $o(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Jt(e)?e:t}function Fo(t){let{measure:e}=t;const[n,r]=p.useState(null),s=p.useCallback(f=>{for(const{target:d}of f)if(Jt(d)){r(h=>{const v=e(d);return h?{...h,width:v.width,height:v.height}:v});break}},[e]),i=On({callback:s}),a=p.useCallback(f=>{const d=$o(f);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?e(d):null)},[e,i]),[c,l]=bn(a);return p.useMemo(()=>({nodeRef:c,rect:n,setRef:l}),[n,c,l])}const Uo=[{sensor:yr,options:{}},{sensor:vr,options:{}}],qo={current:{}},un={draggable:{measure:Fr},droppable:{measure:Fr,strategy:Xt.WhileDragging,frequency:er.Optimized},dragOverlay:{measure:At}};class Ft extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const zo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ft,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:un,measureDroppableContainers:yn,windowRect:null,measuringScheduled:!1},Vo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yn,draggableNodes:new Map,over:null,measureDroppableContainers:yn},Sn=p.createContext(Vo),Ps=p.createContext(zo);function Ho(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ft}}}function Wo(t,e){switch(e.type){case re.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case re.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Ft(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case re.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Ft(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case re.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Ft(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function Xo(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=p.useContext(Sn),i=Jn(r),a=Jn(n==null?void 0:n.id);return p.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!mr(i)||document.activeElement===i.target)return;const c=s.get(a);if(!c)return;const{activatorNode:l,node:f}=c;if(!l.current&&!f.current)return;requestAnimationFrame(()=>{for(const d of[l.current,f.current]){if(!d)continue;const h=Pi(d);if(h){h.focus();break}}})}},[r,e,s,a,i]),null}function Yo(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function Ko(t){return p.useMemo(()=>({draggable:{...un.draggable,...t==null?void 0:t.draggable},droppable:{...un.droppable,...t==null?void 0:t.droppable},dragOverlay:{...un.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Jo(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=p.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;et(()=>{if(!a&&!c||!e){i.current=!1;return}if(i.current||!r)return;const f=e==null?void 0:e.node.current;if(!f||f.isConnected===!1)return;const d=n(f),h=Ss(d,r);if(a||(h.x=0),c||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=Rs(f);v&&v.scrollBy({top:h.y,left:h.x})}},[e,a,c,r,n])}const $s=p.createContext({...He,scaleX:1,scaleY:1});var ut;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ut||(ut={}));const Go=p.memo(function(e){var n,r,s,i;let{id:a,accessibility:c,autoScroll:l=!0,children:f,sensors:d=Uo,collisionDetection:h=Zi,measuring:v,modifiers:g,...E}=e;const m=p.useReducer(Wo,void 0,Ho),[x,N]=m,[C,k]=Vi(),[u,y]=p.useState(ut.Uninitialized),w=u===ut.Initialized,{draggable:{active:j,nodes:S,translate:T},droppable:{containers:A}}=x,D=j!=null?S.get(j):null,I=p.useRef({initial:null,translated:null}),P=p.useMemo(()=>{var te;return j!=null?{id:j,data:(te=D==null?void 0:D.data)!=null?te:qo,rect:I}:null},[j,D]),F=p.useRef(null),[_,z]=p.useState(null),[O,M]=p.useState(null),W=Vt(E,Object.values(E)),Y=Qt("DndDescribedBy",a),ae=p.useMemo(()=>A.getEnabled(),[A]),X=Ko(v),{droppableRects:Z,measureDroppableContainers:ce,measuringScheduled:le}=Ro(ae,{dragging:w,dependencies:[T.x,T.y],config:X.droppable}),J=Oo(S,j),Ie=p.useMemo(()=>O?Gn(O):null,[O]),se=ct(),pe=Ao(J,X.draggable.measure);Jo({activeNode:j!=null?S.get(j):null,config:se.layoutShiftCompensation,initialRect:pe,measure:X.draggable.measure});const U=Hr(J,X.draggable.measure,pe),Se=Hr(J?J.parentElement:null),me=p.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=A.getNodeFor((n=me.current.over)==null?void 0:n.id),be=Fo({measure:X.dragOverlay.measure}),Pe=(r=be.nodeRef.current)!=null?r:J,Ae=w?(s=be.rect)!=null?s:U:null,it=!!(be.nodeRef.current&&be.rect),pt=_o(it?null:U),ot=Is(Pe?Ce(Pe):null),ie=Lo(w?Re??J:null),ke=Po(ie),We=Yo(g,{transform:{x:T.x-pt.x,y:T.y-pt.y,scaleX:1,scaleY:1},activatorEvent:O,active:P,activeNodeRect:U,containerNodeRect:Se,draggingNodeRect:Ae,over:me.current.over,overlayNodeRect:be.rect,scrollableAncestors:ie,scrollableAncestorRects:ke,windowRect:ot}),Xe=Ie?Nt(Ie,T):null,at=Bo(ie),yt=Xr(at),xt=Xr(at,[U]),$e=Nt(We,yt),Fe=Ae?no(Ae,We):null,mt=P&&Fe?h({active:P,collisionRect:Fe,droppableRects:Z,droppableContainers:ae,pointerCoordinates:Xe}):null,nn=Os(mt,"id"),[Ye,rn]=p.useState(null),Ln=it?We:Nt(We,xt),b=eo(Ln,(i=Ye==null?void 0:Ye.rect)!=null?i:null,U),R=p.useRef(null),L=p.useCallback((te,G)=>{let{sensor:ue,options:je}=G;if(F.current==null)return;const ne=S.get(F.current);if(!ne)return;const ge=te.nativeEvent,xe=new ue({active:F.current,activeNode:ne,event:ge,options:je,context:me,onAbort(fe){if(!S.get(fe))return;const{onDragAbort:Ke}=W.current,rt={id:fe};Ke==null||Ke(rt),C({type:"onDragAbort",event:rt})},onPending(fe,lt,Ke,rt){if(!S.get(fe))return;const{onDragPending:_t}=W.current,dt={id:fe,constraint:lt,initialCoordinates:Ke,offset:rt};_t==null||_t(dt),C({type:"onDragPending",event:dt})},onStart(fe){const lt=F.current;if(lt==null)return;const Ke=S.get(lt);if(!Ke)return;const{onDragStart:rt}=W.current,Dt={activatorEvent:ge,active:{id:lt,data:Ke.data,rect:I}};Et.unstable_batchedUpdates(()=>{rt==null||rt(Dt),y(ut.Initializing),N({type:re.DragStart,initialCoordinates:fe,active:lt}),C({type:"onDragStart",event:Dt}),z(R.current),M(ge)})},onMove(fe){N({type:re.DragMove,coordinates:fe})},onEnd:Ue(re.DragEnd),onCancel:Ue(re.DragCancel)});R.current=xe;function Ue(fe){return async function(){const{active:Ke,collisions:rt,over:Dt,scrollAdjustedTranslate:_t}=me.current;let dt=null;if(Ke&&_t){const{cancelDrop:Lt}=W.current;dt={activatorEvent:ge,active:Ke,collisions:rt,delta:_t,over:Dt},fe===re.DragEnd&&typeof Lt=="function"&&await Promise.resolve(Lt(dt))&&(fe=re.DragCancel)}F.current=null,Et.unstable_batchedUpdates(()=>{N({type:fe}),y(ut.Uninitialized),rn(null),z(null),M(null),R.current=null;const Lt=fe===re.DragEnd?"onDragEnd":"onDragCancel";if(dt){const Bn=W.current[Lt];Bn==null||Bn(dt),C({type:Lt,event:dt})}})}}},[S]),K=p.useCallback((te,G)=>(ue,je)=>{const ne=ue.nativeEvent,ge=S.get(je);if(F.current!==null||!ge||ne.dndKit||ne.defaultPrevented)return;const xe={active:ge};te(ue,G.options,xe)===!0&&(ne.dndKit={capturedBy:G.sensor},F.current=je,L(ue,G))},[S,L]),q=So(d,K);Mo(d),et(()=>{U&&u===ut.Initializing&&y(ut.Initialized)},[U,u]),p.useEffect(()=>{const{onDragMove:te}=W.current,{active:G,activatorEvent:ue,collisions:je,over:ne}=me.current;if(!G||!ue)return;const ge={active:G,activatorEvent:ue,collisions:je,delta:{x:$e.x,y:$e.y},over:ne};Et.unstable_batchedUpdates(()=>{te==null||te(ge),C({type:"onDragMove",event:ge})})},[$e.x,$e.y]),p.useEffect(()=>{const{active:te,activatorEvent:G,collisions:ue,droppableContainers:je,scrollAdjustedTranslate:ne}=me.current;if(!te||F.current==null||!G||!ne)return;const{onDragOver:ge}=W.current,xe=je.get(nn),Ue=xe&&xe.rect.current?{id:xe.id,rect:xe.rect.current,data:xe.data,disabled:xe.disabled}:null,fe={active:te,activatorEvent:G,collisions:ue,delta:{x:ne.x,y:ne.y},over:Ue};Et.unstable_batchedUpdates(()=>{rn(Ue),ge==null||ge(fe),C({type:"onDragOver",event:fe})})},[nn]),et(()=>{me.current={activatorEvent:O,active:P,activeNode:J,collisionRect:Fe,collisions:mt,droppableRects:Z,draggableNodes:S,draggingNode:Pe,draggingNodeRect:Ae,droppableContainers:A,over:Ye,scrollableAncestors:ie,scrollAdjustedTranslate:$e},I.current={initial:Ae,translated:Fe}},[P,J,mt,Fe,S,Pe,Ae,Z,A,Ye,ie,$e]),Co({...se,delta:T,draggingRect:Fe,pointerCoordinates:Xe,scrollableAncestors:ie,scrollableAncestorRects:ke});const de=p.useMemo(()=>({active:P,activeNode:J,activeNodeRect:U,activatorEvent:O,collisions:mt,containerNodeRect:Se,dragOverlay:be,draggableNodes:S,droppableContainers:A,droppableRects:Z,over:Ye,measureDroppableContainers:ce,scrollableAncestors:ie,scrollableAncestorRects:ke,measuringConfiguration:X,measuringScheduled:le,windowRect:ot}),[P,J,U,O,mt,Se,be,S,A,Z,Ye,ce,ie,ke,X,le,ot]),ye=p.useMemo(()=>({activatorEvent:O,activators:q,active:P,activeNodeRect:U,ariaDescribedById:{draggable:Y},dispatch:N,draggableNodes:S,over:Ye,measureDroppableContainers:ce}),[O,q,P,U,N,Y,S,Ye,ce]);return he.createElement(Cs.Provider,{value:k},he.createElement(Sn.Provider,{value:ye},he.createElement(Ps.Provider,{value:de},he.createElement($s.Provider,{value:b},f)),he.createElement(Xo,{disabled:(c==null?void 0:c.restoreFocus)===!1})),he.createElement(Xi,{...c,hiddenTextDescribedById:Y}));function ct(){const te=(_==null?void 0:_.autoScrollEnabled)===!1,G=typeof l=="object"?l.enabled===!1:l===!1,ue=w&&!te&&!G;return typeof l=="object"?{...l,enabled:ue}:{enabled:ue}}}),Qo=p.createContext(null),Kr="button",Zo="Draggable";function ea(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Qt(Zo),{activators:a,activatorEvent:c,active:l,activeNodeRect:f,ariaDescribedById:d,draggableNodes:h,over:v}=p.useContext(Sn),{role:g=Kr,roleDescription:E="draggable",tabIndex:m=0}=s??{},x=(l==null?void 0:l.id)===e,N=p.useContext(x?$s:Qo),[C,k]=bn(),[u,y]=bn(),w=Io(a,e),j=Vt(n);et(()=>(h.set(e,{id:e,key:i,node:C,activatorNode:u,data:j}),()=>{const T=h.get(e);T&&T.key===i&&h.delete(e)}),[h,e]);const S=p.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":r,"aria-pressed":x&&g===Kr?!0:void 0,"aria-roledescription":E,"aria-describedby":d.draggable}),[r,g,m,x,E,d.draggable]);return{active:l,activatorEvent:c,activeNodeRect:f,attributes:S,isDragging:x,listeners:r?void 0:w,node:C,over:v,setNodeRef:k,setActivatorNodeRef:y,transform:N}}function ta(){return p.useContext(Ps)}const na="Droppable",ra={timeout:25};function sa(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Qt(na),{active:a,dispatch:c,over:l,measureDroppableContainers:f}=p.useContext(Sn),d=p.useRef({disabled:n}),h=p.useRef(!1),v=p.useRef(null),g=p.useRef(null),{disabled:E,updateMeasurementsFor:m,timeout:x}={...ra,...s},N=Vt(m??r),C=p.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{f(Array.isArray(N.current)?N.current:[N.current]),g.current=null},x)},[x]),k=On({callback:C,disabled:E||!a}),u=p.useCallback((S,T)=>{k&&(T&&(k.unobserve(T),h.current=!1),S&&k.observe(S))},[k]),[y,w]=bn(u),j=Vt(e);return p.useEffect(()=>{!k||!y.current||(k.disconnect(),h.current=!1,k.observe(y.current))},[y,k]),p.useEffect(()=>(c({type:re.RegisterDroppable,element:{id:r,key:i,disabled:n,node:y,rect:v,data:j}}),()=>c({type:re.UnregisterDroppable,key:i,id:r})),[r]),p.useEffect(()=>{n!==d.current.disabled&&(c({type:re.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,c]),{active:a,rect:v,isOver:(l==null?void 0:l.id)===r,node:y,over:l,setNodeRef:w}}function xr(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function ia(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function sn(t){return t!==null&&t>=0}function oa(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function aa(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const on={scaleX:1,scaleY:1},ca=t=>{var e;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:i,index:a}=t;const c=(e=n[s])!=null?e:r;if(!c)return null;const l=la(n,a,s);if(a===s){const f=n[i];return f?{x:s<i?f.left+f.width-(c.left+c.width):f.left-c.left,y:0,...on}:null}return a>s&&a<=i?{x:-c.width-l,y:0,...on}:a<s&&a>=i?{x:c.width+l,y:0,...on}:{x:0,y:0,...on}};function la(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return!r||!s&&!i?0:n<e?s?r.left-(s.left+s.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(s.left+s.width)}const Fs=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=xr(e,r,n),a=e[s],c=i[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Us="Sortable",qs=he.createContext({activeIndex:-1,containerId:Us,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fs,disabled:{draggable:!1,droppable:!1}});function da(t){let{children:e,id:n,items:r,strategy:s=Fs,disabled:i=!1}=t;const{active:a,dragOverlay:c,droppableRects:l,over:f,measureDroppableContainers:d}=ta(),h=Qt(Us,n),v=c.rect!==null,g=p.useMemo(()=>r.map(w=>typeof w=="object"&&"id"in w?w.id:w),[r]),E=a!=null,m=a?g.indexOf(a.id):-1,x=f?g.indexOf(f.id):-1,N=p.useRef(g),C=!oa(g,N.current),k=x!==-1&&m===-1||C,u=aa(i);et(()=>{C&&E&&d(g)},[C,g,E,d]),p.useEffect(()=>{N.current=g},[g]);const y=p.useMemo(()=>({activeIndex:m,containerId:h,disabled:u,disableTransforms:k,items:g,overIndex:x,useDragOverlay:v,sortedRects:ia(g,l),strategy:s}),[m,h,u.draggable,u.droppable,k,g,x,l,v,s]);return he.createElement(qs.Provider,{value:y},e)}const ua=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return xr(n,r,s).indexOf(e)},fa=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:c,previousContainerId:l,transition:f}=t;return!f||!r||c!==i&&s===a?!1:n?!0:a!==s&&e===l},ha={duration:200,easing:"ease"},zs="transform",pa=Wt.Transition.toString({property:zs,duration:0,easing:"linear"}),ma={roleDescription:"sortable"};function ga(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=p.useState(null),c=p.useRef(n);return et(()=>{if(!e&&n!==c.current&&r.current){const l=s.current;if(l){const f=At(r.current,{ignoreTransform:!0}),d={x:l.left-f.left,y:l.top-f.top,scaleX:l.width/f.width,scaleY:l.height/f.height};(d.x||d.y)&&a(d)}}n!==c.current&&(c.current=n)},[e,n,r,s]),p.useEffect(()=>{i&&a(null)},[i]),i}function va(t){let{animateLayoutChanges:e=fa,attributes:n,disabled:r,data:s,getNewIndex:i=ua,id:a,strategy:c,resizeObserverConfig:l,transition:f=ha}=t;const{items:d,containerId:h,activeIndex:v,disabled:g,disableTransforms:E,sortedRects:m,overIndex:x,useDragOverlay:N,strategy:C}=p.useContext(qs),k=ba(r,g),u=d.indexOf(a),y=p.useMemo(()=>({sortable:{containerId:h,index:u,items:d},...s}),[h,s,u,d]),w=p.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:j,node:S,isOver:T,setNodeRef:A}=sa({id:a,data:y,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...l}}),{active:D,activatorEvent:I,activeNodeRect:P,attributes:F,setNodeRef:_,listeners:z,isDragging:O,over:M,setActivatorNodeRef:W,transform:Y}=ea({id:a,data:y,attributes:{...ma,...n},disabled:k.draggable}),ae=Li(A,_),X=!!D,Z=X&&!E&&sn(v)&&sn(x),ce=!N&&O,le=ce&&Z?Y:null,Ie=Z?le??(c??C)({rects:m,activeNodeRect:P,activeIndex:v,overIndex:x,index:u}):null,se=sn(v)&&sn(x)?i({id:a,items:d,activeIndex:v,overIndex:x}):u,pe=D==null?void 0:D.id,U=p.useRef({activeId:pe,items:d,newIndex:se,containerId:h}),Se=d!==U.current.items,me=e({active:D,containerId:h,isDragging:O,isSorting:X,id:a,index:u,items:d,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:f,wasDragging:U.current.activeId!=null}),Re=ga({disabled:!me,index:u,node:S,rect:j});return p.useEffect(()=>{X&&U.current.newIndex!==se&&(U.current.newIndex=se),h!==U.current.containerId&&(U.current.containerId=h),d!==U.current.items&&(U.current.items=d)},[X,se,h,d]),p.useEffect(()=>{if(pe===U.current.activeId)return;if(pe!=null&&U.current.activeId==null){U.current.activeId=pe;return}const Pe=setTimeout(()=>{U.current.activeId=pe},50);return()=>clearTimeout(Pe)},[pe]),{active:D,activeIndex:v,attributes:F,data:y,rect:j,index:u,newIndex:se,items:d,isOver:T,isSorting:X,isDragging:O,listeners:z,node:S,overIndex:x,over:M,setNodeRef:ae,setActivatorNodeRef:W,setDroppableNodeRef:A,setDraggableNodeRef:_,transform:Re??Ie,transition:be()};function be(){if(Re||Se&&U.current.newIndex===u)return pa;if(!(ce&&!mr(I)||!f)&&(X||me))return Wt.Transition.toString({...f,property:zs})}}function ba(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function wn(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const ya=[V.Down,V.Right,V.Up,V.Left],xa=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:c}}=e;if(ya.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const v=s.get(h.id);if(v)switch(t.code){case V.Down:r.top<v.top&&l.push(h);break;case V.Up:r.top>v.top&&l.push(h);break;case V.Left:r.left>v.left&&l.push(h);break;case V.Right:r.left<v.left&&l.push(h);break}});const f=Gi({collisionRect:r,droppableRects:s,droppableContainers:l});let d=Os(f,"id");if(d===(a==null?void 0:a.id)&&f.length>1&&(d=f[1].id),d!=null){const h=i.get(n.id),v=i.get(d),g=v?s.get(v.id):null,E=v==null?void 0:v.node.current;if(E&&g&&h&&v){const x=jn(E).some((w,j)=>c[j]!==w),N=Vs(h,v),C=wa(h,v),k=x||!N?{x:0,y:0}:{x:C?r.width-g.width:0,y:C?r.height-g.height:0},u={x:g.left,y:g.top};return k.x&&k.y?u:Ht(u,k)}}}};function Vs(t,e){return!wn(t)||!wn(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function wa(t,e){return!wn(t)||!wn(e)||!Vs(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Ea=()=>{const t=B.Local.get("adminto_settings")??{},e=document.getElementById("bs-default-stylesheet"),n=document.getElementById("bs-dark-stylesheet"),r=document.getElementById("app-default-stylesheet"),s=document.getElementById("app-dark-stylesheet"),i=document.getElementById("dg-default-stylesheet"),a=document.getElementById("dg-dark-stylesheet");t.theme=="dark"?(n.disabled=!1,s.disabled=!1,a.disabled=!1,e.disabled=!0,r.disabled=!0,i.disabled=!0):(e.disabled=!1,r.disabled=!1,i.disabled=!1,n.disabled=!0,s.disabled=!0,a.disabled=!0);const c=document.body;return c.setAttribute("data-layout-width",t.width??"fluid"),c.setAttribute("data-layout-menu-position",t.menuPosition??"fixed"),c.setAttribute("data-sidebar-color",t.menuColor??"light"),c.setAttribute("data-sidebar-showuser",t.userInfo??!0),c.setAttribute("data-sidebar-size",t.menuSize??"default"),c.setAttribute("data-topbar-color",t.navbarColor??"light"),o.jsx("div",{className:"right-bar",children:o.jsxs("div",{"data-simplebar":!0,className:"h-100",children:[o.jsxs("div",{className:"rightbar-title",children:[o.jsx("a",{href:"#",className:"right-bar-toggle float-end",children:o.jsx("i",{className:"mdi mdi-close"})}),o.jsx("h4",{className:"font-16 m-0 text-white",children:"Configurar tema"})]}),o.jsx("div",{className:"tab-content pt-0",children:o.jsx("div",{className:"tab-pane active",id:"settings-tab",role:"tabpanel",children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"alert alert-warning",role:"alert",children:[o.jsx("strong",{children:"Modifica "})," el tema, el menu, la barra superior, etc."]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Tema principal"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"color-scheme-mode",id:"light-mode-check",defaultChecked:t.theme=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"light-mode-check",children:t.theme=="dark"?"Modo oscuro":"Modo claro"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Ancho de la ventana"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"width",id:"fluid-check",defaultChecked:t.width=="boxed"}),o.jsx("label",{className:"form-check-label",htmlFor:"fluid-check",children:t.width=="boxed"?"Encuadrado":"Completo"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Posicion del menu y el nabvar"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"menus-position",id:"fixed-check",defaultChecked:t.menuPosition=="scrollable"}),o.jsx("label",{className:"form-check-label",htmlFor:"fixed-check",children:t.menuPosition=="scrollable"?"Posision dinamica":"Posicion fija"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color del menu"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"light",id:"light-check",defaultChecked:!t.menuColor||t.menuColor=="light"}),o.jsx("label",{className:"form-check-label",htmlFor:"light-check",children:"Claro"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"dark",id:"dark-check",defaultChecked:t.menuColor=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"dark-check",children:"Oscuro"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"brand",id:"brand-check",defaultChecked:t.menuColor=="brand"}),o.jsx("label",{className:"form-check-label",htmlFor:"brand-check",children:"Brand"})]}),o.jsxs("div",{className:"form-check form-switch mb-3",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"gradient",id:"gradient-check",defaultChecked:t.menuColor=="gradient"}),o.jsx("label",{className:"form-check-label",htmlFor:"gradient-check",children:"Gradiente"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Medida del menu"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"default",id:"default-size-check",defaultChecked:!t.menuSize||t.menuSize=="default"}),o.jsx("label",{className:"form-check-label",htmlFor:"default-size-check",children:"Por defecto"})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"condensed",id:"condensed-check",defaultChecked:t.menuSize=="condensed"}),o.jsxs("label",{className:"form-check-label",htmlFor:"condensed-check",children:["Condensado ",o.jsx("small",{children:"(Tamao extra pequeo)"})]})]}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"compact",id:"compact-check",defaultChecked:t.menuSize=="compact"}),o.jsxs("label",{className:"form-check-label",htmlFor:"compact-check",children:["Compacto ",o.jsx("small",{children:"(Tamao pequeo)"})]})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Informacion del Usuario (Menu)"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"leftsidebar-user",value:"fixed",id:"sidebaruser-check",defaultChecked:t.userInfo!=!1}),o.jsx("label",{className:"form-check-label",htmlFor:"sidebaruser-check",children:t.userInfo=="false"?"Ocultar":"Mostrar"})]}),o.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color de la barra superior"}),o.jsxs("div",{className:"form-check form-switch mb-1",children:[o.jsx("input",{type:"checkbox",className:"form-check-input",name:"topbar-color",value:"dark",id:"darktopbar-check",defaultChecked:t.navbarColor=="dark"}),o.jsx("label",{className:"form-check-label",htmlFor:"darktopbar-check",children:t.navbarColor=="dark"?"Oscuro":"Acorde al cuerpo"})]}),o.jsx("div",{className:"d-grid mt-4",children:o.jsx("button",{className:"btn btn-primary",id:"resetBtn",children:"Restablecer"})})]})})})]})})},Hs={null:{icon:"mdi mdi-qrcode",text:"Inicia sesin en WhatsApp",color:"dark"},verifying:{icon:"fa fa-spinner fa-spin",text:"Verificando sesin...",color:"secondary"},qr:{icon:"mdi mdi-qrcode-scan",text:"Escanea el QR",color:"danger"},loading_screen:{icon:"fa fa-spinner fa-spin",text:"Cargando...",color:"secondary"},authenticated:{icon:"fa fa-check",text:"Sesin activa",color:"primary"},ready:{icon:"fa fa-check",text:"Sesin activa y lista",color:"success"},close:{icon:"fa fa-warning",text:"Sesin cerrada",color:"danger"}},Na=({id:t,uuid:e,name:n,person:r,session:s,APP_PROTOCOL:i,APP_DOMAIN:a})=>{const c=t!=s.business_id,l=async()=>{await Ri.activeService(e)&&location.reload()};return o.jsx("span",{className:"dropdown-item notify-item",style:{cursor:c?"pointer":"default"},onClick:l,children:o.jsxs("div",{className:"d-flex align-items-start",children:[o.jsx("img",{className:"d-flex me-2 rounded-circle",src:`//${a}/api/logo/thumbnail/null`,alt:n,height:"32"}),o.jsxs("div",{className:"w-100",children:[o.jsx("h5",{className:`m-0 font-14 ${!c&&"text-primary"} text-truncate`,style:{width:"115px"},children:n}),o.jsxs("span",{className:"font-12 mb-0",children:["RUC: ",r.document_number]})]})]})})};class Rn{constructor(){Q(this,"path",null);Q(this,"hasFiles",!1);Q(this,"controller",null);Q(this,"paginateSufix",null);Q(this,"paginate",async e=>{this.controller.abort("Nothing"),this.controller=new AbortController;const n=this.controller.signal,s=await(await fetch(`/api/${this.path}/paginate${this.paginateSufix?`/${this.paginateSufix}`:""}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:B.JSON.stringify(e),signal:n})).text();return B.JSON.parseable(s)?B.JSON.parse(s):null});Q(this,"save",async(e,n=!0)=>{try{let r=!1,s={};if(this.hasFiles){const i=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:e});r=i.ok,s=B.JSON.parseable(await i.text())}else{const i=await B.Fetch(`/api/${this.path}`,{method:"POST",body:B.JSON.stringify(e)});r=i.status,s=i.result}if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),s.data||!0}catch(r){return n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),null}});Q(this,"status",async({id:e,status:n})=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:B.JSON.stringify({id:e,status:n})});if(!r)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),s}catch(r){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),!1}});Q(this,"boolean",async({id:e,field:n,value:r},s=!0)=>{try{const{status:i,result:a}=await B.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:B.JSON.stringify({id:e,field:n,value:r})});if(!i)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return s&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:a.message,type:"success"}),!0}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});Q(this,"delete",async e=>{try{const{status:n,result:r}=await B.Fetch(`/api/${this.path}/${e}`,{method:"DELETE"});if(!n)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(n){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:n.message,type:"danger"}),!1}});this.controller=new AbortController}}class wr extends Rn{constructor(){super(...arguments);Q(this,"path","notifications")}}const Ca=new wr,ka=({id:t,name:e,message:n,description:r,created_at:s,link_to:i,creator:a,icon:c,APP_DOMAIN:l})=>{const f=async()=>{await Ca.boolean({id:t,field:"seen",value:!0},!1)&&(location.href=`${i}#${t}`)};return o.jsx(o.Fragment,{children:o.jsxs("div",{style:{cursor:"pointer"},className:"dropdown-item notify-item",onClick:f,children:[o.jsx("div",{className:`notify-icon ${a?"":"bg-primary"}`,children:a?o.jsxs("div",{className:"position-relative",children:[o.jsx("img",{src:`//${l}/api/profile/${a.relative_id}`,onError:d=>{d.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"img-fluid rounded-circle",alt:a.fullname}),o.jsx("span",{className:"position-absolute top-100 translate-middle badge rounded-pill bg-success text-sm",children:o.jsx("small",{className:c})})]}):o.jsx("i",{className:c})}),o.jsx("p",{className:"notify-details mb-0",style:{paddingLeft:"8px"},children:e}),o.jsx("p",{className:"text-muted mb-1 user-msg",style:{paddingLeft:"8px"},children:n}),r&&o.jsx("p",{className:"notify-details mb-1 border py-1 px-2",style:{borderRadius:"4px",textWrap:"wrap",maxHeight:"48px",overflow:"hidden",lineClamp:2,textOverflow:"ellipsis",WebkitLineClamp:2,display:"-webkit-box",WebkitBoxOrient:"vertical"},children:o.jsx("small",{children:r})}),o.jsx("p",{className:"text-muted mb-0 user-msg",children:o.jsx("small",{children:moment(s).format("LLL")})})]})})},tt=Object.create(null);tt.open="0";tt.close="1";tt.ping="2";tt.pong="3";tt.message="4";tt.upgrade="5";tt.noop="6";const fn=Object.create(null);Object.keys(tt).forEach(t=>{fn[tt[t]]=t});const tr={type:"error",data:"parser error"},Ws=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Xs=typeof ArrayBuffer=="function",Ys=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Er=({type:t,data:e},n,r)=>Ws&&e instanceof Blob?n?r(e):Jr(e,r):Xs&&(e instanceof ArrayBuffer||Ys(e))?n?r(e):Jr(new Blob([e]),r):r(tt[t]+(e||"")),Jr=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Gr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Fn;function ja(t,e){if(Ws&&t.data instanceof Blob)return t.data.arrayBuffer().then(Gr).then(e);if(Xs&&(t.data instanceof ArrayBuffer||Ys(t.data)))return e(Gr(t.data));Er(t,!1,n=>{Fn||(Fn=new TextEncoder),e(Fn.encode(n))})}const Qr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",It=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Qr.length;t++)It[Qr.charCodeAt(t)]=t;const Oa=t=>{let e=t.length*.75,n=t.length,r,s=0,i,a,c,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),d=new Uint8Array(f);for(r=0;r<n;r+=4)i=It[t.charCodeAt(r)],a=It[t.charCodeAt(r+1)],c=It[t.charCodeAt(r+2)],l=It[t.charCodeAt(r+3)],d[s++]=i<<2|a>>4,d[s++]=(a&15)<<4|c>>2,d[s++]=(c&3)<<6|l&63;return f},Sa=typeof ArrayBuffer=="function",Nr=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ks(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Ra(t.substring(1),e)}:fn[n]?t.length>1?{type:fn[n],data:t.substring(1)}:{type:fn[n]}:tr},Ra=(t,e)=>{if(Sa){const n=Oa(t);return Ks(n,e)}else return{base64:!0,data:t}},Ks=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Js="",Aa=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,a)=>{Er(i,!1,c=>{r[a]=c,++s===n&&e(r.join(Js))})})},Ta=(t,e)=>{const n=t.split(Js),r=[];for(let s=0;s<n.length;s++){const i=Nr(n[s],e);if(r.push(i),i.type==="error")break}return r};function Da(){return new TransformStream({transform(t,e){ja(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let Un;function an(t){return t.reduce((e,n)=>e+n.length,0)}function cn(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function _a(t,e){Un||(Un=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,c){for(n.push(a);;){if(r===0){if(an(n)<1)break;const l=cn(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(an(n)<2)break;const l=cn(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(an(n)<8)break;const l=cn(n,8),f=new DataView(l.buffer,l.byteOffset,l.length),d=f.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(tr);break}s=d*Math.pow(2,32)+f.getUint32(4),r=3}else{if(an(n)<s)break;const l=cn(n,s);c.enqueue(Nr(i?l:Un.decode(l),e)),r=0}if(s===0||s>t){c.enqueue(tr);break}}}})}const Gs=4;function ee(t){if(t)return La(t)}function La(t){for(var e in ee.prototype)t[e]=ee.prototype[e];return t}ee.prototype.on=ee.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ee.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ee.prototype.off=ee.prototype.removeListener=ee.prototype.removeAllListeners=ee.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ee.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};ee.prototype.emitReserved=ee.prototype.emit;ee.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ee.prototype.hasListeners=function(t){return!!this.listeners(t).length};const An=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),_e=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ba="arraybuffer";function Qs(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Ma=_e.setTimeout,Ia=_e.clearTimeout;function Tn(t,e){e.useNativeTimers?(t.setTimeoutFn=Ma.bind(_e),t.clearTimeoutFn=Ia.bind(_e)):(t.setTimeoutFn=_e.setTimeout.bind(_e),t.clearTimeoutFn=_e.clearTimeout.bind(_e))}const Pa=1.33;function $a(t){return typeof t=="string"?Fa(t):Math.ceil((t.byteLength||t.size)*Pa)}function Fa(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Zs(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ua(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function qa(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class za extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Cr extends ee{constructor(e){super(),this.writable=!1,Tn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new za(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Nr(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Ua(e);return n.length?"?"+n:""}}class Va extends Cr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ta(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Aa(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Zs()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let ei=!1;try{ei=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ha=ei;function Wa(){}class Xa extends Va{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Qe extends ee{constructor(e,n,r){super(),this.createRequest=e,Tn(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Qs(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Qe.requestsCount++,Qe.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Wa,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qe.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Qe.requestsCount=0;Qe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Zr);else if(typeof addEventListener=="function"){const t="onpagehide"in _e?"pagehide":"unload";addEventListener(t,Zr,!1)}}function Zr(){for(let t in Qe.requests)Qe.requests.hasOwnProperty(t)&&Qe.requests[t].abort()}const Ya=function(){const t=ti({xdomain:!1});return t&&t.responseType!==null}();class Ka extends Xa{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Ya&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Qe(ti,this.uri(),e)}}function ti(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ha))return new XMLHttpRequest}catch{}if(!e)try{return new _e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ni=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ja extends Cr{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=ni?{}:Qs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;Er(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&An(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Zs()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const qn=_e.WebSocket||_e.MozWebSocket;class Ga extends Ja{createSocket(e,n,r){return ni?new qn(e,n,r):n?new qn(e,n):new qn(e)}doWrite(e,n){this.ws.send(n)}}class Qa extends Cr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=_a(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=Da();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&An(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Za={websocket:Ga,webtransport:Qa,polling:Ka},ec=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nr(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=ec.exec(t||""),i={},a=14;for(;a--;)i[tc[a]]=s[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=nc(i,i.path),i.queryKey=rc(i,i.query),i}function nc(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function rc(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const rr=typeof addEventListener=="function"&&typeof removeEventListener=="function",hn=[];rr&&addEventListener("offline",()=>{hn.forEach(t=>t())},!1);class ft extends ee{constructor(e,n){if(super(),this.binaryType=Ba,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=nr(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=nr(n.host).host);Tn(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qa(this.opts.query)),rr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},hn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Gs,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ft.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ft.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=$a(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,An(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ft.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),rr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=hn.indexOf(this._offlineEventListener);r!==-1&&hn.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ft.protocol=Gs;class sc extends ft{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ft.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ft.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const a=h=>{const v=new Error("probe error: "+h);v.transport=n.name,i(),this.emitReserved("upgradeError",v)};function c(){a("transport closed")}function l(){a("socket closed")}function f(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",c),this.off("close",l),this.off("upgrading",f)};n.once("open",s),n.once("error",a),n.once("close",c),this.once("close",l),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let ic=class extends sc{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Za[s]).filter(s=>!!s)),super(e,r)}};function oc(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=nr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const ac=typeof ArrayBuffer=="function",cc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,ri=Object.prototype.toString,lc=typeof Blob=="function"||typeof Blob<"u"&&ri.call(Blob)==="[object BlobConstructor]",dc=typeof File=="function"||typeof File<"u"&&ri.call(File)==="[object FileConstructor]";function kr(t){return ac&&(t instanceof ArrayBuffer||cc(t))||lc&&t instanceof Blob||dc&&t instanceof File}function pn(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(pn(t[n]))return!0;return!1}if(kr(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return pn(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&pn(t[n]))return!0;return!1}function uc(t){const e=[],n=t.data,r=t;return r.data=sr(n,e),r.attachments=e.length,{packet:r,buffers:e}}function sr(t,e){if(!t)return t;if(kr(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=sr(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=sr(t[r],e));return n}return t}function fc(t,e){return t.data=ir(t.data,e),delete t.attachments,t}function ir(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ir(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ir(t[n],e));return t}const hc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pc=5;var H;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class mc{constructor(e){this.replacer=e}encode(e){return(e.type===H.EVENT||e.type===H.ACK)&&pn(e)?this.encodeAsBinary({type:e.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===H.BINARY_EVENT||e.type===H.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=uc(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function es(t){return Object.prototype.toString.call(t)==="[object Object]"}class jr extends ee{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===H.BINARY_EVENT;r||n.type===H.BINARY_ACK?(n.type=r?H.EVENT:H.ACK,this.reconstructor=new gc(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(kr(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(H[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(jr.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case H.CONNECT:return es(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||es(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&hc.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class gc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=fc(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jr,Encoder:mc,get PacketType(){return H},protocol:pc},Symbol.toStringTag,{value:"Module"}));function ze(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const bc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class si extends ee{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ze(e,"open",this.onopen.bind(this)),ze(e,"packet",this.onpacket.bind(this)),ze(e,"error",this.onerror.bind(this)),ze(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(bc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:H.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),a.id=d}const c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},s),a=(...c)=>{this.io.clearTimeoutFn(i),n.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(a,c)=>a?s(a):r(c);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case H.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(e);break;case H.ACK:case H.BINARY_ACK:this.onack(e);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:H.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Tt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Tt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Tt.prototype.reset=function(){this.attempts=0};Tt.prototype.setMin=function(t){this.ms=t};Tt.prototype.setMax=function(t){this.max=t};Tt.prototype.setJitter=function(t){this.jitter=t};class or extends ee{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Tn(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Tt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||vc;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ic(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ze(n,"open",function(){r.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=ze(n,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ze(e,"ping",this.onping.bind(this)),ze(e,"data",this.ondata.bind(this)),ze(e,"error",this.onerror.bind(this)),ze(e,"close",this.onclose.bind(this)),ze(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){An(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new si(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Bt={};function mn(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=oc(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,a=Bt[s]&&i in Bt[s].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return c?l=new or(r,e):(Bt[s]||(Bt[s]=new or(r,e)),l=Bt[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(mn,{Manager:or,Socket:si,io:mn,connect:mn});var Ee="top",Be="bottom",Me="right",Ne="left",Or="auto",Zt=[Ee,Be,Me,Ne],Ct="start",Yt="end",yc="clippingParents",ii="viewport",Mt="popper",xc="reference",ts=Zt.reduce(function(t,e){return t.concat([e+"-"+Ct,e+"-"+Yt])},[]),oi=[].concat(Zt,[Or]).reduce(function(t,e){return t.concat([e,e+"-"+Ct,e+"-"+Yt])},[]),wc="beforeRead",Ec="read",Nc="afterRead",Cc="beforeMain",kc="main",jc="afterMain",Oc="beforeWrite",Sc="write",Rc="afterWrite",Ac=[wc,Ec,Nc,Cc,kc,jc,Oc,Sc,Rc];function nt(t){return t?(t.nodeName||"").toLowerCase():null}function Oe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bt(t){var e=Oe(t).Element;return t instanceof e||t instanceof Element}function Le(t){var e=Oe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Sr(t){if(typeof ShadowRoot>"u")return!1;var e=Oe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Tc(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Le(i)||!nt(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(a){var c=s[a];c===!1?i.removeAttribute(a):i.setAttribute(a,c===!0?"":c)}))})}function Dc(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=a.reduce(function(l,f){return l[f]="",l},{});!Le(s)||!nt(s)||(Object.assign(s.style,c),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const ai={name:"applyStyles",enabled:!0,phase:"write",fn:Tc,effect:Dc,requires:["computeStyles"]};function Ze(t){return t.split("-")[0]}var vt=Math.max,En=Math.min,kt=Math.round;function ar(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ci(){return!/^((?!chrome|android).)*safari/i.test(ar())}function jt(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Le(t)&&(s=t.offsetWidth>0&&kt(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&kt(r.height)/t.offsetHeight||1);var a=bt(t)?Oe(t):window,c=a.visualViewport,l=!ci()&&n,f=(r.left+(l&&c?c.offsetLeft:0))/s,d=(r.top+(l&&c?c.offsetTop:0))/i,h=r.width/s,v=r.height/i;return{width:h,height:v,top:d,right:f+h,bottom:d+v,left:f,x:f,y:d}}function Rr(t){var e=jt(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function li(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Sr(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function st(t){return Oe(t).getComputedStyle(t)}function _c(t){return["table","td","th"].indexOf(nt(t))>=0}function ht(t){return((bt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Dn(t){return nt(t)==="html"?t:t.assignedSlot||t.parentNode||(Sr(t)?t.host:null)||ht(t)}function ns(t){return!Le(t)||st(t).position==="fixed"?null:t.offsetParent}function Lc(t){var e=/firefox/i.test(ar()),n=/Trident/i.test(ar());if(n&&Le(t)){var r=st(t);if(r.position==="fixed")return null}var s=Dn(t);for(Sr(s)&&(s=s.host);Le(s)&&["html","body"].indexOf(nt(s))<0;){var i=st(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function en(t){for(var e=Oe(t),n=ns(t);n&&_c(n)&&st(n).position==="static";)n=ns(n);return n&&(nt(n)==="html"||nt(n)==="body"&&st(n).position==="static")?e:n||Lc(t)||e}function Ar(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ut(t,e,n){return vt(t,En(e,n))}function Bc(t,e,n){var r=Ut(t,e,n);return r>n?n:r}function di(){return{top:0,right:0,bottom:0,left:0}}function ui(t){return Object.assign({},di(),t)}function fi(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Mc=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ui(typeof e!="number"?e:fi(e,Zt))};function Ic(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,c=Ze(n.placement),l=Ar(c),f=[Ne,Me].indexOf(c)>=0,d=f?"height":"width";if(!(!i||!a)){var h=Mc(s.padding,n),v=Rr(i),g=l==="y"?Ee:Ne,E=l==="y"?Be:Me,m=n.rects.reference[d]+n.rects.reference[l]-a[l]-n.rects.popper[d],x=a[l]-n.rects.reference[l],N=en(i),C=N?l==="y"?N.clientHeight||0:N.clientWidth||0:0,k=m/2-x/2,u=h[g],y=C-v[d]-h[E],w=C/2-v[d]/2+k,j=Ut(u,w,y),S=l;n.modifiersData[r]=(e={},e[S]=j,e.centerOffset=j-w,e)}}function Pc(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||li(e.elements.popper,s)&&(e.elements.arrow=s))}const $c={name:"arrow",enabled:!0,phase:"main",fn:Ic,effect:Pc,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ot(t){return t.split("-")[1]}var Fc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Uc(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:kt(n*s)/s||0,y:kt(r*s)/s||0}}function rs(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,a=t.offsets,c=t.position,l=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,v=a.x,g=v===void 0?0:v,E=a.y,m=E===void 0?0:E,x=typeof d=="function"?d({x:g,y:m}):{x:g,y:m};g=x.x,m=x.y;var N=a.hasOwnProperty("x"),C=a.hasOwnProperty("y"),k=Ne,u=Ee,y=window;if(f){var w=en(n),j="clientHeight",S="clientWidth";if(w===Oe(n)&&(w=ht(n),st(w).position!=="static"&&c==="absolute"&&(j="scrollHeight",S="scrollWidth")),w=w,s===Ee||(s===Ne||s===Me)&&i===Yt){u=Be;var T=h&&w===y&&y.visualViewport?y.visualViewport.height:w[j];m-=T-r.height,m*=l?1:-1}if(s===Ne||(s===Ee||s===Be)&&i===Yt){k=Me;var A=h&&w===y&&y.visualViewport?y.visualViewport.width:w[S];g-=A-r.width,g*=l?1:-1}}var D=Object.assign({position:c},f&&Fc),I=d===!0?Uc({x:g,y:m},Oe(n)):{x:g,y:m};if(g=I.x,m=I.y,l){var P;return Object.assign({},D,(P={},P[u]=C?"0":"",P[k]=N?"0":"",P.transform=(y.devicePixelRatio||1)<=1?"translate("+g+"px, "+m+"px)":"translate3d("+g+"px, "+m+"px, 0)",P))}return Object.assign({},D,(e={},e[u]=C?m+"px":"",e[k]=N?g+"px":"",e.transform="",e))}function qc(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,c=n.roundOffsets,l=c===void 0?!0:c,f={placement:Ze(e.placement),variation:Ot(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rs(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rs(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const zc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qc,data:{}};var ln={passive:!0};function Vc(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,a=r.resize,c=a===void 0?!0:a,l=Oe(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&f.forEach(function(d){d.addEventListener("scroll",n.update,ln)}),c&&l.addEventListener("resize",n.update,ln),function(){i&&f.forEach(function(d){d.removeEventListener("scroll",n.update,ln)}),c&&l.removeEventListener("resize",n.update,ln)}}const Hc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vc,data:{}};var Wc={left:"right",right:"left",bottom:"top",top:"bottom"};function gn(t){return t.replace(/left|right|bottom|top/g,function(e){return Wc[e]})}var Xc={start:"end",end:"start"};function ss(t){return t.replace(/start|end/g,function(e){return Xc[e]})}function Tr(t){var e=Oe(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Dr(t){return jt(ht(t)).left+Tr(t).scrollLeft}function Yc(t,e){var n=Oe(t),r=ht(t),s=n.visualViewport,i=r.clientWidth,a=r.clientHeight,c=0,l=0;if(s){i=s.width,a=s.height;var f=ci();(f||!f&&e==="fixed")&&(c=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:c+Dr(t),y:l}}function Kc(t){var e,n=ht(t),r=Tr(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=vt(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=vt(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+Dr(t),l=-r.scrollTop;return st(s||n).direction==="rtl"&&(c+=vt(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:c,y:l}}function _r(t){var e=st(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function hi(t){return["html","body","#document"].indexOf(nt(t))>=0?t.ownerDocument.body:Le(t)&&_r(t)?t:hi(Dn(t))}function qt(t,e){var n;e===void 0&&(e=[]);var r=hi(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Oe(r),a=s?[i].concat(i.visualViewport||[],_r(r)?r:[]):r,c=e.concat(a);return s?c:c.concat(qt(Dn(a)))}function cr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Jc(t,e){var n=jt(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function is(t,e,n){return e===ii?cr(Yc(t,n)):bt(e)?Jc(e,n):cr(Kc(ht(t)))}function Gc(t){var e=qt(Dn(t)),n=["absolute","fixed"].indexOf(st(t).position)>=0,r=n&&Le(t)?en(t):t;return bt(r)?e.filter(function(s){return bt(s)&&li(s,r)&&nt(s)!=="body"}):[]}function Qc(t,e,n,r){var s=e==="clippingParents"?Gc(t):[].concat(e),i=[].concat(s,[n]),a=i[0],c=i.reduce(function(l,f){var d=is(t,f,r);return l.top=vt(d.top,l.top),l.right=En(d.right,l.right),l.bottom=En(d.bottom,l.bottom),l.left=vt(d.left,l.left),l},is(t,a,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function pi(t){var e=t.reference,n=t.element,r=t.placement,s=r?Ze(r):null,i=r?Ot(r):null,a=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,l;switch(s){case Ee:l={x:a,y:e.y-n.height};break;case Be:l={x:a,y:e.y+e.height};break;case Me:l={x:e.x+e.width,y:c};break;case Ne:l={x:e.x-n.width,y:c};break;default:l={x:e.x,y:e.y}}var f=s?Ar(s):null;if(f!=null){var d=f==="y"?"height":"width";switch(i){case Ct:l[f]=l[f]-(e[d]/2-n[d]/2);break;case Yt:l[f]=l[f]+(e[d]/2-n[d]/2);break}}return l}function Kt(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,a=i===void 0?t.strategy:i,c=n.boundary,l=c===void 0?yc:c,f=n.rootBoundary,d=f===void 0?ii:f,h=n.elementContext,v=h===void 0?Mt:h,g=n.altBoundary,E=g===void 0?!1:g,m=n.padding,x=m===void 0?0:m,N=ui(typeof x!="number"?x:fi(x,Zt)),C=v===Mt?xc:Mt,k=t.rects.popper,u=t.elements[E?C:v],y=Qc(bt(u)?u:u.contextElement||ht(t.elements.popper),l,d,a),w=jt(t.elements.reference),j=pi({reference:w,element:k,placement:s}),S=cr(Object.assign({},k,j)),T=v===Mt?S:w,A={top:y.top-T.top+N.top,bottom:T.bottom-y.bottom+N.bottom,left:y.left-T.left+N.left,right:T.right-y.right+N.right},D=t.modifiersData.offset;if(v===Mt&&D){var I=D[s];Object.keys(A).forEach(function(P){var F=[Me,Be].indexOf(P)>=0?1:-1,_=[Ee,Be].indexOf(P)>=0?"y":"x";A[P]+=I[_]*F})}return A}function Zc(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,c=n.flipVariations,l=n.allowedAutoPlacements,f=l===void 0?oi:l,d=Ot(r),h=d?c?ts:ts.filter(function(E){return Ot(E)===d}):Zt,v=h.filter(function(E){return f.indexOf(E)>=0});v.length===0&&(v=h);var g=v.reduce(function(E,m){return E[m]=Kt(t,{placement:m,boundary:s,rootBoundary:i,padding:a})[Ze(m)],E},{});return Object.keys(g).sort(function(E,m){return g[E]-g[m]})}function el(t){if(Ze(t)===Or)return[];var e=gn(t);return[ss(t),e,ss(e)]}function tl(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,c=a===void 0?!0:a,l=n.fallbackPlacements,f=n.padding,d=n.boundary,h=n.rootBoundary,v=n.altBoundary,g=n.flipVariations,E=g===void 0?!0:g,m=n.allowedAutoPlacements,x=e.options.placement,N=Ze(x),C=N===x,k=l||(C||!E?[gn(x)]:el(x)),u=[x].concat(k).reduce(function(ce,le){return ce.concat(Ze(le)===Or?Zc(e,{placement:le,boundary:d,rootBoundary:h,padding:f,flipVariations:E,allowedAutoPlacements:m}):le)},[]),y=e.rects.reference,w=e.rects.popper,j=new Map,S=!0,T=u[0],A=0;A<u.length;A++){var D=u[A],I=Ze(D),P=Ot(D)===Ct,F=[Ee,Be].indexOf(I)>=0,_=F?"width":"height",z=Kt(e,{placement:D,boundary:d,rootBoundary:h,altBoundary:v,padding:f}),O=F?P?Me:Ne:P?Be:Ee;y[_]>w[_]&&(O=gn(O));var M=gn(O),W=[];if(i&&W.push(z[I]<=0),c&&W.push(z[O]<=0,z[M]<=0),W.every(function(ce){return ce})){T=D,S=!1;break}j.set(D,W)}if(S)for(var Y=E?3:1,ae=function(le){var J=u.find(function(Ie){var se=j.get(Ie);if(se)return se.slice(0,le).every(function(pe){return pe})});if(J)return T=J,"break"},X=Y;X>0;X--){var Z=ae(X);if(Z==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const nl={name:"flip",enabled:!0,phase:"main",fn:tl,requiresIfExists:["offset"],data:{_skip:!1}};function os(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function as(t){return[Ee,Me,Be,Ne].some(function(e){return t[e]>=0})}function rl(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,a=Kt(e,{elementContext:"reference"}),c=Kt(e,{altBoundary:!0}),l=os(a,r),f=os(c,s,i),d=as(l),h=as(f);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const sl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rl};function il(t,e,n){var r=Ze(t),s=[Ne,Ee].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],c=i[1];return a=a||0,c=(c||0)*s,[Ne,Me].indexOf(r)>=0?{x:c,y:a}:{x:a,y:c}}function ol(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,a=oi.reduce(function(d,h){return d[h]=il(h,e.rects,i),d},{}),c=a[e.placement],l=c.x,f=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=a}const al={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ol};function cl(t){var e=t.state,n=t.name;e.modifiersData[n]=pi({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const ll={name:"popperOffsets",enabled:!0,phase:"read",fn:cl,data:{}};function dl(t){return t==="x"?"y":"x"}function ul(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,a=n.altAxis,c=a===void 0?!1:a,l=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.padding,v=n.tether,g=v===void 0?!0:v,E=n.tetherOffset,m=E===void 0?0:E,x=Kt(e,{boundary:l,rootBoundary:f,padding:h,altBoundary:d}),N=Ze(e.placement),C=Ot(e.placement),k=!C,u=Ar(N),y=dl(u),w=e.modifiersData.popperOffsets,j=e.rects.reference,S=e.rects.popper,T=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,A=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(w){if(i){var P,F=u==="y"?Ee:Ne,_=u==="y"?Be:Me,z=u==="y"?"height":"width",O=w[u],M=O+x[F],W=O-x[_],Y=g?-S[z]/2:0,ae=C===Ct?j[z]:S[z],X=C===Ct?-S[z]:-j[z],Z=e.elements.arrow,ce=g&&Z?Rr(Z):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:di(),J=le[F],Ie=le[_],se=Ut(0,j[z],ce[z]),pe=k?j[z]/2-Y-se-J-A.mainAxis:ae-se-J-A.mainAxis,U=k?-j[z]/2+Y+se+Ie+A.mainAxis:X+se+Ie+A.mainAxis,Se=e.elements.arrow&&en(e.elements.arrow),me=Se?u==="y"?Se.clientTop||0:Se.clientLeft||0:0,Re=(P=D==null?void 0:D[u])!=null?P:0,be=O+pe-Re-me,Pe=O+U-Re,Ae=Ut(g?En(M,be):M,O,g?vt(W,Pe):W);w[u]=Ae,I[u]=Ae-O}if(c){var it,pt=u==="x"?Ee:Ne,ot=u==="x"?Be:Me,ie=w[y],ke=y==="y"?"height":"width",We=ie+x[pt],Xe=ie-x[ot],at=[Ee,Ne].indexOf(N)!==-1,yt=(it=D==null?void 0:D[y])!=null?it:0,xt=at?We:ie-j[ke]-S[ke]-yt+A.altAxis,$e=at?ie+j[ke]+S[ke]-yt-A.altAxis:Xe,Fe=g&&at?Bc(xt,ie,$e):Ut(g?xt:We,ie,g?$e:Xe);w[y]=Fe,I[y]=Fe-ie}e.modifiersData[r]=I}}const fl={name:"preventOverflow",enabled:!0,phase:"main",fn:ul,requiresIfExists:["offset"]};function hl(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function pl(t){return t===Oe(t)||!Le(t)?Tr(t):hl(t)}function ml(t){var e=t.getBoundingClientRect(),n=kt(e.width)/t.offsetWidth||1,r=kt(e.height)/t.offsetHeight||1;return n!==1||r!==1}function gl(t,e,n){n===void 0&&(n=!1);var r=Le(e),s=Le(e)&&ml(e),i=ht(e),a=jt(t,s,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((nt(e)!=="body"||_r(i))&&(c=pl(e)),Le(e)?(l=jt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Dr(i))),{x:a.left+c.scrollLeft-l.x,y:a.top+c.scrollTop-l.y,width:a.width,height:a.height}}function vl(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(c){if(!n.has(c)){var l=e.get(c);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function bl(t){var e=vl(t);return Ac.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function yl(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function xl(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var cs={placement:"bottom",modifiers:[],strategy:"absolute"};function ls(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function wl(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?cs:s;return function(c,l,f){f===void 0&&(f=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},cs,i),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},h=[],v=!1,g={state:d,setOptions:function(N){var C=typeof N=="function"?N(d.options):N;m(),d.options=Object.assign({},i,d.options,C),d.scrollParents={reference:bt(c)?qt(c):c.contextElement?qt(c.contextElement):[],popper:qt(l)};var k=bl(xl([].concat(r,d.options.modifiers)));return d.orderedModifiers=k.filter(function(u){return u.enabled}),E(),g.update()},forceUpdate:function(){if(!v){var N=d.elements,C=N.reference,k=N.popper;if(ls(C,k)){d.rects={reference:gl(C,en(k),d.options.strategy==="fixed"),popper:Rr(k)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(A){return d.modifiersData[A.name]=Object.assign({},A.data)});for(var u=0;u<d.orderedModifiers.length;u++){if(d.reset===!0){d.reset=!1,u=-1;continue}var y=d.orderedModifiers[u],w=y.fn,j=y.options,S=j===void 0?{}:j,T=y.name;typeof w=="function"&&(d=w({state:d,options:S,name:T,instance:g})||d)}}}},update:yl(function(){return new Promise(function(x){g.forceUpdate(),x(d)})}),destroy:function(){m(),v=!0}};if(!ls(c,l))return g;g.setOptions(f).then(function(x){!v&&f.onFirstUpdate&&f.onFirstUpdate(x)});function E(){d.orderedModifiers.forEach(function(x){var N=x.name,C=x.options,k=C===void 0?{}:C,u=x.effect;if(typeof u=="function"){var y=u({state:d,name:N,instance:g,options:k}),w=function(){};h.push(y||w)}})}function m(){h.forEach(function(x){return x()}),h=[]}return g}}var El=[Hc,ll,zc,ai,al,nl,fl,$c,sl],Nl=wl({defaultModifiers:El}),Cl="tippy-box",mi="tippy-content",kl="tippy-backdrop",gi="tippy-arrow",vi="tippy-svg-arrow",gt={passive:!0,capture:!0},bi=function(){return document.body};function zn(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Lr(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function yi(t,e){return typeof t=="function"?t.apply(void 0,e):t}function ds(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function jl(t){return t.split(/\s+/).filter(Boolean)}function wt(t){return[].concat(t)}function us(t,e){t.indexOf(e)===-1&&t.push(e)}function Ol(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Sl(t){return t.split("-")[0]}function Nn(t){return[].slice.call(t)}function fs(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function zt(){return document.createElement("div")}function _n(t){return["Element","Fragment"].some(function(e){return Lr(t,e)})}function Rl(t){return Lr(t,"NodeList")}function Al(t){return Lr(t,"MouseEvent")}function Tl(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Dl(t){return _n(t)?[t]:Rl(t)?Nn(t):Array.isArray(t)?t:Nn(document.querySelectorAll(t))}function Vn(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function hs(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function _l(t){var e,n=wt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Ll(t,e){var n=e.clientX,r=e.clientY;return t.every(function(s){var i=s.popperRect,a=s.popperState,c=s.props,l=c.interactiveBorder,f=Sl(a.placement),d=a.modifiersData.offset;if(!d)return!0;var h=f==="bottom"?d.top.y:0,v=f==="top"?d.bottom.y:0,g=f==="right"?d.left.x:0,E=f==="left"?d.right.x:0,m=i.top-r+h>l,x=r-i.bottom-v>l,N=i.left-n+g>l,C=n-i.right-E>l;return m||x||N||C})}function Hn(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,n)})}function ps(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ge={isTouch:!1},ms=0;function Bl(){Ge.isTouch||(Ge.isTouch=!0,window.performance&&document.addEventListener("mousemove",xi))}function xi(){var t=performance.now();t-ms<20&&(Ge.isTouch=!1,document.removeEventListener("mousemove",xi)),ms=t}function Ml(){var t=document.activeElement;if(Tl(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Il(){document.addEventListener("touchstart",Bl,gt),window.addEventListener("blur",Ml)}var Pl=typeof window<"u"&&typeof document<"u",$l=Pl?!!window.msCrypto:!1,Fl={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ul={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ve=Object.assign({appendTo:bi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Fl,Ul),ql=Object.keys(Ve),zl=function(e){var n=Object.keys(e);n.forEach(function(r){Ve[r]=e[r]})};function wi(t){var e=t.plugins||[],n=e.reduce(function(r,s){var i=s.name,a=s.defaultValue;if(i){var c;r[i]=t[i]!==void 0?t[i]:(c=Ve[i])!=null?c:a}return r},{});return Object.assign({},t,n)}function Vl(t,e){var n=e?Object.keys(wi(Object.assign({},Ve,{plugins:e}))):ql,r=n.reduce(function(s,i){var a=(t.getAttribute("data-tippy-"+i)||"").trim();if(!a)return s;if(i==="content")s[i]=a;else try{s[i]=JSON.parse(a)}catch{s[i]=a}return s},{});return r}function gs(t,e){var n=Object.assign({},e,{content:yi(e.content,[t])},e.ignoreAttributes?{}:Vl(t,e.plugins));return n.aria=Object.assign({},Ve.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Hl=function(){return"innerHTML"};function lr(t,e){t[Hl()]=e}function vs(t){var e=zt();return t===!0?e.className=gi:(e.className=vi,_n(t)?e.appendChild(t):lr(e,t)),e}function bs(t,e){_n(e.content)?(lr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?lr(t,e.content):t.textContent=e.content)}function dr(t){var e=t.firstElementChild,n=Nn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(mi)}),arrow:n.find(function(r){return r.classList.contains(gi)||r.classList.contains(vi)}),backdrop:n.find(function(r){return r.classList.contains(kl)})}}function Ei(t){var e=zt(),n=zt();n.className=Cl,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=zt();r.className=mi,r.setAttribute("data-state","hidden"),bs(r,t.props),e.appendChild(n),n.appendChild(r),s(t.props,t.props);function s(i,a){var c=dr(e),l=c.box,f=c.content,d=c.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(i.content!==a.content||i.allowHTML!==a.allowHTML)&&bs(f,t.props),a.arrow?d?i.arrow!==a.arrow&&(l.removeChild(d),l.appendChild(vs(a.arrow))):l.appendChild(vs(a.arrow)):d&&l.removeChild(d)}return{popper:e,onUpdate:s}}Ei.$$tippy=!0;var Wl=1,dn=[],Wn=[];function Xl(t,e){var n=gs(t,Object.assign({},Ve,wi(fs(e)))),r,s,i,a=!1,c=!1,l=!1,f=!1,d,h,v,g=[],E=ds(be,n.interactiveDebounce),m,x=Wl++,N=null,C=Ol(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},u={id:x,reference:t,popper:zt(),popperInstance:N,props:n,state:k,plugins:C,clearDelayTimeouts:xt,setProps:$e,setContent:Fe,show:mt,hide:nn,hideWithInteractivity:Ye,enable:at,disable:yt,unmount:rn,destroy:Ln};if(!n.render)return u;var y=n.render(u),w=y.popper,j=y.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+u.id,u.popper=w,t._tippy=u,w._tippy=u;var S=C.map(function(b){return b.fn(u)}),T=t.hasAttribute("aria-expanded");return Se(),Y(),O(),M("onCreate",[u]),n.showOnCreate&&We(),w.addEventListener("mouseenter",function(){u.props.interactive&&u.state.isVisible&&u.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){u.props.interactive&&u.props.trigger.indexOf("mouseenter")>=0&&F().addEventListener("mousemove",E)}),u;function A(){var b=u.props.touch;return Array.isArray(b)?b:[b,0]}function D(){return A()[0]==="hold"}function I(){var b;return!!((b=u.props.render)!=null&&b.$$tippy)}function P(){return m||t}function F(){var b=P().parentNode;return b?_l(b):document}function _(){return dr(w)}function z(b){return u.state.isMounted&&!u.state.isVisible||Ge.isTouch||d&&d.type==="focus"?0:zn(u.props.delay,b?0:1,Ve.delay)}function O(b){b===void 0&&(b=!1),w.style.pointerEvents=u.props.interactive&&!b?"":"none",w.style.zIndex=""+u.props.zIndex}function M(b,R,L){if(L===void 0&&(L=!0),S.forEach(function(q){q[b]&&q[b].apply(q,R)}),L){var K;(K=u.props)[b].apply(K,R)}}function W(){var b=u.props.aria;if(b.content){var R="aria-"+b.content,L=w.id,K=wt(u.props.triggerTarget||t);K.forEach(function(q){var de=q.getAttribute(R);if(u.state.isVisible)q.setAttribute(R,de?de+" "+L:L);else{var ye=de&&de.replace(L,"").trim();ye?q.setAttribute(R,ye):q.removeAttribute(R)}})}}function Y(){if(!(T||!u.props.aria.expanded)){var b=wt(u.props.triggerTarget||t);b.forEach(function(R){u.props.interactive?R.setAttribute("aria-expanded",u.state.isVisible&&R===P()?"true":"false"):R.removeAttribute("aria-expanded")})}}function ae(){F().removeEventListener("mousemove",E),dn=dn.filter(function(b){return b!==E})}function X(b){if(!(Ge.isTouch&&(l||b.type==="mousedown"))){var R=b.composedPath&&b.composedPath()[0]||b.target;if(!(u.props.interactive&&ps(w,R))){if(wt(u.props.triggerTarget||t).some(function(L){return ps(L,R)})){if(Ge.isTouch||u.state.isVisible&&u.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[u,b]);u.props.hideOnClick===!0&&(u.clearDelayTimeouts(),u.hide(),c=!0,setTimeout(function(){c=!1}),u.state.isMounted||J())}}}function Z(){l=!0}function ce(){l=!1}function le(){var b=F();b.addEventListener("mousedown",X,!0),b.addEventListener("touchend",X,gt),b.addEventListener("touchstart",ce,gt),b.addEventListener("touchmove",Z,gt)}function J(){var b=F();b.removeEventListener("mousedown",X,!0),b.removeEventListener("touchend",X,gt),b.removeEventListener("touchstart",ce,gt),b.removeEventListener("touchmove",Z,gt)}function Ie(b,R){pe(b,function(){!u.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&R()})}function se(b,R){pe(b,R)}function pe(b,R){var L=_().box;function K(q){q.target===L&&(Hn(L,"remove",K),R())}if(b===0)return R();Hn(L,"remove",h),Hn(L,"add",K),h=K}function U(b,R,L){L===void 0&&(L=!1);var K=wt(u.props.triggerTarget||t);K.forEach(function(q){q.addEventListener(b,R,L),g.push({node:q,eventType:b,handler:R,options:L})})}function Se(){D()&&(U("touchstart",Re,{passive:!0}),U("touchend",Pe,{passive:!0})),jl(u.props.trigger).forEach(function(b){if(b!=="manual")switch(U(b,Re),b){case"mouseenter":U("mouseleave",Pe);break;case"focus":U($l?"focusout":"blur",Ae);break;case"focusin":U("focusout",Ae);break}})}function me(){g.forEach(function(b){var R=b.node,L=b.eventType,K=b.handler,q=b.options;R.removeEventListener(L,K,q)}),g=[]}function Re(b){var R,L=!1;if(!(!u.state.isEnabled||it(b)||c)){var K=((R=d)==null?void 0:R.type)==="focus";d=b,m=b.currentTarget,Y(),!u.state.isVisible&&Al(b)&&dn.forEach(function(q){return q(b)}),b.type==="click"&&(u.props.trigger.indexOf("mouseenter")<0||a)&&u.props.hideOnClick!==!1&&u.state.isVisible?L=!0:We(b),b.type==="click"&&(a=!L),L&&!K&&Xe(b)}}function be(b){var R=b.target,L=P().contains(R)||w.contains(R);if(!(b.type==="mousemove"&&L)){var K=ke().concat(w).map(function(q){var de,ye=q._tippy,ct=(de=ye.popperInstance)==null?void 0:de.state;return ct?{popperRect:q.getBoundingClientRect(),popperState:ct,props:n}:null}).filter(Boolean);Ll(K,b)&&(ae(),Xe(b))}}function Pe(b){var R=it(b)||u.props.trigger.indexOf("click")>=0&&a;if(!R){if(u.props.interactive){u.hideWithInteractivity(b);return}Xe(b)}}function Ae(b){u.props.trigger.indexOf("focusin")<0&&b.target!==P()||u.props.interactive&&b.relatedTarget&&w.contains(b.relatedTarget)||Xe(b)}function it(b){return Ge.isTouch?D()!==b.type.indexOf("touch")>=0:!1}function pt(){ot();var b=u.props,R=b.popperOptions,L=b.placement,K=b.offset,q=b.getReferenceClientRect,de=b.moveTransition,ye=I()?dr(w).arrow:null,ct=q?{getBoundingClientRect:q,contextElement:q.contextElement||P()}:t,te={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(je){var ne=je.state;if(I()){var ge=_(),xe=ge.box;["placement","reference-hidden","escaped"].forEach(function(Ue){Ue==="placement"?xe.setAttribute("data-placement",ne.placement):ne.attributes.popper["data-popper-"+Ue]?xe.setAttribute("data-"+Ue,""):xe.removeAttribute("data-"+Ue)}),ne.attributes.popper={}}}},G=[{name:"offset",options:{offset:K}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!de}},te];I()&&ye&&G.push({name:"arrow",options:{element:ye,padding:3}}),G.push.apply(G,(R==null?void 0:R.modifiers)||[]),u.popperInstance=Nl(ct,w,Object.assign({},R,{placement:L,onFirstUpdate:v,modifiers:G}))}function ot(){u.popperInstance&&(u.popperInstance.destroy(),u.popperInstance=null)}function ie(){var b=u.props.appendTo,R,L=P();u.props.interactive&&b===bi||b==="parent"?R=L.parentNode:R=yi(b,[L]),R.contains(w)||R.appendChild(w),u.state.isMounted=!0,pt()}function ke(){return Nn(w.querySelectorAll("[data-tippy-root]"))}function We(b){u.clearDelayTimeouts(),b&&M("onTrigger",[u,b]),le();var R=z(!0),L=A(),K=L[0],q=L[1];Ge.isTouch&&K==="hold"&&q&&(R=q),R?r=setTimeout(function(){u.show()},R):u.show()}function Xe(b){if(u.clearDelayTimeouts(),M("onUntrigger",[u,b]),!u.state.isVisible){J();return}if(!(u.props.trigger.indexOf("mouseenter")>=0&&u.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(b.type)>=0&&a)){var R=z(!1);R?s=setTimeout(function(){u.state.isVisible&&u.hide()},R):i=requestAnimationFrame(function(){u.hide()})}}function at(){u.state.isEnabled=!0}function yt(){u.hide(),u.state.isEnabled=!1}function xt(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(i)}function $e(b){if(!u.state.isDestroyed){M("onBeforeUpdate",[u,b]),me();var R=u.props,L=gs(t,Object.assign({},R,fs(b),{ignoreAttributes:!0}));u.props=L,Se(),R.interactiveDebounce!==L.interactiveDebounce&&(ae(),E=ds(be,L.interactiveDebounce)),R.triggerTarget&&!L.triggerTarget?wt(R.triggerTarget).forEach(function(K){K.removeAttribute("aria-expanded")}):L.triggerTarget&&t.removeAttribute("aria-expanded"),Y(),O(),j&&j(R,L),u.popperInstance&&(pt(),ke().forEach(function(K){requestAnimationFrame(K._tippy.popperInstance.forceUpdate)})),M("onAfterUpdate",[u,b])}}function Fe(b){u.setProps({content:b})}function mt(){var b=u.state.isVisible,R=u.state.isDestroyed,L=!u.state.isEnabled,K=Ge.isTouch&&!u.props.touch,q=zn(u.props.duration,0,Ve.duration);if(!(b||R||L||K)&&!P().hasAttribute("disabled")&&(M("onShow",[u],!1),u.props.onShow(u)!==!1)){if(u.state.isVisible=!0,I()&&(w.style.visibility="visible"),O(),le(),u.state.isMounted||(w.style.transition="none"),I()){var de=_(),ye=de.box,ct=de.content;Vn([ye,ct],0)}v=function(){var G;if(!(!u.state.isVisible||f)){if(f=!0,w.offsetHeight,w.style.transition=u.props.moveTransition,I()&&u.props.animation){var ue=_(),je=ue.box,ne=ue.content;Vn([je,ne],q),hs([je,ne],"visible")}W(),Y(),us(Wn,u),(G=u.popperInstance)==null||G.forceUpdate(),M("onMount",[u]),u.props.animation&&I()&&se(q,function(){u.state.isShown=!0,M("onShown",[u])})}},ie()}}function nn(){var b=!u.state.isVisible,R=u.state.isDestroyed,L=!u.state.isEnabled,K=zn(u.props.duration,1,Ve.duration);if(!(b||R||L)&&(M("onHide",[u],!1),u.props.onHide(u)!==!1)){if(u.state.isVisible=!1,u.state.isShown=!1,f=!1,a=!1,I()&&(w.style.visibility="hidden"),ae(),J(),O(!0),I()){var q=_(),de=q.box,ye=q.content;u.props.animation&&(Vn([de,ye],K),hs([de,ye],"hidden"))}W(),Y(),u.props.animation?I()&&Ie(K,u.unmount):u.unmount()}}function Ye(b){F().addEventListener("mousemove",E),us(dn,E),E(b)}function rn(){u.state.isVisible&&u.hide(),u.state.isMounted&&(ot(),ke().forEach(function(b){b._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Wn=Wn.filter(function(b){return b!==u}),u.state.isMounted=!1,M("onHidden",[u]))}function Ln(){u.state.isDestroyed||(u.clearDelayTimeouts(),u.unmount(),me(),delete t._tippy,u.state.isDestroyed=!0,M("onDestroy",[u]))}}function tn(t,e){e===void 0&&(e={});var n=Ve.plugins.concat(e.plugins||[]);Il();var r=Object.assign({},e,{plugins:n}),s=Dl(t),i=s.reduce(function(a,c){var l=c&&Xl(c,r);return l&&a.push(l),a},[]);return _n(t)?i[0]:i}tn.defaultProps=Ve;tn.setDefaultProps=zl;tn.currentInput=Ge;Object.assign({},ai,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});tn.setDefaultProps({render:Ei});function Ni(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var Ci=typeof window<"u"&&typeof document<"u";function ur(t,e){t&&(typeof t=="function"&&t(e),{}.hasOwnProperty.call(t,"current")&&(t.current=e))}function ys(){return Ci&&document.createElement("div")}function Yl(t){var e={"data-placement":t.placement};return t.referenceHidden&&(e["data-reference-hidden"]=""),t.escaped&&(e["data-escaped"]=""),e}function ki(t,e){if(t===e)return!0;if(typeof t=="object"&&t!=null&&typeof e=="object"&&e!=null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(e.hasOwnProperty(n)){if(!ki(t[n],e[n]))return!1}else return!1;return!0}else return!1}function Kl(t){var e=[];return t.forEach(function(n){e.find(function(r){return ki(n,r)})||e.push(n)}),e}function Jl(t,e){var n,r;return Object.assign({},e,{popperOptions:Object.assign({},t.popperOptions,e.popperOptions,{modifiers:Kl([].concat(((n=t.popperOptions)==null?void 0:n.modifiers)||[],((r=e.popperOptions)==null?void 0:r.modifiers)||[]))})})}var Xn=Ci?p.useLayoutEffect:p.useEffect;function Gl(t){var e=p.useRef();return e.current||(e.current=typeof t=="function"?t():t),e.current}function xs(t,e,n){n.split(/\s+/).forEach(function(r){r&&t.classList[e](r)})}var Ql={name:"className",defaultValue:"",fn:function(e){var n=e.popper.firstElementChild,r=function(){var c;return!!((c=e.props.render)!=null&&c.$$tippy)};function s(){e.props.className&&!r()||xs(n,"add",e.props.className)}function i(){r()&&xs(n,"remove",e.props.className)}return{onCreate:s,onBeforeUpdate:i,onAfterUpdate:s}}};function Zl(t){function e(n){var r=n.children,s=n.content,i=n.visible,a=n.singleton,c=n.render,l=n.reference,f=n.disabled,d=f===void 0?!1:f,h=n.ignoreAttributes,v=h===void 0?!0:h;n.__source,n.__self;var g=Ni(n,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),E=i!==void 0,m=a!==void 0,x=p.useState(!1),N=x[0],C=x[1],k=p.useState({}),u=k[0],y=k[1],w=p.useState(),j=w[0],S=w[1],T=Gl(function(){return{container:ys(),renders:1}}),A=Object.assign({ignoreAttributes:v},g,{content:T.container});E&&(A.trigger="manual",A.hideOnClick=!1),m&&(d=!0);var D=A,I=A.plugins||[];c&&(D=Object.assign({},A,{plugins:m&&a.data!=null?[].concat(I,[{fn:function(){return{onTrigger:function(z,O){var M=a.data.children.find(function(W){var Y=W.instance;return Y.reference===O.currentTarget});z.state.$$activeSingletonInstance=M.instance,S(M.content)}}}}]):I,render:function(){return{popper:T.container}}}));var P=[l].concat(r?[r.type]:[]);return Xn(function(){var F=l;l&&l.hasOwnProperty("current")&&(F=l.current);var _=t(F||T.ref||ys(),Object.assign({},D,{plugins:[Ql].concat(A.plugins||[])}));return T.instance=_,d&&_.disable(),i&&_.show(),m&&a.hook({instance:_,content:s,props:D,setSingletonContent:S}),C(!0),function(){_.destroy(),a==null||a.cleanup(_)}},P),Xn(function(){var F;if(T.renders===1){T.renders++;return}var _=T.instance;_.setProps(Jl(_.props,D)),(F=_.popperInstance)==null||F.forceUpdate(),d?_.disable():_.enable(),E&&(i?_.show():_.hide()),m&&a.hook({instance:_,content:s,props:D,setSingletonContent:S})}),Xn(function(){var F;if(c){var _=T.instance;_.setProps({popperOptions:Object.assign({},_.props.popperOptions,{modifiers:[].concat((((F=_.props.popperOptions)==null?void 0:F.modifiers)||[]).filter(function(z){var O=z.name;return O!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(O){var M,W=O.state,Y=(M=W.modifiersData)==null?void 0:M.hide;(u.placement!==W.placement||u.referenceHidden!==(Y==null?void 0:Y.isReferenceHidden)||u.escaped!==(Y==null?void 0:Y.hasPopperEscaped))&&y({placement:W.placement,referenceHidden:Y==null?void 0:Y.isReferenceHidden,escaped:Y==null?void 0:Y.hasPopperEscaped}),W.attributes.popper={}}}])})})}},[u.placement,u.referenceHidden,u.escaped].concat(P)),he.createElement(he.Fragment,null,r?p.cloneElement(r,{ref:function(_){T.ref=_,ur(r.ref,_)}}):null,N&&Et.createPortal(c?c(Yl(u),j,T.instance):s,T.container))}return e}var ed=function(t,e){return p.forwardRef(function(r,s){var i=r.children,a=Ni(r,["children"]);return he.createElement(t,Object.assign({},e,a),i?p.cloneElement(i,{ref:function(l){ur(s,l),ur(i.ref,l)}}):null)})},Cn=ed(Zl(tn));class td extends Rn{constructor(){super(...arguments);Q(this,"path","atalaya/users-by-services-by-business");Q(this,"authorize",async n=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}/authorize`,{method:"POST",body:JSON.stringify(n)});if(!r)throw new Error((s==null?void 0:s.message)||"Ocurrio un error al abrir el servicio");return B.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(r){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),!1}})}}const nd=we.APP_CORRELATIVE,ji=we.EVENTS_URL;console.log("Evento url:",ji);const qe=mn(`${ji}/${nd}`,{autoConnect:!1}),rd=new Audio("/assets/sounds/notification.wav"),Br=(t={})=>{const[e,n]=p.useState(!1),[r,s]=p.useState(0),i={environment:we.APP_ENV,business_id:vn.business_id,user_id:vn.service_user.id},a=async()=>{const c=new wr,{totalCount:l,status:f}=await c.paginate({requireTotalCount:!0,requireData:!1});f==200&&s(l)};return p.useEffect(()=>(qe.connected||qe.connect(),console.log("Conectando a socket..."),qe.on("connect",()=>{qe.emit("register_filters",{...i,...t})}),qe.on("filters_registered",({service:c,filters:l})=>{n(!0)}),qe.on("notification",c=>{if(Ti(c,{icon:o.jsx("i",{className:"mdi mdi-bell"})}),a(),!document.hasFocus()){const l=new BroadcastChannel("focus-check");l.postMessage("check-focus"),l.onmessage=f=>{f.data},setTimeout(()=>{rd.play(),l.close()},100)}}),qe.on("error",c=>{console.error(" Error:",c)}),qe.on("disconnect",()=>n(!1)),()=>{console.log("Apagando eventos socket")}),[null]),p.useEffect(()=>{qe.connected&&qe.emit("update_filters",{...i,...t})},[JSON.stringify({...i,...t})]),{wsActive:e,socket:qe,notificationsCount:r}},Je=({id:t,className:e="",href:n,icon:r,children:s,badge:i,pinned:a,setPinned:c,pinLabel:l})=>{const[f,d]=p.useState(!1),h=p.useRef(null),v=m=>{m.preventDefault(),d(!0)},g=()=>{const m=a.some(x=>x.href===n);c(m?x=>x.filter(N=>N.href!==n):x=>[...x,{icon:r,href:n,name:l??s}]),d(!1)};p.useEffect(()=>{const m=x=>{h.current&&!h.current.contains(x.target)&&d(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const E=a.some(m=>m.href===n);return o.jsxs("div",{ref:h,className:`dropdown-item notify-item ${location.pathname==n?"menuitem-active":""} ${e}`,onContextMenu:v,style:{position:"relative"},children:[o.jsxs("a",{href:n,style:{color:"unset"},children:[o.jsx("i",{className:`${r} me-1`}),o.jsx("span",{children:s})]}),f&&o.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:20,zIndex:1e3,display:"block",float:"left",minWidth:"8rem",padding:"0.125rem 0",margin:"0.125rem 0 0",fontSize:"1rem",color:"#212529",textAlign:"left",listStyle:"none",backgroundColor:"#fff",backgroundClip:"padding-box",border:"1px solid rgba(0,0,0,.15)",borderRadius:"0.25rem"},children:o.jsxs("button",{className:"dropdown-item",onClick:g,children:[o.jsx("i",{className:`mdi ${E?"mdi-pin-off":"mdi-pin"} me-1`}),E?"Desfijar":"Fijar"]})})]})},ws=new wr,sd=new td;new Audio("/assets/sounds/notification.wav");const id=({can:t,session:e={},services:n,theme:r,setTheme:s,title:i="",wsActive:a,setWsActive:c,whatsappStatus:l,businesses:f,APP_PROTOCOL:d,APP_DOMAIN:h,pinned:v,setPinned:g})=>{const{color:E}=Hs[l],[m,x]=p.useState([]),{notificationsCount:N}=Br();f.filter(({id:y})=>e.business_id!=y);const C=async()=>{if(!$("#notifications").is(":visible"))return;const{data:w,totalCount:j}=await ws.paginate({requireTotalCount:!0});x(w??[])},k=async()=>{await ws.boolean({field:"seen",value:!0},!1),x([])},u=async({correlative:y,i_work:w,status:j})=>{if(!j)return;if(!w){location.href=`${d}://${h}/businesses`;return}await sd.authorize({service:y})&&(location.href=`${d}://${y}.${h}/home`)};return p.useEffect(()=>($(document).on("change","#light-mode-check",y=>{s(y.target.checked?"dark":"light")}),()=>{$(document).off("change","#light-mode-check")}),[r]),p.useEffect(()=>{N>0?document.title=`(${N}) ${i} | Atalaya`:document.title=`${i} | Atalaya`},[N]),p.useEffect(()=>{},[null]),o.jsxs("div",{className:`navbar-custom border-bottom ${r=="light"?"bg-white":""}`,style:{backgroundColor:r=="light"?void 0:"#313844"},children:[o.jsxs("ul",{className:"list-unstyled topnav-menu float-end mb-0",children:[o.jsx("li",{className:"dropdown notification-list d-none d-lg-block",children:o.jsx("div",{className:"nav-link",children:o.jsx("label",{htmlFor:"light-mode-check",type:"button",className:`btn btn-xs ${r=="dark","btn-secondary"} rounded-pill waves-effect waves-light`,children:r=="dark"?o.jsxs(o.Fragment,{children:["Light",o.jsx("span",{className:"btn-label-right ms-1",style:{paddingLeft:"6px"},children:o.jsx("i",{className:"mdi mdi-weather-sunny"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"btn-label me-1",style:{paddingRight:"6px"},children:o.jsx("i",{className:"mdi mdi-moon-waning-crescent"})}),"Dark"]})})})}),t("whatsapp","root","all")&&o.jsx("li",{className:"notification-list topbar-dropdown d-none d-lg-block",children:o.jsx("a",{className:"nav-link waves-effect waves-light","data-bs-toggle":"modal","data-bs-target":"#whatsapp-modal",children:o.jsxs("span",{className:"position-relative",children:[o.jsx("i",{className:"mdi mdi-whatsapp noti-icon"}),o.jsx("span",{className:`position-absolute top-0 start-100 translate-middle p-1 bg-${E} rounded-circle`,children:o.jsx("span",{className:"visually-hidden",children:"New alerts"})})]})})}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsxs("a",{className:"nav-link dropdown-toggle waves-effect waves-light driver-js-notifications","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",onClick:C,children:[o.jsx("i",{className:`fe-bell noti-icon rounded-pill ${N>0&&"pulse"}`}),N>0?o.jsx("span",{className:"badge bg-danger rounded-circle noti-icon-badge",children:N}):""]}),o.jsxs("div",{id:"notifications",className:"dropdown-menu dropdown-menu-end dropdown-lg",children:[o.jsx("div",{className:"dropdown-item noti-title",children:o.jsxs("h5",{className:"m-0",children:[N>0&&o.jsx("span",{className:"float-end",children:o.jsx(Cn,{content:"Marcar todo como leido",children:o.jsxs("span",{className:"link text-dark",style:{cursor:"pointer"},onClick:k,children:[o.jsx("i",{className:"mdi mdi-check-all me-1"}),o.jsx("small",{children:"Ledo"})]})})}),"Notificaciones"]})}),o.jsx("div",{className:"noti-scroll",style:{maxHeight:"230px",overflowY:"auto"},children:m.length>0?m.map((y,w)=>o.jsx(ka,{...y,APP_DOMAIN:h},`notification-${w}`)):o.jsx("div",{className:"text-center",style:{overflow:"hidden",padding:"0px 20px"},children:o.jsx("span",{className:"text-muted",children:"No tienes notificaciones nuevas"})})})]})]}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsx("a",{className:"nav-link dropdown-toggle waves-effect waves-light","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",children:o.jsx("i",{className:"fe-grid noti-icon"})}),o.jsxs("div",{className:"dropdown-menu dropdown-menu-end dropdown-lg",children:[o.jsx("div",{className:"dropdown-header noti-title pb-0",children:o.jsx("h5",{className:"m-0",children:"Aplicaciones"})}),o.jsxs("div",{className:"row g-0 gy-2 px-2 py-2",children:[o.jsx("div",{className:"col-4 text-center",children:o.jsxs("button",{onClick:()=>window.location.href=`//${h}/account`,className:"d-block btn-ligth bg-white rounded waves-effect p-1 pt-2 border-0 w-100",title:"Mi cuenta","data-bs-toggle":"tooltip","data-bs-placement":"bottom",children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${e.relative_id}`,onError:y=>{y.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},alt:"Mi cuenta",className:"mb-1 rounded-circle",style:{width:"40px",height:"40px"}}),o.jsx("div",{className:"small fw-semibold",children:"Mi cuenta"})]})}),n.map((y,w)=>o.jsx("div",{className:"col-4 text-center",children:o.jsxs("button",{disabled:!y.status||!y.i_work,onClick:()=>u(y),className:"d-block btn-ligth bg-white rounded waves-effect p-1 pt-2 border-0 w-100",style:{cursor:y.status&&y.i_work?"pointer":"not-allowed"},title:y.description,children:[o.jsxs("div",{className:"position-relative d-inline-block mb-1",children:[o.jsx("img",{src:`//${y.correlative}.${we.APP_DOMAIN}/assets/img/icon.svg`,onError:j=>j.target.src=`//${h}/assets/img/icon.svg`,alt:y.name,style:{width:"40px",height:"40px",objectFit:"contain",objectPosition:"center",opacity:y.status&&y.i_work?1:.75}}),!y.status&&o.jsx("span",{className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-danger",style:{fontSize:"8px"},children:"Proximamente"}),y.status&&!y.i_work&&o.jsx("span",{className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"8px"},children:"Por activar"})]}),o.jsx("div",{className:"small fw-semibold text-truncate",children:y.name})]})},w))]})]})]}),o.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[o.jsxs("a",{className:"nav-link dropdown-toggle nav-user me-0 waves-effect waves-light driver-js-account","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",children:[o.jsxs("div",{className:"d-inline-block position-relative",style:{height:"max-content"},children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${e.relative_id}`,alt:"user-image",onError:y=>{y.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"rounded-circle",style:{objectFit:"cover",objectPosition:"center"}}),o.jsx("span",{className:`d-block ${a?"bg-success":"bg-danger"} position-absolute rounded-circle`,style:{width:"8px",height:"8px",bottom:"16px",right:"0px"}})]}),o.jsxs("span",{className:"pro-user-name ms-1",children:[e.name.split(" ")[0]," ",e.lastname.split(" ")[0],o.jsx("i",{className:"mdi mdi-chevron-down"})]})]}),o.jsxs("div",{className:"dropdown-menu dropdown-menu-end profile-dropdown driver-js-account-dropdown ",onClick:y=>y.stopPropagation(),children:[o.jsx("div",{className:"dropdown-header noti-title",children:o.jsx("h6",{className:"text-overflow m-0",children:"Bienvenido !"})}),o.jsxs("a",{href:`//${h}/profile`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"fe-user"}),o.jsx("span",{children:"Mi perfil"})]}),o.jsxs("a",{href:`//${h}/account`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"mdi mdi-account-key-outline"}),o.jsx("span",{children:"Mi cuenta"})]}),o.jsx("div",{className:"dropdown-divider"}),(t("users","root","all","list")||t("roles","root","all","list")||t("permissions","root","all","list"))&&o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"#users-roles",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"users-roles",children:[o.jsx("i",{className:"mdi mdi-account-lock me-1"}),o.jsx("span",{children:"Usuarios y roles"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"users-roles",children:[t("users","root","all","list")&&o.jsx(Je,{icon:"mdi mdi-account",href:"/users",pinned:v,setPinned:g,children:"Usuarios"}),t("roles","root","all","list")&&o.jsx(Je,{icon:"mdi mdi-account-convert",href:"/roles",pinned:v,setPinned:g,children:"Roles"})]})]}),o.jsx(Je,{icon:"mdi mdi-message-bulleted",href:"/default-messages",pinned:v,setPinned:g,children:"Mensajes predeter..."}),o.jsx(Je,{icon:"mdi mdi-database",href:"/repository",pinned:v,setPinned:g,children:"Repositorio"}),t("apikeys","root","all","list")&&o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"#integrations",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"integrations",children:[o.jsx("i",{className:"mdi mdi-api me-1"}),o.jsx("span",{children:"Integraciones"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"integrations",children:[o.jsx(Je,{icon:"mdi mdi-webhook",href:"/webhooks",pinned:v,setPinned:g,children:"Redes sociales"}),o.jsx(Je,{icon:"mdi mdi-form-textbox",href:"/apikeys",pinned:v,setPinned:g,children:"Formulario Externo"}),o.jsx(Je,{icon:"mdi mdi-image-filter-center-focus-strong",href:"/pixels",pinned:v,setPinned:g,children:"Atalaya Pixel"})]})]}),(t("tables","root","all","list")||t("statuses","root","all","list")||t("types","root","all","list"))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"dropdown-header noti-title",children:o.jsx("h6",{className:"text-overflow m-0",children:"Menus del sistema"})}),o.jsxs("a",{href:"#maintenance",className:"dropdown-item notify-item","data-bs-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"maintenance",children:[o.jsx("i",{className:"mdi mdi-application-cog me-1"}),o.jsx("span",{children:"Mantenimiento"}),o.jsx("i",{className:"mdi mdi-chevron-down float-end"})]}),o.jsxs("div",{className:"collapse ms-3",id:"maintenance",children:[t("statuses","root","all","list")&&o.jsx(Je,{icon:"mdi mdi-format-list-checks",href:"/statuses",pinned:v,setPinned:g,children:"Estados"}),t("types","root","all","list")&&o.jsx(Je,{icon:"mdi mdi-format-list-text",href:"/types",pinned:v,setPinned:g,children:"Tipos"})]}),t("settings","root","all","list")&&o.jsx(Je,{icon:"mdi mdi-cogs",href:"/settings",pinned:v,setPinned:g,children:"Configuraciones"})]}),o.jsx("div",{className:"dropdown-divider"}),o.jsxs("a",{href:"#",className:"dropdown-item notify-item",onClick:Ai,children:[o.jsx("i",{className:"fe-log-out"}),o.jsx("span",{children:"Cerrar sesion"})]})]})]})]}),o.jsxs("div",{className:"logo-box border-bottom",children:[o.jsxs("a",{href:"/",className:"logo logo-light text-center",children:[o.jsx("span",{className:"logo-sm",children:o.jsx("img",{src:"/assets/img/icon.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"22"})}),o.jsx("span",{className:"logo-lg",children:o.jsx("img",{src:"/assets/img/logo.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"32"})})]}),o.jsxs("a",{href:"/",className:"logo logo-dark text-center",children:[o.jsx("span",{className:"logo-sm",children:o.jsx("img",{src:"/assets/img/icon-dark.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"22"})}),o.jsx("span",{className:"logo-lg",children:o.jsx("img",{src:"/assets/img/logo-dark.svg?v=ef450a74-d0cd-4e77-be41-d3063bb50bc8",alt:"",height:"32"})})]})]}),o.jsx("ul",{className:"list-unstyled topnav-menu topnav-menu-left mb-0",children:o.jsx("li",{children:o.jsx("button",{className:"button-menu-mobile disable-btn waves-effect",children:o.jsx("i",{className:"fe-menu"})})})}),o.jsx("div",{className:"clearfix"})]})},ve=({id:t,className:e="",href:n,icon:r,children:s,badge:i,pinned:a,setPinned:c,pinLabel:l})=>{const[f,d]=p.useState(!1),h=p.useRef(null),v=m=>{m.preventDefault(),d(!0)},g=()=>{const m=a.some(x=>x.href===n);c(m?x=>x.filter(N=>N.href!==n):x=>[...x,{icon:r,href:n,name:l??s}]),d(!1)};p.useEffect(()=>{const m=x=>{h.current&&!h.current.contains(x.target)&&d(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const E=a.some(m=>m.href===n);return o.jsxs("li",{ref:h,className:`${location.pathname==n?"menuitem-active":""} ${e}`,onContextMenu:v,style:{position:"relative"},children:[o.jsxs("a",{id:t,href:n,className:`${location.pathname==n?"active badge-soft-blue":""} d-flex align-items-center gap-1`,children:[o.jsx("i",{className:`${r} mdi-24px`}),o.jsxs("span",{style:{fontSize:"16px"},children:[" ",s," "]}),i&&o.jsx("span",{className:"badge bg-info text-truncate",children:i})]}),f&&o.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:20,zIndex:1e3,display:"block",float:"left",minWidth:"8rem",padding:"0.125rem 0",margin:"0.125rem 0 0",fontSize:"1rem",color:"#212529",textAlign:"left",listStyle:"none",backgroundColor:"#fff",backgroundClip:"padding-box",border:"1px solid rgba(0,0,0,.15)",borderRadius:"0.25rem"},children:o.jsxs("button",{className:"dropdown-item",onClick:g,children:[o.jsx("i",{className:`mdi ${E?"mdi-pin-off":"mdi-pin"} me-1`}),E?"Desfijar":"Fijar"]})})]})},Yn=({title:t,icon:e,children:n})=>{var a;const r=[];Array.isArray(n)?n.forEach(c=>{var l;return r.push((l=c==null?void 0:c.props)==null?void 0:l.href)}):r.push((a=n==null?void 0:n.props)==null?void 0:a.href);const s=r.filter(Boolean).some(c=>location.pathname.includes(c)),i=`item-${crypto.randomUUID()}`;return o.jsxs("li",{children:[o.jsxs("a",{href:`#${i}`,"data-bs-toggle":"collapse","aria-expanded":s,className:"d-flex align-items-center gap-1",children:[o.jsx("i",{className:`${e} mdi-24px`}),o.jsxs("span",{style:{fontSize:"16px"},children:[" ",t," "]}),o.jsx("span",{className:"menu-arrow"})]}),o.jsx("div",{className:`collapse ${s&&"show"}`,id:i,style:{paddingRight:"8px"},children:o.jsx("ul",{className:"nav-second-level",children:n})})]})};let Kn=new AbortController;class od extends Rn{constructor(){super(...arguments);Q(this,"path","messages");Q(this,"countUnSeenMessages",async(n=[])=>{var r;Kn.abort(),Kn=new AbortController;try{const s=await fetch(`/api/${this.path}/count-unseen`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify({assigneds:n}),signal:Kn.signal});if(!s.ok)throw new Error(((r=await s.json())==null?void 0:r.message)??"Error inesperado");const i=await s.json();return(i==null?void 0:i.data)??0}catch(s){return s.name!=="AbortError"&&console.log("Error:",s.message),null}})}}const ad=(t,e=[])=>{const n=`susid-${t}`,[r,s]=p.useState(()=>{try{const c=B.Local.get(n);return c||e}catch(c){return console.warn("Error leyendo localStorage:",c),e}}),i=p.useRef(new BroadcastChannel(n));return p.useEffect(()=>{const c=i.current;c.onmessage=f=>{Array.isArray(f.data)&&(s(f.data),B.Local.set(n,f.data))};const l=f=>{if(f.key===n&&f.newValue)try{const d=B.Local.get(n);Array.isArray(d)&&s(d)}catch{console.warn("Error parseando localStorage",f.newValue)}};return window.addEventListener("storage",l),()=>{c.close(),window.removeEventListener("storage",l)}},[n]),[r,c=>{if(!Array.isArray(c)){console.warn("updateSelectedUsers esperaba un array, recibi:",c);return}s(c),B.Local.set(n,c),i.current.postMessage(c)}]},cd=new Audio("/assets/sounds/message.mp3"),ld=new od,dd=({session:t,theme:e,can:n,whatsAppStatus:r,APP_PROTOCOL:s,APP_DOMAIN:i,leadsCount:a,tasksCount:c,businesses:l,wsActive:f,pinned:d,setPinned:h})=>{const[v,g]=p.useState(0),[E]=ad(vn.business_id,[vn.service_user.id]),{socket:m}=Br();let x={};t.is_owner?x={name:"Owner",description:"Persona que crea la empresa"}:x=t.service_user.roles[0]??{name:"Sin rol",description:"El usuario an no tiene un rol asignado"};const N=l.find(({id:y})=>t.business_id==y),C=l.filter(({id:y})=>t.business_id!=y),k=moment(t.birthdate).format("MM-DD")==moment().format("MM-DD"),u=async()=>{const y=await ld.countUnSeenMessages(E);y!==null&&g(y)};return p.useEffect(()=>(m.on("client.updated.menu",y=>{(E.length===0||E.length>0&&E.includes(y.assigned_to))&&y.notify&&cd.play(),u()}),()=>{m.off("client.updated.menu")}),[m,E]),p.useEffect(()=>{u()},[E]),o.jsx("div",{className:"left-side-menu py-0",children:o.jsxs("div",{className:"h-100 pt-3 driver-js-menu","data-simplebar":!0,children:[o.jsxs("div",{className:"user-box w-100 mb-2",style:{padding:"0px 20px"},children:[o.jsxs("div",{className:"position-relative",style:{width:"max-content",height:"max-content"},children:[o.jsx("img",{src:`//${we.APP_DOMAIN}/api/profile/thumbnail/${t.relative_id}?v=${new Date(t.updated_at).getTime()}`,alt:t.name,title:t.name,onError:y=>{y.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},className:"rounded-circle img-thumbnail avatar-md mb-2",style:{padding:0,backgroundColor:"unset",objectFit:"cover",objectPosition:"center"}}),o.jsx("span",{className:`d-block ${f?"bg-success":"bg-danger"} position-absolute rounded-circle`,style:{width:"12px",height:"12px",bottom:"16px",right:"0px"}})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-1",children:[o.jsxs("div",{className:"w-100",style:{maxWidth:"70%"},children:[o.jsxs("span",{className:"user-name h4 mt-0 mb-0 d-block text-truncate",style:{fontFamily:"'Nunito Sans', sans-serif",color:e=="dark"?"#fff":void 0},children:[t.name.split(" ")[0]," ",t.lastname.split(" ")[0],k&&o.jsx(Cn,{content:`Feliz cumpleaos ${t.name}`,arrow:!0,children:o.jsx("i",{className:"fas fa-birthday-cake text-danger ms-1"})})]}),o.jsx("small",{className:"text-muted text-truncate d-block",children:t.email})]}),o.jsx(Cn,{content:x.description,arrow:!0,children:o.jsx("span",{className:"badge bg-soft-primary text-primary rounded-pill",children:x.name})})]})]}),o.jsxs("div",{className:`px-2 py-1 text-center ${C.length>0?"d-block":""}`,style:{position:"relative"},children:[o.jsxs("span",{className:"btn dropdown-toggle waves-effect waves-light d-flex align-items-center justify-content-between gap-1 mx-auto","data-bs-toggle":C.length>0?"dropdown":void 0,role:"button","aria-haspopup":"false","aria-expanded":"false",style:{borderColor:"rgba(187, 187, 187, .25)",width:"200px",boxShadow:"0 0 8px rgba(187, 187, 187, .125)",borderRadius:"8px",cursor:C.length>0?"pointer":"default"},children:[o.jsxs("div",{className:"d-flex align-items-start",children:[o.jsx("img",{className:"d-flex me-2 rounded-circle",src:`//${i}/api/logo/thumbnail/null`,alt:N.name,height:"32"}),o.jsxs("div",{className:"w-100 text-start",children:[o.jsx("h5",{className:"m-0 font-14 text-primary text-truncate",style:{width:"115px"},children:N.name}),o.jsxs("span",{className:"font-12 mb-0",children:["RUC: ",N.person.document_number]})]})]}),C.length>0&&o.jsx("i",{className:"mdi mdi-chevron-down"})]}),C.length>0&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"dropdown-menu dropdown-menu-center profile-dropdown w-full",children:[o.jsx("div",{className:"notification-list",children:C.sort((y,w)=>y.id==t.business_id?-1:1).map((y,w)=>o.jsx(Na,{...y,session:t,APP_PROTOCOL:s,APP_DOMAIN:i},`business-${w}`))}),o.jsx("div",{className:"dropdown-divider"}),o.jsxs("a",{href:`//${i}/businesses`,className:"dropdown-item notify-item",children:[o.jsx("i",{className:"fe-arrow-up-right"}),o.jsx("span",{children:"Otras empresas"})]})]})})]}),o.jsx("div",{id:"sidebar-menu",className:"show",children:o.jsxs("ul",{id:"side-menu",children:[o.jsx("li",{className:"menu-title",children:"Panel de navegacion"}),o.jsxs(Yn,{title:"KPIs",icon:"mdi mdi-chart-donut-variant",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/home",icon:"mdi mdi-account-multiple",pinLabel:"KPIs  Leads",children:"Leads"}),n("dashboard","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/home/projects",icon:"mdi mdi-page-next",pinLabel:"KPIs  Proyectos",children:"Proyectos"})]}),o.jsx(ve,{pinned:d,setPinned:h,href:"/tasks",icon:"mdi mdi-format-list-checks",badge:c>0?c:"",children:"Tareas"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/chat",icon:"mdi mdi-chat",badge:v||void 0,children:"Chat"}),o.jsxs(Yn,{title:"Personas",icon:"mdi mdi-account-group",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/leads",icon:"mdi mdi-account",badge:a>0?a:"",children:"Leads"}),n("clients","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/clients",icon:"mdi mdi-account-multiple",children:"Clientes"}),o.jsx(ve,{pinned:d,setPinned:h,id:"archived-item",href:"/archived",icon:"mdi mdi-archive",pinLabel:"Personas  Archivados",children:"Archivados"})]}),r=="ready"&&o.jsx(ve,{pinned:d,setPinned:h,href:"/messages",icon:"mdi mdi-forum",children:"Mensajes"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/products",icon:"mdi mdi-layers",children:"Productos"}),n("processes","root","all","list")&&o.jsx(ve,{pinned:d,setPinned:h,href:"/processes",icon:"mdi mdi-timeline-text",children:"Procesos"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/campaigns",icon:"mdi mdi-google-ads",children:"Campaas"}),n("projects","root","all","list")&&o.jsxs(Yn,{title:"Proyectos",icon:"mdi mdi-page-next",children:[o.jsx(ve,{pinned:d,setPinned:h,href:"/projects",icon:"mdi mdi-lan-pending",pinLabel:"Proyectos  En curso",children:"En curso"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/done",icon:"mdi mdi-check",pinLabel:"Proyectos  Entregados",children:"Entregados"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/archived",icon:"mdi mdi-archive",pinLabel:"Proyectos  Archivados",children:"Archivados"}),o.jsx(ve,{pinned:d,setPinned:h,href:"/projects/taskboard",icon:"mdi mdi-view-dashboard",pinLabel:"Proyectos  Cuadro de control",children:"Cuadro de control"})]})]})}),o.jsx("div",{className:"clearfix"})]})})},ud=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"footer",children:o.jsx("div",{className:"container-fluid",children:o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-md-6",children:[t,"  Atalaya | Propiedad de ",o.jsx("a",{href:"//mundoweb.pe",children:"Mundo Web"})]}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"text-md-end footer-links d-none d-sm-block",children:[o.jsx("a",{href:"#",children:"Sobre nosotros"}),o.jsx("a",{href:"#",children:"Manual de usuario"}),o.jsx("a",{href:"#",children:"Contactanos"})]})})]})})})};class fd extends Rn{constructor(){super(...arguments);Q(this,"path","whatsapp");Q(this,"verify",async(n=!1)=>{try{const{status:r,result:s}=await B.Fetch(`/api/${this.path}`);return{status:s.status,data:s.data}}catch(r){return console.error(r.message),n&&B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:r.message,type:"danger"}),{status:400,data:null}}});Q(this,"send",async(n,r)=>{try{const{status:s,result:i}=await B.Fetch(`/api/${this.path}/send`,{method:"POST",body:JSON.stringify({client_id:n,message:r})});if(!s)throw new Error((i==null?void 0:i.message)??"Ocurrio un error al enviar el mensaje");return i}catch(s){return console.error(s.message),B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});Q(this,"sendAudio",async(n,r)=>{try{const s=new FormData;s.append("client_id",n),s.append("audio",r);const i=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:s}),a=await i.json();if(!i.ok)throw new Error((a==null?void 0:a.message)??"Ocurrio un error al enviar el mensaje");return a}catch(s){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:s.message,type:"danger"}),!1}});Q(this,"sendImage",async(n,r,s)=>{try{const i=new FormData;i.append("client_id",n),i.append("image",r),s!=null&&s.trim()&&i.append("message",s);const a=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:i}),c=await a.json();if(!a.ok)throw new Error((c==null?void 0:c.message)??"Ocurrio un error al enviar el mensaje");return c}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}});Q(this,"sendDocument",async(n,r,s)=>{try{const i=new FormData;i.append("client_id",n),i.append("document",r),s!=null&&s.trim()&&i.append("message",s);const a=await fetch(`/api/${this.path}/send`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(B.Cookies.get("XSRF-TOKEN"))},body:i}),c=await a.json();if(!a.ok)throw new Error((c==null?void 0:c.message)??"Ocurrio un error al enviar el mensaje");return c}catch(i){return B.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:i.message,type:"danger"}),!1}})}}const hd=new fd;let Te={};const pd=({prefixes:t,status:e,setStatus:n,WA_URL:r,APP_URL:s,session:i,setWAPhone:a})=>{var D,I,P,F,_,z;const c=p.useRef(),l=p.useRef(),f=p.useRef(),{color:d,icon:h,text:v}=Hs[e],[g,E]=p.useState(0),[m,x]=p.useState({}),[N,C]=p.useState(!1),[k,u]=p.useState("51"),y=i.business_uuid,w=async()=>{var W;const{status:O,data:M}=await hd.verify();O==200?(n("ready"),x(M),a(((W=M==null?void 0:M.me)==null?void 0:W.user)||null)):O==404?n("close"):n(null)},j=()=>{C(!0)},S=()=>{var O;(O=Te==null?void 0:Te.close)==null||O.call(Te),C(!1),e!="ready"&&n(null)};p.useEffect(()=>{const O=document.getElementById("whatsapp-modal");return O.addEventListener("show.bs.modal",j),O.addEventListener("hide.bs.modal",S),()=>{O.removeEventListener("show.bs.modal",j),O.removeEventListener("hide.bs.modal",S)}},[e]),p.useEffect(()=>{if(e=="verifying"){const O=new URLSearchParams({session:y});Te=new EventSource(`/api/whatsapp/verify?${O}`),Te.onmessage=({data:M})=>{var Z;if(M=="ping")return console.log("Realtime active");const{status:W,qr:Y,percent:ae,info:X}=JSON.parse(M);switch(W){case"ping":console.log("Evento del servidor");break;case"qr":n("qr"),$(l.current).empty(),new QRCode(l.current,{text:Y,width:200,height:200,colorDark:"#343a40"});break;case"loading_screen":n("loading_screen"),E(ae);break;case"authenticated":n("authenticated");break;case"ready":n("ready"),x(X),a(((Z=X==null?void 0:X.me)==null?void 0:Z.user)||null),Te.close();break;case"close":n("close"),Te.close(),setTimeout(()=>{n("verifying")},5e3);break;default:Te.close();break}},Te.onerror=M=>{console.log("Realtime closed: Perdida de conexion (Timeout)"),n("close"),Te.close(),setTimeout(()=>{n("verifying")},5e3)}}else e==null&&!N&&(console.log("Realtime closed: Modal cerrado"),w())},[e,N]);const T=async()=>{const{isConfirmed:O}=await Di.fire({title:"Ests seguro?",text:"Se cerrar la sesin actual",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});O&&(await B.Fetch("/api/whatsapp",{method:"DELETE"}),B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacin correcta",body:`Se cerr la sesin de ${(m==null?void 0:m.pushname)||"WhatsApp"}`}),x({}),a(null),n(null))},A=async()=>{try{const{status:O,result:M}=await B.Fetch("/api/whatsapp/send",{method:"POST",body:JSON.stringify({phone:`${k}${f.current.value}`,message:`Hola! 
Este es un mensaje de prueba para confirmar que el servicio de WhatsApp est funcionando correctamente.
> Mensaje automtico de verificacin`})});if(!O)throw new Error((M==null?void 0:M.message)||"No se pudo enviar el ping");u("51"),f.current.value="",B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacion correcta",body:`Se envio el ping a ${f.current.value}`})}catch(O){B.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:O.message,type:"danger"})}};return o.jsx("div",{ref:c,id:"whatsapp-modal",className:"modal fade","aria-hidden":"true","data-bs-backdrop":"static",children:o.jsx("div",{className:"modal-dialog modal-sm modal-dialog-centered",children:o.jsx("div",{className:"modal-content",children:o.jsx("div",{className:"modal-body",children:o.jsxs("div",{className:"text-center",children:[o.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 me-2 mt-2","data-bs-dismiss":"modal","aria-label":"Close"}),o.jsx("i",{className:`${h} h1 text-${d} my-2 d-block`}),o.jsxs("h4",{className:"mt-2",children:[v," ",e=="loading_screen"&&g&&`[${g}%]`]}),o.jsxs("div",{className:"position-relative",hidden:e!=="qr",children:[o.jsx("img",{className:"position-absolute",src:`//${we.APP_DOMAIN}/assets/img/icon-border.svg`,alt:"Atalaya",style:{width:"30px",aspectRatio:"30px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),o.jsx("div",{ref:l,id:"qr-code",className:`mt-3 text-center ${e=="qr"?"d-block":"d-none"}`})]}),e==null&&o.jsxs("button",{className:"btn btn-sm btn-dark waves-effect waves-light mt-2",type:"button",onClick:()=>n("verifying"),children:[o.jsx("i",{className:"mdi mdi-qrcode-plus me-1"}),"Generar QR"]}),e=="ready"&&o.jsxs("div",{className:"d-block py-2",children:[o.jsx("img",{className:"d-block mb-2 avatar-md rounded-circle mx-auto",src:(m==null?void 0:m.profile)||`//${we.APP_DOMAIN}/api/profile/thumbnail/undefined`,onError:O=>{O.target.src=`//${we.APP_DOMAIN}/assets/img/user-404.svg`},alt:m==null?void 0:m.pushname}),o.jsx("b",{children:m==null?void 0:m.pushname}),o.jsx("br",{}),o.jsxs("span",{className:"text-muted",children:[(D=m==null?void 0:m.me)==null?void 0:D.user,"@",(I=m==null?void 0:m.me)==null?void 0:I.server]}),o.jsxs("div",{className:"row mt-2",children:[o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-account-multiple h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Contacts"}),o.jsx("div",{children:((P=m==null?void 0:m.count)==null?void 0:P.contacts)||0})]}),o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-chat-processing h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Chats"}),o.jsx("div",{children:((F=m==null?void 0:m.count)==null?void 0:F.chats)||0})]}),o.jsxs("div",{className:"col-4 text-center",children:[o.jsx("i",{className:"mdi mdi-message-text h4 my-0 d-block"}),o.jsx("small",{className:"text-muted",children:"Messages"}),o.jsx("div",{children:((_=m==null?void 0:m.count)==null?void 0:_.messages)||0})]})]}),o.jsxs("div",{className:"mt-3 text-start",children:[o.jsx("label",{htmlFor:"ping-phone-number",className:"form-label mb-1",children:"Enva un ping a:"}),o.jsxs("div",{className:"input-group",children:[o.jsxs("div",{className:"dropdown",children:[o.jsx("button",{className:"btn btn-white btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",style:{minWidth:"10px"},children:o.jsx("span",{className:"d-flex align-items-center",children:(z=t.find(O=>O.realCode==k))==null?void 0:z.beautyCode})}),o.jsx("div",{className:"dropdown-menu",style:{maxHeight:"200px",overflowY:"auto"},children:t.map((O,M)=>o.jsx("button",{className:"dropdown-item",onClick:()=>u(O.realCode),children:o.jsxs("div",{children:[o.jsx("span",{className:"font-emoji",children:O.flag})," ",O.beautyCode,o.jsx("small",{className:"d-block text-muted",children:O.country})]})},M))})]}),o.jsx("input",{ref:f,id:"ping-phone-number",type:"text",className:"form-control form-control-sm",placeholder:"000000000"}),o.jsx(Cn,{content:"Enviar mensaje ping",children:o.jsx("button",{className:"btn btn-sm input-group-text btn-dark waves-effect waves-light",type:"button",onClick:A,children:o.jsx("i",{className:"mdi mdi-arrow-top-right"})})})]})]})]}),e=="ready"&&o.jsx("button",{type:"button",className:"btn btn-danger my-2",onClick:T,children:"Cerrar sesin"})]})})})})})};moment.tz.setDefault("UTC");const md=({item:t})=>{const{attributes:e,listeners:n,setNodeRef:r,transform:s,transition:i}=va({id:t.href}),a={transform:Wt.Transform.toString(s),transition:i};return o.jsxs("a",{ref:r,style:a,href:t.href,className:"d-block btn btn-light d-flex align-items-center gap-1 rounded-pill",...e,...n,children:[o.jsx("i",{className:t.icon}),o.jsx("span",{children:t.name})]})},wd=({session:t,children:e,notificationsCount:n,prefixes:r,title:s,showTitle:i=!0,description:a,floatEnd:c,can:l,WA_URL:f,APP_URL:d,presets:h,businesses:v,services:g,APP_PROTOCOL:E,APP_DOMAIN:m,leadsCount:x,tasksCount:N,setWAPhone:C=()=>{},setThemeParent:k=()=>{}})=>{const u=B.Local.get("adminto_settings")??{},y=B.Local.get("menu-pinned")??[],[w,j]=p.useState(u.theme??"light"),[S,T]=p.useState(null),[A,D]=p.useState(y),{wsActive:I}=Br(),P=Yi(Ir(yr),Ir(vr,{coordinateGetter:xa}));p.useEffect(()=>{k(w)},[w]),p.useEffect(()=>{B.Local.set("menu-pinned",A)},[A]);const F=_=>{const{active:z,over:O}=_;z.id!==O.id&&D(M=>{const W=M.findIndex(X=>X.href===z.id),Y=M.findIndex(X=>X.href===O.id),ae=xr(M,W,Y);return B.Local.set("menu-pinned",ae),ae})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{id:"wrapper",children:[o.jsx(_i,{}),o.jsx(id,{session:t,services:g,theme:w,setTheme:j,title:s,can:l,whatsappStatus:S,businesses:v,APP_DOMAIN:m,APP_PROTOCOL:E,notificationsCount:n,wsActive:I,pinned:A,setPinned:D}),o.jsx(dd,{session:t,theme:w,can:l,presets:h,whatsappStatus:S,APP_DOMAIN:m,businesses:v,APP_PROTOCOL:E,leadsCount:x,tasksCount:N,wsActive:I,pinned:A,setPinned:D}),o.jsxs("div",{className:"content-page",children:[o.jsxs("div",{className:"content",children:[A.length>0&&o.jsx("div",{className:"container-fluid",style:{marginTop:"1rem"},children:o.jsx(Go,{sensors:P,collisionDetection:Ji,onDragEnd:F,children:o.jsx(da,{items:A.map(_=>_.href),strategy:ca,children:o.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[o.jsx("i",{className:"mdi mdi-pin"}),A.map(_=>o.jsx(md,{item:_,onClick:z=>{if(!z.currentTarget.dataset.reordered)return!0;z.preventDefault()}},_.href))]})})})}),o.jsxs("div",{className:"container-fluid mt-2",children:[o.jsxs("div",{className:"mb-2 d-flex flex-wrap gap-2 justify-content-between align-items-center",children:[i&&o.jsxs("div",{children:[o.jsx("h4",{className:"my-0",children:s}),a&&o.jsx("small",{className:"",children:a})]}),o.jsx("div",{children:c})]}),e]})]}),o.jsx(ud,{})]})]}),l("whatsapp","all")&&o.jsx(pd,{session:t,prefixes:r,status:S,setStatus:T,WA_URL:f,APP_URL:d,setWAPhone:C}),o.jsx(Ea,{}),o.jsx("div",{className:"rightbar-overlay"})]})};export{wd as A,Rn as B,od as M,fd as W,ad as a,Cn as i,Br as u};

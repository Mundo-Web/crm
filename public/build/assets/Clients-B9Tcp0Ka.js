import{S as be,A as Ae,i as k}from"./Adminto-JL_ZuMBL.js";import{r as s,R as e,C as Te,c as Fe,m as de,G as fe}from"./CreateReactScript-v7nOh8Hf.js";import{M as q}from"./Modal-BLVTdHgN.js";import{a as G,C as Pe,P as Ge,b as Ee,T as Be}from"./ProductsByClientsRest-DJ2rxyuD.js";import{I as h}from"./InputFormGroup-dsyWDJi7.js";import{T as K}from"./TextareaFormGroup-ESjibmcx.js";import{S as Y,a as Me}from"./SetSelectValue-DtrMp82r.js";import{D as Z}from"./DropdownItem-C2s0hFnT.js";import{D as qe}from"./DropdownEnd-BnPkm9ZQ.js";import{P as ze,a as Ie,A as Ue}from"./AssignUsersModal-CCfLXl9c.js";import{R as g}from"./ReactAppend-FWssHVMA.js";import{P as je,A as Oe,D as Ve}from"./DateRange-DIzuaEyI.js";import{T as We,D as pe}from"./DxPanelButton-Bzzee5ZQ.js";import{T as E}from"./TippyButton-BgogYpFY.js";import{N as J}from"./Number2Currency-e57Tgsuk.js";import{D as He}from"./DxBox-DANuzssx.js";import{D as Qe}from"./Dropdown-DBAUV4s5.js";import{L as Xe}from"./LeadsRest-DkWWIF6d.js";import{r as Ye}from"./server.browser-D_vli4B4.js";const Je=({can:y,client:r,setClient:z,grid2refresh:I,page:B})=>{const x=s.useRef(),o=s.useRef(),p=s.useRef(),w=s.useRef(),b=s.useRef(),m=s.useRef(),[D,N]=s.useState([]),[C,R]=s.useState(!1);s.useEffect(()=>{r.id&&S(),$(x.current).on("hidden.bs.modal",()=>{z({}),N([]),R(!1),p.current.value=null,Y(w.current,null,null),b.current.value=null,m.current.value=null})},[r]);const S=async()=>{const n=await G.byClient(r==null?void 0:r.id);N(n),$(x.current).modal("show")},A=async n=>{n.preventDefault();const d={id:p.current.value||void 0,type_id:w.current.value,client_id:r.id,name:b.current.value,description:m.current.value};await G.save(d)&&($(o.current).modal("hide"),p.current.value=null,Y(w.current,null,null),b.current.value=null,m.current.value=null,await _(),$(I.current).dxDataGrid("instance").refresh())},_=async()=>{const n=await G.byClient(r.id);N(n)},T=async n=>{p.current.value=n.id,Y(w.current,n.type.id,n.type.name),b.current.value=n.name,m.current.value=n.description,$(o.current).modal("show"),R(!0)},F=async n=>{const{isConfirmed:d}=await be.fire({title:"Estas seguro de eliminar esta nota?",text:"No podras revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!d||!await G.delete(n)||(await _(),$(I.current).dxDataGrid("instance").refresh())};return e.createElement(e.Fragment,null,e.createElement(q,{modalRef:x,title:`Notas de ${(r==null?void 0:r.tradename)||(r==null?void 0:r.name)||(r==null?void 0:r.contact_name)}`,size:"full-width",isStatic:!0,hideFooter:!0},e.createElement("div",{style:{height:"calc(100vh - 180px)",overflowY:"auto"}},e.createElement("div",{className:"text-center"},e.createElement("button",{className:"btn btn-primary",type:"button",onClick:()=>$(o.current).modal("show")},"Agregar nota")),e.createElement("hr",{className:"my-2"}),e.createElement("div",{className:"d-flex flex-wrap flex-row justify-content-center gap-2"},D.sort((n,d)=>new Date(d.created_at)-new Date(n.created_at)).map((n,d)=>{const f=moment(n.created_at),j=moment().diff(f,"hours")>12?f.format("lll"):f.fromNow();return e.createElement("div",{key:`note-${d}`,className:"card text-white bg-purple mb-0",style:{width:"100%",maxWidth:"300px",height:"max-content"}},e.createElement("div",{className:"card-body p-2"},e.createElement("div",{className:"d-flex align-items-center border-bottom border-white pb-1 mb-1"},e.createElement("div",{className:"avatar-sm me-2 mb-1"},e.createElement("img",{src:`/api/profile/thumbnail/${n.user.relative_id}?v=${new Date(n.user.updated_at).getTime()}`,className:"img-fluid rounded-circle",alt:"user"})),e.createElement("div",{className:"flex-grow-1 overflow-hidden"},e.createElement("h5",{className:"text-white m-0"},n.user.name," ",n.user.lastname),e.createElement("p",{className:"text-white-50 m-0 font-13 text-truncate"},j)),y(B,"root","all","editnotes","deletenotes")&&e.createElement(qe,null,y(B,"root","all","editnotes")&&e.createElement(Z,{onClick:()=>T(n)},"Editar"),y(B,"root","all","deletenotes")&&e.createElement(Z,{onClick:()=>F(n.id)},"Eliminar"))),e.createElement("blockquote",{className:"card-bodyquote mb-0"},n.name&&e.createElement("b",null,n.name),e.createElement("p",{className:"mb-1"},n.description))))})))),e.createElement(q,{modalRef:o,title:C?"Editar nota":"Agregar nota",size:"sm",onSubmit:A},e.createElement("div",{id:"note-crud-container"},e.createElement("input",{ref:p,type:"hidden"}),e.createElement(Me,{eRef:w,label:"Tipo de nota",col:"col-12",dropdownParent:"#note-crud-container",searchAPI:"/api/types/paginate",searchBy:"name",filter:["table_id","=","c81ad4fb-a895-4f4c-b4b3-5989a7a66a85"],required:!0}),e.createElement(h,{eRef:b,label:"Titulo de la nota"}),e.createElement(K,{eRef:m,label:"Descripcion de la nota",required:!0}))))},P=new Pe,Ke=new Xe,Ze=new G,Le=new Ge,et=({projectStatuses:y,finishedProjectStatus:r,clientStatuses:z,products:I=[],manageStatuses:B,session:x,can:o,noteTypes:p,defaultClientStatus:w,client:b})=>{var se,ne,re,ce,oe,me,ie,ue;const m=s.useRef(),D=s.useRef(),N=s.useRef(),C=s.useRef(),R=s.useRef(),S=s.useRef(),A=s.useRef(),_=s.useRef(),T=s.useRef(),F=s.useRef(),n=s.useRef(),d=s.useRef(),f=s.useRef(),[L,U]=s.useState(!1),[j,ee]=s.useState({}),[Ne,te]=s.useState({}),[ve,tt]=s.useState({}),[ge,he]=s.useState({}),[at,lt]=s.useState([]),[a,O]=s.useState({}),[v,V]=s.useState([]),[W,H]=s.useState([]),ae=t=>{t!=null&&t.id?U(!0):U(!1),$('[href="#client-data"]').addClass("active"),$('[href="#contact-data"]').removeClass("active"),$("#client-data").addClass("active"),$("#contact-data").removeClass("active"),C.current.value=(t==null?void 0:t.id)||null,R.current.value=(t==null?void 0:t.ruc)||null,S.current.value=(t==null?void 0:t.name)||null,A.current.value=(t==null?void 0:t.tradename)||null,_.current.value=(t==null?void 0:t.web_url)||null,T.current.value=(t==null?void 0:t.message)||"Cliente creado desde Atalaya",F.current.value=(t==null?void 0:t.contact_name)||null,n.current.value=(t==null?void 0:t.contact_phone)||null,d.current.value=(t==null?void 0:t.contact_email)||null,f.current.value=(t==null?void 0:t.contact_address)||null,$(D.current).modal("show")},ye=async t=>{t.preventDefault();const l={id:C.current.value||void 0,ruc:R.current.value,name:S.current.value,tradename:A.current.value,web_url:_.current.value,message:T.current.value??"Cliente creado desde Atalaya",contact_name:F.current.value??"",contact_phone:n.current.value??"",contact_email:d.current.value??"",contact_address:f.current.value??"",status_id:C.current.value?void 0:w};await P.save(l)&&($(m.current).dxDataGrid("instance").refresh(),$(D.current).modal("hide"))},xe=async t=>{const{isConfirmed:l}=await be.fire({title:"Estas seguro de eliminar este lead?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!l||!await P.delete(t)||$(m.current).dxDataGrid("instance").refresh()},le=async(t,l)=>{await P.assign(t,l)&&$(m.current).dxDataGrid("instance").refresh()},we=async(t,l)=>{await Ke.leadStatus({lead:t,status:l}),$(m.current).dxDataGrid("instance").refresh()},M=async t=>{O(t),history.pushState(null,null,`/clients/${t.id}`),V([]),H([]),$(N.current).modal("show")};s.useEffect(()=>{Ce(),Re()},[a]);const Ce=async()=>{const t=await Ze.byClient(a==null?void 0:a.id);V(t??[])},Re=async()=>{const t=await Le.byClient(a==null?void 0:a.id);H(t)};s.useEffect(()=>{$(N.current).on("hidden.bs.modal",()=>{O(null),history.pushState(null,null,"/clients")}),b&&P.get(b).then(t=>{t&&(O(t),V([]),H([]),$(N.current).modal("show"),de.GET.annotation&&$(`[data-name="${de.GET.annotation}"]`).click())})},[null]);const _e=[];v==null||v.forEach(t=>_e.push(...t.tasks));const Q=[];return v==null||v.forEach(t=>Q.push(...t.tasks.filter(l=>l.status!="Realizado"))),e.createElement(e.Fragment,null,e.createElement(We,{gridRef:m,title:"Clientes",rest:P,toolBar:t=>{t.unshift(pe({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(m.current).dxDataGrid("instance").refresh()})),o("clients","all","create")&&t.unshift(pe({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>ae()}))},columns:[o("projects","root","all","list")?{dataField:"id",caption:"ID",dataType:"number",cellTemplate:(t,{data:l,value:i,...u})=>{g(t,e.createElement(E,{className:"btn btn-xs btn-white",title:`Ver ${l.projects_count} proyectos`,onClick:()=>{u.component.collapseAll(-1),u.component.expandRow(u.row.data)}},e.createElement("i",{className:"fas fa-shapes"})," ",l.projects_count))},sortOrder:"desc"}:null,{dataField:"ruc",caption:"RUC",cellTemplate:(t,{data:l})=>{t.attr("style","height: 48px; cursor: pointer"),t.on("click",()=>M(l)),t.html(l.ruc||'<i class="text-muted">- Sin RUC -</i>')}},{dataField:"tradename",caption:"Nombre comercial",width:250,cellTemplate:(t,{data:l})=>{t.attr("style","height: 48px; cursor: pointer"),t.on("click",()=>M(l)),g(t,e.createElement("div",{className:"d-flex align-items-center"},l.assigned_to&&e.createElement(k,{content:`Atendido por ${l.assigned.name} ${l.assigned.lastname}`},e.createElement("img",{className:"avatar-xs rounded-circle me-1",src:`//${fe.APP_DOMAIN}/api/profile/thumbnail/${l.assigned.relative_id}`,alt:l.assigned.name})),e.createElement("div",null,l.tradename||e.createElement("i",{className:"text-muted"},"- Sin nombre -"))))}},{dataField:"name",caption:"Razon social",visible:!1},{dataField:"contact_name",caption:"Nombre de contacto",width:250,cellTemplate:(t,{data:l})=>{t.attr("style","height: 48px; cursor: pointer"),t.on("click",()=>M(l)),t.html(Ye(e.createElement("b",null,l.contact_name)))}},{dataField:"contact_phone",caption:"Telefono"},{dataField:"contact_email",caption:"Correo"},o("clients","root","all","changestatus")?{dataField:"status.name",caption:"Estado del cliente",dataType:"string",cellTemplate:(t,{data:l})=>{t.attr("style","overflow: visible"),g(t,e.createElement(Qe,{className:"btn btn-xs btn-white rounded-pill",title:l.status.name,icon:{icon:"fa fa-circle",color:l.status.color},tippy:"Actualizar estado"},z.map(({id:i,name:u,color:c})=>e.createElement(Z,{key:i,onClick:()=>we(l.id,i)},e.createElement("i",{className:"fa fa-circle",style:{color:c}})," ",u))))}}:null,o("clients","root","all","list","update","changestatus","delete")?{caption:"Acciones",width:235,cellTemplate:(t,{data:l})=>{t.attr("style","display: flex; gap: 4px; overflow: visible"),g(t,e.createElement(E,{className:"btn btn-xs btn-soft-primary",title:"Ver detalles",onClick:()=>M(l)},e.createElement("i",{className:"fa fa-eye"}))),o("clients","root","all","update")&&g(t,e.createElement(E,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>ae(l)},e.createElement("i",{className:"fa fa-pen"}))),l.assigned_to?l.assigned_to==x.id&&g(t,e.createElement(E,{className:"btn btn-xs btn-soft-danger",title:"Dejar de atender",onClick:()=>le(l.id,!1)},e.createElement("i",{className:"fas fa-hands-wash"}))):g(t,e.createElement(E,{className:"btn btn-xs btn-soft-dark",title:"Atender lead",onClick:()=>le(l.id,!0)},e.createElement("i",{className:"fas fa-hands-helping"}))),o("clients","root","all","delete")&&g(t,e.createElement(E,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>xe(l.id)},e.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}:null],masterDetail:{enabled:!1,template:async(t,{data:l,component:i})=>{t.css("padding","10px"),t.css("overflow","visible"),t.css("background-color","#323a46");let{data:u}=await je.paginate({filter:["client_id","=",l.id],isLoadingAll:!0});t.append(He([e.createElement(e.Fragment,null,e.createElement(E,{title:"Cerrar tabla",className:"btn btn-xs btn-soft-danger waves-effect mb-1",onClick:()=>i.collapseAll(-1)},e.createElement("i",{className:"fa fa-times"})),e.createElement("table",{className:"table table-dark table-sm table-bordered mb-0",style:{width:"100%"}},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{scope:"col"},"Tipo"),e.createElement("th",{scope:"col"},"Asignados"),e.createElement("th",{scope:"col"},"Costo"),e.createElement("th",{scope:"col"},"Pagos"),e.createElement("th",{scope:"col"},"Fecha de desarrollo"),e.createElement("th",{scope:"col"},"Estado del proyecto"),e.createElement("th",{scope:"col"},"Acciones"))),e.createElement("tbody",null,u==null?void 0:u.sort((c,X)=>X.project_status==null?-1:1).map(c=>{const X=(c.total_payments/c.cost*100).toFixed(2),ke=Number(c.total_payments).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}),De=Number(c.cost-c.total_payments).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}),$e=c.users.map(Se=>Se.relative_id);return e.createElement("tr",{key:`project-${c.id}`},e.createElement("td",{valign:"middle"},c.status_id==r?e.createElement(k,{content:"Este proyecto esta terminado"},e.createElement("i",{className:"mdi mdi-18px mdi-check me-1 text-success"})):"",c.project_status==null?e.createElement(k,{content:"Este proyecto esta archivado"},e.createElement("i",{className:"mdi mdi-18px mdi-archive me-1 text-danger"})):"",c.type.name),e.createElement("td",{valign:"middle"},Oe($e)),e.createElement("td",{valign:"middle"},`S/. ${J(c.cost)}`),e.createElement("td",{valign:"middle"},e.createElement("p",{className:"mb-0 d-flex justify-content-between"},e.createElement("b",{className:"text-success"},e.createElement("i",{className:"fa fa-arrow-circle-up"})," S/. ",ke),e.createElement("b",{className:"float-end text-danger"},e.createElement("i",{className:"fa fa-arrow-circle-down"})," S/. ",De)),e.createElement("div",{className:"progress progress-bar-alt-primary progress-sm mt-0 mb-0",style:{width:"200px"}},e.createElement("div",{className:"progress-bar bg-primary progress-animated wow animated",role:"progressbar","aria-valuenow":c.total_payments,"aria-valuemin":"0","aria-valuemax":c.cost,style:{width:`${X}%`,visibility:"visible",animationName:"animationProgress"}}))),e.createElement("td",{valign:"middle"},Ve(c.starts_at,c.ends_at)),e.createElement("td",{valign:"middle"},e.createElement(ze,{can:o,statuses:y,finishedProjectStatus:r,data:c,onChange:()=>{$(m.current).dxDataGrid("instance").refresh()}})),e.createElement("td",null,o("projects","root","all","assignUsers")&&e.createElement(E,{className:"btn btn-xs btn-soft-info me-1",title:"Asignar usuarios",icon:"fa fa-user-plus",onClick:()=>te(c)},e.createElement("i",{className:"fa fa-user-plus"})),o("projects","root","all","addpayment")&&e.createElement(E,{className:"btn btn-xs btn-soft-success",title:"Ver/Agregar pagos",icon:"fas fa-money-check-alt",onClick:()=>ee(c)},e.createElement("i",{className:"fas fa-money-check-alt"}))))}))))]))}}}),e.createElement(q,{modalRef:N,title:"Detalles del cliente",btnSubmitText:"Guardar",size:"full-width",bodyClass:"p-3 bg-light",isStatic:!0,onSubmit:t=>t.preventDefault(),hideFooter:!0},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},e.createElement("div",{className:"d-flex mb-3"},e.createElement("div",{className:"flex-grow-1"},e.createElement("h4",{className:"media-heading mt-0"},a==null?void 0:a.contact_name),e.createElement("span",{className:"badge bg-primary me-1"},(a==null?void 0:a.contact_position)||"Trabajador"),e.createElement("small",{className:"text-muted"},"desde ",e.createElement("b",null,a==null?void 0:a.origin)))),e.createElement("hr",null),e.createElement("h4",null,"Estados"),e.createElement("div",{className:"d-flex flex-wrap gap-2 justify-content-between mb-2"},e.createElement("div",null,e.createElement("b",{className:"d-block"},"Estado de gestión"),e.createElement("span",{className:"btn btn-light btn-sm",style:{cursor:"default",color:"#ffffff",backgroundColor:((se=a==null?void 0:a.status)==null?void 0:se.color)||"#6c757d"}},((ne=a==null?void 0:a.status)==null?void 0:ne.name)||"Sin estado")),e.createElement("div",null,e.createElement("b",{className:"d-block"},"Estado del lead"),e.createElement("span",{className:"btn btn-light btn-sm",style:{cursor:"default",color:"#ffffff",backgroundColor:((re=a==null?void 0:a.manage_status)==null?void 0:re.color)||"#6c757d"}},((ce=a==null?void 0:a.manage_status)==null?void 0:ce.name)||"Sin estado"))),(a==null?void 0:a.assigned_to)&&e.createElement(e.Fragment,null,e.createElement("b",{className:"d-block mb-1"},"Atendido por:"),e.createElement("div",{className:"d-flex align-items-start"},e.createElement("img",{className:"d-flex me-2 rounded-circle",src:`//${fe.APP_DOMAIN}/api/profile/thumbnail/${(oe=a==null?void 0:a.assigned)==null?void 0:oe.relative_id}`,alt:(me=a==null?void 0:a.assigned)==null?void 0:me.name,height:"32"}),e.createElement("div",{className:"w-100"},e.createElement("h5",{className:"m-0 font-14"},(ie=a==null?void 0:a.assigned)==null?void 0:ie.name),e.createElement("span",{className:"font-12 mb-0"},(ue=a==null?void 0:a.assigned)==null?void 0:ue.email)))),e.createElement("hr",null),e.createElement("h4",null,"Datos del contacto"),e.createElement("h5",{className:"font-600 mb-0"},"Correo electronico"),e.createElement("p",{className:"mb-2 text-truncate"}," ",a==null?void 0:a.contact_email," "),e.createElement("h5",{className:"font-600 mb-0"},"Tefono / Celular"),e.createElement("p",{className:"mb-2"}," ",a==null?void 0:a.contact_phone," "),e.createElement("h5",{className:"font-600 mb-0"},"Mensaje"),e.createElement("p",{className:"mb-2"}," ",a==null?void 0:a.message," "),e.createElement("h5",{className:"font-600 mb-0"},"Fecha de registro"),e.createElement("p",{className:"mb-2"},moment(a==null?void 0:a.created_at).format("LL"),e.createElement("br",null),e.createElement("small",{className:"text-muted"},moment(a==null?void 0:a.created_at).format("LTS"))),e.createElement("hr",null),e.createElement("h4",null,"Datos de la empresa"),e.createElement("h5",{className:"font-600 mb-0"},"Nombre comercial"),e.createElement("p",{className:"mb-2"}," ",(a==null?void 0:a.tradename)??e.createElement("i",{className:"text-muted"},"No especifica")," "),e.createElement("h5",{className:"font-600 mb-0"},"RUC"),e.createElement("p",{className:"mb-2"}," ",(a==null?void 0:a.ruc)??e.createElement("i",{className:"text-muted"},"No especifica")," "),e.createElement("h5",{className:"font-600 mb-0"},"N° trabajadores"),e.createElement("p",{className:"mb-2"}," ",(a==null?void 0:a.workers)??e.createElement("i",{className:"text-muted"},"No especifica")," ")),e.createElement("div",{className:"col-lg-6 col-md-4 col-sm-6 col-xs-12"},e.createElement("div",{className:"card card-body"},e.createElement("ul",{className:"nav nav-tabs",style:{flexWrap:"nowrap",overflowX:"auto"}},e.createElement("li",{key:"note-type-activity",className:"nav-item"},e.createElement("a",{href:"#note-type-activity","data-bs-toggle":"tab","aria-expanded":"false",className:"nav-link active"},e.createElement("i",{className:"mdi mdi-clock"})," Actividad")),p.sort((t,l)=>t.order-l.order).map((t,l)=>{if(t.name!="Correos")return e.createElement("li",{key:`note-type-${l}`,className:"nav-item"},e.createElement("a",{href:`#note-type-${t.id}`,"data-name":t.name,"data-bs-toggle":"tab","aria-expanded":"false",className:"nav-link"},e.createElement("i",{className:t.icon})," ",t.name))})),e.createElement("div",{className:"tab-content"},e.createElement("div",{key:"tab-note-type-activity",className:"tab-pane active",id:"note-type-activity"},v.sort((t,l)=>l.created_at>t.created_at?1:-1).map((t,l)=>e.createElement(Ee,{key:`note-${l}`,...t,showOptions:!1,session:x}))),p.sort((t,l)=>t.order-l.order).map((t,l)=>e.createElement("div",{key:`tab-note-type-${l}`,className:"tab-pane",id:`note-type-${t.id}`},e.createElement("h4",{className:"header-title mb-2"},"Lista de ",t.name),v.filter(i=>i.note_type_id==t.id).sort((i,u)=>u.created_at>i.created_at?1:-1).map((i,u)=>e.createElement(Ee,{key:`note-${u}`,...i,session:x}))))))),e.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},e.createElement("div",{className:"card"},e.createElement("div",{className:"card-header bg-danger"},e.createElement("h5",{className:"header-title my-0 text-white"},"Tareas")),e.createElement("div",{className:"card-body"},Q.length>0?Q.sort((t,l)=>t.ends_at>l.ends_at?1:-1).map((t,l)=>e.createElement(Be,{key:`task-${l}`,...t})):e.createElement("i",{className:"text-muted"},"- No hay tareas pendientes -"))),e.createElement("div",{className:"card"},e.createElement("div",{className:"card-header bg-primary"},e.createElement("div",{className:"float-end text-white"},"S/. ",J(W.reduce((t,l)=>t+Number(l.price),0))),e.createElement("h5",{className:"header-title my-0 text-white"},"Productos")),e.createElement("div",{className:"card-body"},W.length>0?e.createElement("div",{className:"mt-2 d-flex flex-column gap-2"},W.map((t,l)=>e.createElement("div",{className:"card mb-0",key:l,style:{border:`1px solid ${t.color}44`,backgroundColor:`${t.color}11`}},e.createElement("div",{className:"card-body p-2"},e.createElement("div",{className:"float-end"},e.createElement(k,{content:"Quitar producto"},e.createElement("i",{className:"fa fa-times",onClick:()=>deleteClientProduct(t),style:{cursor:"pointer"}}))),e.createElement("h5",{className:"header-title mt-0 mb-1",style:{fontSize:"14.4px",color:t.color}},t.name),e.createElement("small",null,"S/. ",J(t.price)))))):e.createElement("i",{className:"text-muted"},"- Sin productos -")))))),e.createElement(q,{modalRef:D,title:L?"Editar cliente":"Agregar cliente",onSubmit:ye,size:"md"},e.createElement("input",{ref:C,type:"hidden"}),e.createElement("ul",{className:"nav nav-pills navtab-bg nav-justified"},e.createElement("li",{className:"nav-item"},e.createElement(k,{content:"Datos del negocio"},e.createElement("a",{href:"#client-data","data-bs-toggle":"tab","aria-expanded":"false",className:"nav-link active"},"Negocio"))),e.createElement("li",{className:"nav-item"},e.createElement(k,{content:"Datos de contacto"},e.createElement("a",{href:"#contact-data","data-bs-toggle":"tab","aria-expanded":"true",className:"nav-link"},"Contacto")))),e.createElement("div",{className:"tab-content"},e.createElement("div",{className:"tab-pane active",id:"client-data"},e.createElement("div",{className:"row"},e.createElement(h,{eRef:R,label:"RUC",col:"col-4",required:!0}),e.createElement(h,{eRef:A,label:"Nombre comercial",col:"col-8",required:!0}),e.createElement(h,{eRef:S,label:"Razon social",col:"col-md-6",required:!0}),e.createElement(h,{eRef:_,label:"URL Web",col:"col-md-6"}),e.createElement(K,{eRef:T,label:"Mensaje",col:"col-12",required:!0}))),e.createElement("div",{className:"tab-pane show",id:"contact-data"},e.createElement("div",{className:"row"},e.createElement(h,{eRef:F,label:"Nombre de contacto",col:"col-6"}),e.createElement(h,{eRef:n,label:"Celular de contacto",type:"tel",col:"col-6"}),e.createElement(h,{eRef:d,label:"Email de contacto",col:"col-12",type:"email"}),e.createElement(K,{eRef:f,label:"Direccion de contacto",col:"col-12"}))))),e.createElement(Ie,{can:o,dataLoaded:j,setDataLoaded:ee,grid2refresh:ve}),e.createElement(Je,{can:o,client:ge,setClient:he,grid2refresh:m,page:"clients"}),e.createElement(Ue,{dataLoaded:Ne,setDataLoaded:te,grid2refresh:$(m.current).dxDataGrid("instance")}))};Te((y,r)=>{if(!r.can("clients","root","all","list"))return location.href="/";Fe(y).render(e.createElement(Ae,{...r,title:"Clientes"},e.createElement(et,{...r})))});

var w=Object.defineProperty;var v=(c,t,r)=>t in c?w(c,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[t]=r;var m=(c,t,r)=>(v(c,typeof t!="symbol"?t+"":t,r),r);import{m as l,R as e,G as x}from"./CreateReactScript-DiMSE74L.js";import{B as y}from"./Adminto-DDJrXyEx.js";class O extends y{constructor(){super(...arguments);m(this,"path","client-notes");m(this,"byClient",async r=>{const{result:n}=await l.Fetch(`/api/${this.path}/client/${r}`);return(n==null?void 0:n.data)??[]})}}class N extends y{constructor(){super(...arguments);m(this,"path","clients");m(this,"get",async r=>{try{const{status:n,result:a}=await l.Fetch(`/api/${this.path}/${r}`);if(!n)throw new Error((a==null?void 0:a.message)||"Ocurrio un error inesperado");return a.data}catch(n){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:n.message,type:"danger"}),null}})}}m(N,"assign",async(r,n)=>{try{const{status:a,result:s}=await l.Fetch("/api/clients/assign",{method:n?"PUT":"DELETE",body:JSON.stringify({id:r})});if(!a)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(a){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}}),m(N,"clientStatus",async(r,n)=>{try{const{status:a,result:s}=await l.Fetch("/api/clients/client-status",{method:"PATCH",body:JSON.stringify({client:r,status:n})});if(!a)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(a){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:a.message,type:"danger"}),!1}});const h=({html:c})=>e.createElement("div",{dangerouslySetInnerHTML:{__html:c}}),k=({id:c,status:t,name:r,description:n,assigned:a,priority:s,type:E,onChange:i,ends_at:g})=>{const o={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},u={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},p={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.createElement("div",{className:"card border border-default mb-1"},e.createElement("div",{className:"card-body p-2"},e.createElement("blockquote",{className:"card-bodyquote mb-0"},e.createElement("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center"},e.createElement("div",null,i?e.createElement(e.Fragment,null,e.createElement("button",{className:`btn btn-xs ${o[t].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.createElement("i",{className:o[t].icon})," ",t," ",e.createElement("i",{className:"mdi mdi-chevron-down"})),e.createElement("div",{className:"dropdown-menu"},Object.keys(o).map((d,b)=>e.createElement("span",{key:`status-${b}`,className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>i(c,d)},e.createElement("i",{className:o[d].icon})," ",d)))):e.createElement("span",{className:`btn btn-xs ${o[t].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"}},e.createElement("i",{className:o[t].icon})," ",t)),e.createElement("small",{className:"text-muted ms-1"},"vence ",moment(g).fromNow())),e.createElement("div",{className:"mb-1"},e.createElement("span",{className:"badge bg-light text-dark me-1"},e.createElement("i",{className:u[E].icon})," ",E),e.createElement("span",{className:`badge ${p[s].color}`},s)),e.createElement("h5",{className:"mt-0"},r),n&&e.createElement("small",null,e.createElement(h,{html:n}))),a&&e.createElement("small",null,e.createElement("img",{src:`//${x.APP_DOMAIN}/api/profile/thumbnail/${a.relative_id}`,alt:a.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.createElement("b",null,a.fullname))))},S=({id:c,type:t,name:r,description:n,created_at:a,updated_at:s,user_id:E,tasks:i,onTaskChange:g,showOptions:o=!0,session:u,onDeleteNote:p,onUpdateNote:d})=>t?e.createElement("div",{className:"card border border-primary mb-2"},r&&e.createElement("div",{className:"card-header p-2 d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:`${(t==null?void 0:t.icon)??"mdi mdi-clock"} me-1`})," ",r),o&&E==u.service_user.id&&e.createElement("div",{className:"dropdown"},e.createElement("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"}},e.createElement("i",{className:"mdi mdi-dots-vertical"})),e.createElement("div",{className:"dropdown-menu dropdown-menu-end"},e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>d({id:c,type:t,name:r,description:n,tasks:i})},e.createElement("i",{className:"fa fa-pen me-1"}),"Editar"),e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(c)},e.createElement("i",{className:"fa fa-trash me-1"}),"Eliminar")))),e.createElement("div",{className:"card-body p-2"},n&&e.createElement("div",{className:"card-text"},e.createElement(h,{html:n})),i.length>0&&i.map((b,f)=>e.createElement(k,{key:`task-${f}`,...b,onChange:g})),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(a).format("LLL")," ",s!=a&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))))):e.createElement("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"}},e.createElement("p",{className:"card-text mb-0"},e.createElement("i",{className:"mdi mdi-clock me-1"}),r),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(a).format("LLL")," ",s!=a&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))));export{S as C,k as T,N as a,O as b};

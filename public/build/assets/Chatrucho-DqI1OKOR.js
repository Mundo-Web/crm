import{C as f,c as y,j as s,r,G as j}from"./CreateReactScript-ByDl3m9l.js";import{A as v}from"./Adminto-Cu7C99b0.js";import"./Logout-DquunmIv.js";import"./sweetalert2.esm.all-C32wHI3n.js";const b=({session:a,messages:t=[],waDummy:d})=>{const[n,u]=r.useState(t),[o,c]=r.useState(""),[i,h]=r.useState(d),l=r.useRef(null);r.useEffect(()=>{u(t)},[t]),r.useEffect(()=>{var e;(e=l.current)==null||e.scrollIntoView({behavior:"smooth"})},[n]);const p=[...n].sort((e,x)=>e.microtime-x.microtime),m=async()=>{if(o.trim())try{await fetch(`${j.APP_URL}/meta/evoapi/${a.business_uuid}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{pushName:"Dummy",key:{fromMe:!1,remoteJid:`${i}@s.whatsapp.net`},messageType:"conversation",message:{conversation:o.trim()}}})}),c("")}catch(e){console.error("Error sending message:",e)}};return s.jsx("div",{className:"container d-flex justify-content-center align-items-center ",style:{minHeight:"calc(100vh - 200px)"},children:s.jsx("div",{className:"col-xl-4 col-lg-6 col-md-8 col-sm-10 col-12",children:s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header bg-primary text-white text-center",children:s.jsx("h5",{className:"mb-0",children:"Chat"})}),s.jsxs("div",{className:"card-body p-0 d-flex flex-column",style:{height:"600px"},children:[s.jsxs("div",{className:"flex-fill overflow-auto p-3 bg-light",children:[p.map(e=>s.jsx("div",{className:`d-flex mb-2 ${e.role==="Human"?"justify-content-end":"justify-content-start"}`,children:s.jsx("div",{className:`px-3 py-2 rounded shadow-sm ${e.role==="Human"?"bg-primary text-white":"bg-white text-dark border"}`,style:{maxWidth:"75%"},children:e.message})},e.id)),s.jsx("div",{ref:l})]}),s.jsx("div",{className:"input-group p-2 border-top",children:s.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:e=>h(e.target.value),placeholder:"NÃºmero dummy..."})}),s.jsxs("div",{className:"input-group p-2 border-top",children:[s.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>e.key==="Enter"&&m(),placeholder:"Escribe un mensaje..."}),s.jsx("button",{className:"btn btn-primary btn-sm",onClick:m,children:"Enviar"})]})]})]})})})};f((a,t)=>{y(a).render(s.jsx(v,{...t,title:"Simple Chat",children:s.jsx(b,{...t})}))});

var x=Object.defineProperty;var b=(n,a,e)=>a in n?x(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var c=(n,a,e)=>b(n,typeof a!="symbol"?a+"":a,e);import{m as o,j as r,G as u}from"./CreateReactScript-ByDl3m9l.js";import{B as N,i as j}from"./Adminto-C2cfOxEo.js";import{r as w}from"./server.browser-CMbz63Ok.js";class m extends N{constructor(){super(...arguments);c(this,"path","projects")}}c(m,"paginate",async e=>{const{result:s}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return s}),c(m,"save",async e=>{try{const{status:s,result:t}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(e)});if(!s)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(s){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:s.message,type:"danger"}),!1}}),c(m,"status",async({id:e,status:s})=>{try{const{status:t,result:i}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:e,status:s})});if(!t)throw new Error((i==null?void 0:i.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),c(m,"projectStatus",async(e,s)=>{try{const{status:t,result:i}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:e,status:s})});if(!t)throw new Error((i==null?void 0:i.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:i.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),c(m,"delete",async e=>{try{const{status:s,result:t}=await o.Fetch(`/api/projects/${e}`,{method:"DELETE"});if(!s)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(s){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:s.message,type:"danger"}),!1}});class f{}c(f,"getUser",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/${a}`);return(e==null?void 0:e.data)??null}),c(f,"byProject",async a=>{const{result:e}=await o.Fetch(`/api/users-by-projects/project/${a}`);return(e==null?void 0:e.data)??[]}),c(f,"massiveByProject",async a=>{try{const{status:e,result:s}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(a)});if(!e)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:s.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});const O=n=>r.jsx("div",{className:"avatar-group m-0",children:n.map(a=>r.jsx(j,{content:"Cargando...",allowHTML:!0,onShow:async e=>{var d,y;const s=await f.getUser(a),t=moment(s.created_at),l=moment().diff(t,"hours")>12?t.format("lll"):t.fromNow();$(e.popper).find(".tippy-content").addClass("p-0"),e.setContent(w(r.jsx("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"},children:r.jsx("div",{className:"card-body widget-user p-2",children:r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx("div",{className:"avatar-lg me-3 flex-shrink-0",children:r.jsx("img",{src:`//${u.APP_DOMAIN}/api/profile/thumbnail/${a}`,className:"img-fluid rounded-circle",alt:"user",onError:p=>p.target.src=`//${u.APP_DOMAIN}/api/profile/thumbnail/undefined`})}),r.jsxs("div",{className:"flex-grow-1 overflow-hidden",children:[r.jsxs("h5",{className:"text-blue mt-0 mb-1",children:[" ",(d=s.name.split(" "))==null?void 0:d[0]," ",(y=s.lastname.split(" "))==null?void 0:y[0]]}),r.jsx("p",{className:"text-dark mb-1 font-13 text-truncate",children:s.email}),r.jsxs("small",{className:"text-muted",children:["Asignado: ",r.jsx("b",{children:l})]})]})]})})})))},children:r.jsx("img",{className:"avatar-group-item avatar-sm rounded-circle mb-0",src:`//${u.APP_DOMAIN}/api/profile/thumbnail/${a}`,onError:e=>e.target.src=`//${u.APP_DOMAIN}/api/profile/thumbnail/undefined`,style:{backdropFilter:"blur(40px)",marginRight:"6px"}})},`user-${a}`))}),C=(n,a)=>{const e=moment(n),s=moment(a),t=moment();let i=r.jsx(r.Fragment,{});if(t.isBefore(e)){const l=t.diff(e,"hours")>12?e.format("LL"):e.fromNow();i=r.jsxs("i",{className:"text-muted",children:["Empieza ",l]})}else if(t.isAfter(s)){const l=t.diff(s,"hours")>12?s.format("LL"):s.fromNow();i=r.jsxs("i",{className:"text-muted",children:["Finalizo ",l]})}else{const g=s.diff(e),d=t.diff(e)/g*100,p=(h=>h<=33.333?"success":h<=66.667?"warning":"danger")(d);i=r.jsxs("div",{style:{width:"200px"},children:[r.jsxs("p",{className:"mb-0 d-flex justify-content-between",children:[r.jsx("span",{children:moment(n).format("DD MMM YYYY")}),r.jsx("span",{className:"float-end",children:moment(a).format("DD MMM YYYY")})]}),r.jsx("div",{className:`progress progress-bar-alt-${p} progress-xl mb-0 mt-0`,children:r.jsxs("div",{className:`progress-bar bg-${p} progress-bar-animated`,role:"progressbar","aria-valuenow":d,"aria-valuemin":"0","aria-valuemax":"100",style:{width:`${d}%`},children:[d.toFixed(2),"%"]})})]})}return i};export{O as A,C as D,m as P,f as U};

var ke=Object.defineProperty;var Se=(s,t,r)=>t in s?ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var me=(s,t,r)=>Se(s,typeof t!="symbol"?t+"":t,r);import{r as v,j as e,C as Ee,c as Re}from"./CreateReactScript-oCcGkxM7.js";import{B as _e,A as Ie}from"./Adminto-C9AA48Cv.js";import{M as pe}from"./Modal-BP688JC5.js";import{Q as Le}from"./QuillFormGroup-CMicDyYF.js";/* empty css                    */import{S as K}from"./SelectFormGroup-BryMaQSg.js";import{p as n}from"./index-BrYiGbAr.js";import{T as De}from"./TextareaFormGroup-CQKrMsjx.js";import{I as Te}from"./InputFormGroup-CACLbKux.js";import"./Logout-BEZZUVUw.js";import"./sweetalert2.esm.all-cwtbfVUv.js";class je extends _e{constructor(){super(...arguments);me(this,"path","settings")}}var ce=function(){return ce=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},ce.apply(this,arguments)},ye={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},Ae=ce({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},ye),oe=function(s){return typeof s=="function"},he=function(s){return s in ye},fe=function(s){return s.substr(2)},Oe=function(s,t,r,o,i,l,a){var d=Object.keys(i).filter(he),m=Object.keys(l).filter(he),h=d.filter(function(f){return l[f]===void 0}),g=m.filter(function(f){return i[f]===void 0});h.forEach(function(f){var y=fe(f),w=a[y];r(y,w),delete a[y]}),g.forEach(function(f){var y=o(s,f),w=fe(f);a[w]=y,t(w,y)})},Me=function(s,t,r,o,i){return Oe(i,s.on.bind(s),s.off.bind(s),function(l,a){return function(d){var m;return(m=l(a))===null||m===void 0?void 0:m(d,s)}},t,r,o)},ve=0,Ne=function(s){var t=Date.now(),r=Math.floor(Math.random()*1e9);return ve++,s+"_"+r+ve+String(t)},xe=function(s){return s!==null&&(s.tagName.toLowerCase()==="textarea"||s.tagName.toLowerCase()==="input")},be=function(s){return typeof s>"u"||s===""?[]:Array.isArray(s)?s:s.split(" ")},Pe=function(s,t){return be(s).concat(be(t))},$e=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Fe=function(s){if(!("isConnected"in Node.prototype)){for(var t=s,r=s.parentNode;r!=null;)t=r,r=t.parentNode;return t===s.ownerDocument}return s.isConnected},ge=function(s,t){s!==void 0&&(s.mode!=null&&typeof s.mode=="object"&&typeof s.mode.set=="function"?s.mode.set(t):s.setMode(t))},de=function(){return de=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},de.apply(this,arguments)},qe=function(s,t,r){var o,i,l=s.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=t.id,l.src=t.src,l.async=(o=t.async)!==null&&o!==void 0?o:!1,l.defer=(i=t.defer)!==null&&i!==void 0?i:!1;var a=function(){l.removeEventListener("load",a),l.removeEventListener("error",d),r(t.src)},d=function(m){l.removeEventListener("load",a),l.removeEventListener("error",d),r(t.src,m)};l.addEventListener("load",a),l.addEventListener("error",d),s.head&&s.head.appendChild(l)},Be=function(s){var t={},r=function(a,d){var m=t[a];m.done=!0,m.error=d;for(var h=0,g=m.handlers;h<g.length;h++){var f=g[h];f(a,d)}m.handlers=[]},o=function(a,d,m){var h=function(S){return m!==void 0?m(S):console.error(S)};if(a.length===0){h(new Error("At least one script must be provided"));return}for(var g=0,f=!1,y=function(S,B){f||(B?(f=!0,h(B)):++g===a.length&&d())},w=0,C=a;w<C.length;w++){var k=C[w],E=t[k.src];if(E)E.done?y(k.src,E.error):E.handlers.push(y);else{var N=Ne("tiny-");t[k.src]={id:N,src:k.src,done:!1,error:null,handlers:[y]},qe(s,de({id:N},k),r)}}},i=function(){for(var a,d=0,m=Object.values(t);d<m.length;d++){var h=m[d],g=s.getElementById(h.id);g!=null&&g.tagName==="SCRIPT"&&((a=g.parentNode)===null||a===void 0||a.removeChild(g))}t={}},l=function(){return s};return{loadScripts:o,deleteScripts:i,getDocument:l}},He=function(){var s=[],t=function(i){var l=s.find(function(a){return a.getDocument()===i});return l===void 0&&(l=Be(i),s.push(l)),l},r=function(i,l,a,d,m){var h=function(){return t(i).loadScripts(l,d,m)};a>0?setTimeout(h,a):h()},o=function(){for(var i=s.pop();i!=null;i=s.pop())i.deleteScripts()};return{loadList:r,reinitialize:o}},Qe=He(),le=function(s){var t=s;return t&&t.tinymce?t.tinymce:null},Ke=function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l])},s(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),G=function(){return G=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},G.apply(this,arguments)},ze=function(s){Ke(t,s);function t(r){var o,i,l,a=s.call(this,r)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var d=a.editor,m=a.props.value;d&&m&&m!==a.currentContent&&d.undoManager.ignore(function(){if(d.setContent(m),a.valueCursor&&(!a.inline||d.hasFocus()))try{d.selection.moveToBookmark(a.valueCursor)}catch{}}),a.rollbackTimer=void 0},a.handleBeforeInput=function(d){if(a.props.value!==void 0&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch{}},a.handleBeforeInputSpecial=function(d){(d.key==="Enter"||d.key==="Backspace"||d.key==="Delete")&&a.handleBeforeInput(d)},a.handleEditorChange=function(d){var m=a.editor;if(m&&m.initialized){var h=m.getContent();a.props.value!==void 0&&a.props.value!==h&&a.props.rollback!==!1&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,typeof a.props.rollback=="number"?a.props.rollback:200))),h!==a.currentContent&&(a.currentContent=h,oe(a.props.onEditorChange)&&a.props.onEditorChange(h,m))}},a.handleEditorChangeSpecial=function(d){(d.key==="Backspace"||d.key==="Delete")&&a.handleEditorChange(d)},a.initialise=function(d){var m,h,g;d===void 0&&(d=0);var f=a.elementRef.current;if(f){if(!Fe(f)){if(d===0)setTimeout(function(){return a.initialise(1)},1);else if(d<100)setTimeout(function(){return a.initialise(d+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var y=le(a.view);if(!y)throw new Error("tinymce should have been loaded into global scope");var w=G(G(G(G({},a.props.init),{selector:void 0,target:f,readonly:a.props.disabled,inline:a.inline,plugins:Pe((m=a.props.init)===null||m===void 0?void 0:m.plugins,a.props.plugins),toolbar:(h=a.props.toolbar)!==null&&h!==void 0?h:(g=a.props.init)===null||g===void 0?void 0:g.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(C){a.editor=C,a.bindHandlers({}),a.inline&&!xe(f)&&C.once("PostRender",function(k){C.setContent(a.getInitialValue(),{no_events:!0})}),a.props.init&&oe(a.props.init.setup)&&a.props.init.setup(C)},init_instance_callback:function(C){var k,E,N=a.getInitialValue();a.currentContent=(k=a.currentContent)!==null&&k!==void 0?k:C.getContent(),a.currentContent!==N&&(a.currentContent=N,C.setContent(N),C.undoManager.clear(),C.undoManager.add(),C.setDirty(!1));var S=(E=a.props.disabled)!==null&&E!==void 0?E:!1;ge(a.editor,S?"readonly":"design"),a.props.init&&oe(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(C)}});a.inline||(f.style.visibility=""),xe(f)&&(f.value=a.getInitialValue()),y.init(w)}},a.id=a.props.id||Ne("tiny-react"),a.elementRef=v.createRef(),a.inline=(l=(o=a.props.inline)!==null&&o!==void 0?o:(i=a.props.init)===null||i===void 0?void 0:i.inline)!==null&&l!==void 0?l:!1,a.boundHandlers={},a}return Object.defineProperty(t.prototype,"view",{get:function(){var r,o;return(o=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var o=this,i,l;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var a=this.editor;a.undoManager.transact(function(){var m;if(!o.inline||a.hasFocus())try{m=a.selection.getBookmark(3)}catch{}var h=o.valueCursor;if(a.setContent(o.props.value),!o.inline||a.hasFocus())for(var g=0,f=[m,h];g<f.length;g++){var y=f[g];if(y)try{a.selection.moveToBookmark(y),o.valueCursor=y;break}catch{}}})}if(this.props.disabled!==r.disabled){var d=(l=this.props.disabled)!==null&&l!==void 0?l:!1;ge(this.editor,d?"readonly":"design")}}},t.prototype.componentDidMount=function(){var r=this,o,i,l,a,d;if(le(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(o=this.props).onScriptsLoadError)===null||i===void 0||i.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((l=this.elementRef.current)===null||l===void 0)&&l.ownerDocument){var m=function(){var g,f;(f=(g=r.props).onScriptsLoad)===null||f===void 0||f.call(g),r.initialise()},h=function(g){var f,y;(y=(f=r.props).onScriptsLoadError)===null||y===void 0||y.call(f,g)};Qe.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(d=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.delay)!==null&&d!==void 0?d:0,m,h)}},t.prototype.componentWillUnmount=function(){var r=this,o=this.editor;o&&(o.off(this.changeEvents(),this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){o.off(i,r.boundHandlers[i])}),this.boundHandlers={},o.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var r,o,i,l=(i=(o=(r=le(this.view))===null||r===void 0?void 0:r.Env)===null||o===void 0?void 0:o.browser)===null||i===void 0?void 0:i.isIE();return l?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return $e()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,o=r===void 0?"div":r;return v.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return v.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,o,i=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,l=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:l}]:this.props.tinymceScriptSrc.map(function(h){return typeof h=="string"?{src:h,async:i,defer:l}:h});var a=this.props.cloudChannel,d=this.props.apiKey?this.props.apiKey:"no-api-key",m="https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(a,"/tinymce.min.js");return[{src:m,async:i,defer:l}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var o=this;if(this.editor!==void 0){Me(this.editor,r,this.props,this.boundHandlers,function(d){return o.props[d]});var i=function(d){return d.onEditorChange!==void 0||d.value!==void 0},l=i(r),a=i(this.props);!l&&a?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):l&&!a&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=Ae,t.defaultProps={cloudChannel:"7"},t}(v.Component);function we(s,t){if(s===t)return!0;if(typeof s!="object"||typeof t!="object"||s==null||t==null)return!1;const r=Object.keys(s),o=Object.keys(t);if(r.length!==o.length)return!1;for(let i of r)if(!we(s[i],t[i]))return!1;return!0}function Ge(s,t){if(s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(!we(s[r],t[r]))return!1;return!0}const Ve=new je,Ue=({questions:s,isOpen:t,setIsOpen:r,onModalOpen:o})=>{const[i,l]=v.useState(s),[a,d]=v.useState(s),[m,h]=v.useState(null),[g,f]=v.useState(null),[y,w]=v.useState(""),[C,k]=v.useState(""),[E,N]=v.useState(""),[S,B]=v.useState(null),[P,D]=v.useState(!1),[H,_]=v.useState([""]),[T,M]=v.useState(!1),[A,I]=v.useState([""]),F=()=>{if(!C.trim())return;const u={id:Date.now(),title:C.trim(),questions:[]};l([...i,u]),k("")},X=u=>{l(i.filter(j=>j.id!==u))},U=u=>{if(!E.trim())return;const j=P?H.filter(x=>x.trim()):null;P&&j.length===0||(l(i.map(x=>x.id===u?{...x,questions:[...x.questions,{id:Date.now(),text:E.trim(),closed:P,answers:j}]}:x)),N(""),D(!1),_([""]))},Y=(u,j)=>{l(i.map(x=>x.id===u?{...x,questions:x.questions.filter(R=>R.id!==j)}:x))},J=(u,j,x,R)=>{f(u),w(j),M(!!x),I(R?[...R]:[""])},W=()=>{const u=T?A.filter(j=>j.trim()):null;T&&u.length===0||(l(i.map(j=>({...j,questions:j.questions.map(x=>x.id===g?{...x,text:y,closed:T,answers:u}:x)}))),f(null),w(""),M(!1),I([""]))},Z=()=>{f(null),w(""),M(!1),I([""])},ee=()=>_([...H,""]),ae=u=>_(H.filter((j,x)=>x!==u)),ne=(u,j)=>{const x=[...H];x[u]=j,_(x)},te=()=>I([...A,""]),se=u=>I(A.filter((j,x)=>x!==u)),c=(u,j)=>{const x=[...A];x[u]=j,I(x)},p=(u,j)=>{h({formId:u,qIndex:j})},O=u=>u.preventDefault(),Q=(u,j,x)=>{u.preventDefault(),!(!m||m.formId!==j||m.qIndex===x)&&(l(i.map(R=>{if(R.id!==j)return R;const b=[...R.questions],[q]=b.splice(m.qIndex,1);return b.splice(x,0,q),{...R,questions:b}})),h(null))},re=u=>{h({type:"form",index:u})},V=(u,j)=>{if(u.preventDefault(),!m||m.type!=="form"||m.index===j)return;const x=[...i],[R]=x.splice(m.index,1);x.splice(j,0,R),l(x),h(null)},ue=v.useCallback(async()=>{await Ve.save({type:"json",name:"gemini-extra-questions",value:JSON.stringify(i)})&&d(i)},[i]);return v.useEffect(()=>{t&&(Ge(i,a)||ue())},[t,i,a,ue]),e.jsx("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:!t,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{className:"btn btn-soft-danger btn-xs position-absolute",onClick:()=>r(!1),children:[e.jsx("i",{className:"mdi mdi-pan-left me-1"}),"Volver"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-start",style:{minHeight:"calc(100vh - 220px)"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-pill bg-success bg-opacity-10 text-success px-4 py-1 fw-semibold",children:"Inicio"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:"Saludo inicial (cliente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:[e.jsx("span",{className:"d-block",children:"Mensaje inicial (Bot)"}),e.jsxs("small",{className:"d-block border-bottom fw-normal cursor-pointer text-center mx-auto",style:{width:"max-content"},onClick:u=>o(u,"gemini-first-message","Mensaje inicial","text","Hola soy boti, me permites tus datos personales"),children:[e.jsx("i",{className:"mdi mdi-chat me-1"}),e.jsx("span",{children:"Mensaje inicial"})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-white border text-primary px-2 py-1 fw-semibold",children:[e.jsxs("div",{className:"mb-1 text-center",children:[e.jsx("i",{className:"mdi mdi-star-four-points me-1"}),e.jsx("span",{children:"Recolección de datos (bot)"})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-center text-default gap-2",style:{maxWidth:"200px"},children:[e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:u=>o(u,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("i",{className:"mdi mdi-key me-1"}),e.jsx("span",{children:"API Key"})]}),e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:u=>o(u,"gemini-personality","Personalidad - Gemini","text","Ej. Sé claro y respetuoso."),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),e.jsx("span",{children:"Personalidad"})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50 mb-2",style:{fontSize:"24px"}}),e.jsxs("div",{className:"w-100",style:{minWidth:"480px"},children:[i.map((u,j)=>{var x,R;return e.jsxs("div",{draggable:!0,onDragStart:()=>re(j),onDragOver:O,onDrop:b=>V(b,j),className:"border rounded mb-2 shadow-sm bg-white transition-all hover:shadow",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 bg-gradient-to-r from-gray-50 to-white rounded-top cursor-pointer",onClick:()=>B(S===u.id?null:u.id),children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:"mdi mdi-drag text-gray-400"}),e.jsx("span",{className:"fw-semibold text-gray-700",children:`${j+1}. ${u.title}`}),e.jsx("span",{className:"badge bg-soft-secondary text-secondary ms-2",children:((x=u.questions)==null?void 0:x.length)||0})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`mdi ${S===u.id?"mdi-chevron-up":"mdi-chevron-down"} text-muted`}),e.jsx("button",{className:"btn btn-xs btn-outline-danger border-0 rounded-pill",onClick:b=>{b.stopPropagation(),X(u.id)},title:"Eliminar formulario",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]}),S===u.id&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded-bottom",children:[(R=u.questions)==null?void 0:R.map((b,q)=>e.jsxs("div",{draggable:!0,onDragStart:()=>p(u.id,q),onDragOver:O,onDrop:L=>Q(L,u.id,q),onDoubleClick:()=>g!==b.id&&J(b.id,b.text,b.closed,b.answers),className:"d-flex align-items-center rounded bg-white border p-2 mb-2 shadow-xs cursor-grab active:cursor-grabbing transition-transform hover:scale-[1.01]",children:[e.jsx("i",{className:"mdi mdi-drag mt-1 me-3 text-gray-400"}),g===b.id?e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex gap-1 mb-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:L=>w(L.target.value),onKeyDown:L=>L.key==="Enter"&&W(),placeholder:"Texto de la pregunta"}),e.jsx("button",{className:"btn btn-xs btn-outline-success",onClick:W,children:e.jsx("i",{className:"mdi mdi-check"})}),e.jsx("button",{className:"btn btn-xs btn-outline-secondary",onClick:Z,children:e.jsx("i",{className:"mdi mdi-close"})})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`edit-closed-${b.id}`,checked:T,onChange:L=>M(L.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`edit-closed-${b.id}`,children:"Pregunta cerrada (con opciones)"})]}),T&&e.jsxs("div",{className:"mb-0 mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),A.map((L,ie)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:L,onChange:Ce=>c(ie,Ce.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>se(ie),children:e.jsx("i",{className:"mdi mdi-minus"})})]},ie)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:te,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"small text-gray-800 fw-medium",children:b.text}),b.closed&&e.jsx("div",{className:"mt-0",children:e.jsx("span",{className:"badge bg-soft-primary text-primary small",children:"Cerrada"})})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{className:"btn btn-xs btn-outline-primary",onClick:()=>J(b.id,b.text,b.closed,b.answers),title:"Editar",children:e.jsx("i",{className:"mdi mdi-pencil"})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger",onClick:()=>Y(u.id,b.id),title:"Eliminar",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]})]},b.id)),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nueva pregunta"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Escribe la pregunta",value:E,onChange:b=>N(b.target.value),onKeyDown:b=>b.key==="Enter"&&U(u.id)}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:()=>U(u.id),children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir"]})]}),e.jsxs("div",{className:"form-check mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`new-closed-${u.id}`,checked:P,onChange:b=>D(b.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`new-closed-${u.id}`,children:"Pregunta cerrada (con opciones)"})]}),P&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),H.map((b,q)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:b,onChange:L=>ne(q,L.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>ae(q),children:e.jsx("i",{className:"mdi mdi-minus"})})]},q)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:ee,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]})]})]},u.id)}),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nuevo formulario"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Título del nuevo formulario",value:C,onChange:u=>k(u.target.value),onKeyDown:u=>u.key==="Enter"&&F()}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:F,children:[e.jsx("i",{className:"mdi mdi-plus"})," Crear"]})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary text-center px-2 py-1 fw-semibold cursor-pointer",onClick:u=>o(u,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("i",{className:"mdi mdi-message-text-outline me-1"})," Saludo final (asistente)"]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded-pill bg-danger bg-opacity-10 text-danger px-4 py-1 fw-semibold",children:"Fin"})]})})]})})},z=new je,Je=({can:s,constants:t,statuses:r})=>{const o=v.useRef(),i=v.useRef(),l=v.useRef(),a=v.useRef(),d=v.useRef(),m=v.useRef(),h=v.useRef(),g=v.useRef(),f=v.useRef(),y=v.useRef(),[w,C]=v.useState(),[k,E]=v.useState(),[N,S]=v.useState(window.location.hash.slice(1)||"general"),[B,P]=v.useState(!1),D=(c,p,O,Q,re="")=>{const V=_(p);switch(C(Q),E(re),l.current.value=p,i.current.value=Q,Q){case"simpleHTML":d.editor.root.innerHTML=V.value;break;case"HTML":m.current.setContent(V.value);break;default:a.current.value=V.value;break}$(o.current).find(".modal-title").text(O),$(o.current).modal("show")},H=async c=>{c.preventDefault();let p=a.current.value;switch(w){case"simpleHTML":p=d.editor.root.innerHTML;break;case"HTML":p=m.current.getContent();break}const O={type:i.current.value,name:l.current.value,value:p};await z.save(O)&&($(o.current).modal("hide"),location.reload())},_=c=>{const p=t.find(({name:O})=>O==c);return p||{name:c,value:null}},T=v.useRef(),M=v.useRef(),A=v.useRef(),I=v.useRef(),F=v.useRef(),X=()=>{const c=_("assignation-lead-status"),p=JSON.parse(c.value);$(F.current).find(".modal-title").text("Estados de asignacion"),T.current.value="assignation-lead-status",$(M.current).val(p==null?void 0:p.lead).trigger("change"),$(A.current).val(p==null?void 0:p.manage).trigger("change"),$(I.current).val(p==null?void 0:p.task).trigger("change"),$(F.current).modal("show")},U=()=>{const c=_("revertion-lead-status"),p=JSON.parse(c.value);$(F.current).find(".modal-title").text("Estados de reversion"),T.current.value="revertion-lead-status",$(M.current).val(p==null?void 0:p.lead).trigger("change"),$(A.current).val(p==null?void 0:p.manage).trigger("change"),$(I.current).val(p==null?void 0:p.task).trigger("change"),$(F.current).modal("show")},Y=async c=>{c.preventDefault(),await Promise.all([z.save({type:"text",name:"archived-lead-status",value:JSON.stringify($(f.current).val())}),z.save({type:"text",name:"archived-lead-status-days",value:y.current.value})]),$(o.current).modal("hide"),location.reload()},J=async c=>{c.preventDefault();const p={lead:M.current.value,manage:A.current.value,task:I.current.value},O={name:T.current.value,value:JSON.stringify(p),type:"json"};await z.save(O)&&($(o.current).modal("hide"),location.reload())},W=async c=>{const p={name:"finished-project-status",value:c.target.value};await z.save(p)},Z=async c=>{const p={name:"converted-lead-status",value:c.target.value};await z.save(p)},ee=_("archived-lead-status"),ae=_("archived-lead-status-days"),ne=_("finished-project-status"),te=_("converted-lead-status");v.useEffect(()=>{window.location.hash=N},[N]),v.useEffect(()=>{$(f.current).val(JSON.parse(ee.value)).select2(),$(y.current).val(ae.value),$(h.current).val(ne.value).select2(),$(g.current).val(te.value).select2()},[null]);const se=_("gemini-extra-questions");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:B,children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"header-title mb-0",children:"Configura aqui las constantes del sistema"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3 mb-2",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("button",{className:`nav-link mb-1 text-start ${N==="general"?"active show":""}`,id:"v-general-tab","data-bs-toggle":"pill",href:"#v-general",role:"tab","aria-controls":"v-general","aria-selected":"true",onClick:()=>S("general"),children:"General"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="clients-leads"?"active show":""}`,id:"v-clients-leads-tab","data-bs-toggle":"pill",href:"#v-clients-leads",role:"tab","aria-controls":"v-clients-leads","aria-selected":"false",onClick:()=>S("clients-leads"),children:"Clientes y leads"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="projects"?"active show":""}`,id:"v-projects-tab","data-bs-toggle":"pill",href:"#v-projects",role:"tab","aria-controls":"v-projects","aria-selected":"false",onClick:()=>S("projects"),children:"Proyectos"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="email"?"active show":""}`,id:"v-email-tab","data-bs-toggle":"pill",href:"#v-email",role:"tab","aria-controls":"v-email","aria-selected":"false",onClick:()=>S("email"),children:"Correo"}),e.jsx("button",{className:`nav-link mb-1 text-start ${N==="whatsapp"?"active show":""}`,id:"v-whatsapp-tab","data-bs-toggle":"pill",href:"#v-whatsapp",role:"tab","aria-controls":"v-whatsapp","aria-selected":"false",onClick:()=>S("whatsapp"),children:"WhatsApp"}),e.jsxs("button",{className:`nav-link mb-1 text-start ${N==="generativeai"?"active show":""}`,id:"v-generativeai-tab","data-bs-toggle":"pill",href:"#v-generativeai",role:"tab","aria-controls":"v-generativeai","aria-selected":"false",onClick:()=>S("generativeai"),children:["Chat IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]})]})}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("div",{className:`tab-pane fade ${N==="general"?"show active":""} coming-soon`,id:"v-general",role:"tabpanel","aria-labelledby":"v-general-tab",children:[e.jsx("h4",{children:"Configuracion general"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="dashboard"?"show active":""}`,id:"v-dashboard",role:"tabpanel","aria-labelledby":"v-dashboard-tab",children:[e.jsx("h4",{children:"Configuracion de dashboard"}),e.jsx("div",{className:"row"})]}),e.jsxs("div",{className:`tab-pane fade ${N==="clients-leads"?"show active":""}`,id:"v-clients-leads",role:"tabpanel","aria-labelledby":"v-clients-leads-tab",children:[e.jsx("h4",{children:"Configuracion de clientes y leads"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("form",{className:"card card-body border p-2",onSubmit:Y,style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado para archivar"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un lead que debe archivarse tras N días de inactividad?"}),e.jsx(K,{eRef:f,label:"Escoge un estado",required:!0,multiple:!0,children:r.filter(c=>c.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((c,p)=>e.jsx("option",{value:c.id,children:c.name},p))}),e.jsx(Te,{eRef:y,label:"Días de inactividad",type:"number",min:1,required:!0}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Guardar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:X,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de asignacion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que asignan el usuario al cliente directamente?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:U,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de reversion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que quitan la asignacion del usuario directamente?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de Conversión"}),e.jsx("p",{className:"card-text mb-0",children:"¿Cuál es el estado que define mejor a un lead que ha sido convertido exitosamente?"}),e.jsx("blockquote",{className:"my-1",style:{borderLeft:"4px solid #007bff",backgroundColor:"var(--bs-gray-300)",padding:"5px 10px"},children:e.jsx("small",{children:"Esta configuración nos ayudará a identificar y medir las conversiones efectivas en el sistema."})}),e.jsx(K,{eRef:g,label:"Escoge un estado",noMargin:!0,onChange:Z,children:r.filter(c=>c.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((c,p)=>e.jsx("option",{value:c.id,children:c.name},p))})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="projects"?"show active":""}`,id:"v-projects",role:"tabpanel","aria-labelledby":"v-projects-tab",children:[e.jsx("h4",{children:"Configuracion de Proyectos"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de culminación"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un proyecto que ha sido terminado?"}),e.jsx(K,{eRef:h,label:"Escoge un estado",noMargin:!0,onChange:W,children:r.filter(c=>c.table_id=="cd8bd48f-c73c-4a62-9935-024139f3be5f").map((c,p)=>e.jsx("option",{value:c.id,children:c.name},p))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${N==="email"?"show active":""} coming-soon`,id:"v-email",role:"tabpanel","aria-labelledby":"v-email-tab",children:[e.jsx("h4",{children:"Configuracion de correo"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Credenciales"}),e.jsx("p",{className:"card-text mb-1",children:"De donde saldran los mensajes de correo hacia los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Correo actual: mundoweb.pe"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>{},children:[e.jsx("h5",{className:"card-title mb-1",children:"Diseño de correo para el lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que correo veran los nuevos leads cuando caigan al crm?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Correo administrador"}),e.jsx("p",{className:"card-text mb-1",children:"A que correo deseas que te enviemos un mensaje cuando se registe un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted ",style:{wordWrap:"wrap"},children:"Correo actual: gamboapalominocarlosmanuel@gmail.com"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${N==="whatsapp"?"show active":""}`,id:"v-whatsapp",role:"tabpanel","aria-labelledby":"v-whatsapp-tab",children:[e.jsx("h4",{children:"Configuracion de WhatsApp"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"whatsapp-new-lead-notification-message","Notificacion - Nuevo lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion - Nuevo lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje llegara al grupo/persona encargado de revisar los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"whatsapp-new-lead-notification-waid","Grupo/Persona encargado","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Grupo/Persona encargado"}),e.jsx("p",{className:"card-text mb-1",children:"A quien(es) debemos notificar cuando se registre un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion al lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje le llegara al lead cuando sea registrado en el sistema?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"whatsapp-assigned-message-client","Mensaje de asignación","simpleHTML","Variables disponibles: {{user}} = nombre del ejecutivo, {{lead}} = nombre del cliente"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Mensaje de asignación"}),e.jsx("p",{className:"card-text mb-1",children:"Mensaje que se enviará al lead cuando sea asignado a un usuario/ejecutivo"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${N==="generativeai"?"show active":""}`,id:"v-generativeai",role:"tabpanel","aria-labelledby":"v-generativeai-tab",children:[e.jsxs("h4",{children:["IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"API Key - Gemini"}),e.jsxs("p",{className:"card-text mb-1",children:["Configura un API key para que ",e.jsx("b",{children:"Gemini"})," interactue con nuevos clientes."]}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:c=>D(c,"gemini-what-business-do","Que hace tu empresa [Separado por comas]","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Que hace tu empresa"}),e.jsx("p",{className:"card-text mb-1",children:"Ayuda a Gemini a saber que productos y/o servicios buscan los clientes en tu empresa"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>P(!0),children:[e.jsx("h5",{className:"card-title mb-1",children:"Flujo de asistente (Beta)"}),e.jsx("p",{className:"card-text mb-1",children:"Configura el flujo de Gemini con leads para automatizar preguntas y respuestas."}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]})]})]})})]})})]}),e.jsx(Ue,{questions:JSON.parse(se.value??"[]"),isOpen:B,setIsOpen:P,onModalOpen:D})]})}),e.jsxs(pe,{modalRef:F,title:"",onSubmit:J,size:"sm",children:[e.jsx("input",{ref:T,type:"hidden"}),e.jsxs("div",{className:"row",id:"assignation-status-container",children:[e.jsxs(K,{eRef:M,label:"Estado del lead",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:c})=>c=="e05a43e5-b3a6-46ce-8d1f-381a73498f33").sort((c,p)=>c.order-p.order).map((c,p)=>e.jsx("option",{value:c.id,children:c.name},`status-${p}`))]}),e.jsxs(K,{eRef:A,label:"Estado de gestion",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:c})=>c=="9c27e649-574a-47eb-82af-851c5d425434").sort((c,p)=>c.order-p.order).map((c,p)=>e.jsx("option",{value:c.id,children:c.name},`status-${p}`))]}),e.jsxs(K,{eRef:I,label:"Estado de la tarea",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En curso",children:"En curso"}),e.jsx("option",{value:"Realizado",children:"Realizado"})]})]})]}),e.jsx(pe,{modalRef:o,title:"",onSubmit:H,size:"md",children:e.jsxs("div",{className:"row",id:"settings-crud-container",children:[e.jsx("input",{ref:l,type:"hidden"}),e.jsx("input",{ref:i,type:"hidden"}),e.jsx("div",{style:{display:w=="text"||w==""||w==null?"block":"none"},children:e.jsx(De,{eRef:a,label:e.jsxs(e.Fragment,{children:["Valor ",k&&e.jsxs("small",{children:["(",k,")"]})]}),col:"col-12"})}),e.jsx("div",{style:{display:w=="simpleHTML"?"block":"none"},children:e.jsx(Le,{eRef:d,label:e.jsxs(e.Fragment,{children:["Valor ",k&&e.jsxs("small",{children:["(",k,")"]})]}),col:"col-12",theme:"bubble"})}),e.jsxs("div",{className:"col-12",style:{display:w=="HTML"?"block":"none"},children:[e.jsx("label",{htmlFor:"",children:"Valor de la variable"}),e.jsx(ze,{apiKey:"k2389nfj5bxjbe7s3kkc3c6fututtaba9syfaviluaf2jew6",onInit:(c,p)=>m.current=p,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})]})})]})};Ee((s,t)=>{if(!t.can("settings","root","all","list"))return location.href="/";Re(s).render(e.jsx(Ie,{...t,title:"Configuraciones",showTitle:!1,children:e.jsx(Je,{...t})}))});

import{r as z,j as e}from"./CreateReactScript-xvpUtUf-.js";import{r as S}from"./server.browser-BrMqSrzL.js";const P=({gridRef:t,rest:i,columns:c,toolBar:d,masterDetail:u,filterValue:p,defaultRows:r,selection:o,allowedPageSizes:f=[5,10,25,50,100],pageSize:g=100,exportable:b,exportableName:v,customizeCell:w=()=>{},reloadWith:j=[null],height:y="calc(100vh - 185px)"})=>(z.useEffect(()=>{var m,h,N;DevExpress.localization.locale(navigator.language),$(t.current).data("dxDataGrid")&&((h=(m=$(t.current))==null?void 0:m.dxDataGrid("instance"))==null||h.dispose()),$(t.current).dxDataGrid({language:"es",dataSource:{load:async n=>{const a=await i.paginate(n)??{};let l=(a==null?void 0:a.data)||[];if(r){const s=r.map(D=>Object.keys(D)),C=l.concat(r.filter(D=>!l.some(k=>s.some(B=>B.every(E=>k[E]==D[E])))));a.data=C}return a}},onToolbarPreparing:n=>{const{items:a}=n.toolbarOptions;d(a)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:y,filterValue:p,selection:o||null,export:{enabled:b},onExporting:function(n){var a=new ExcelJS.Workbook,l=a.addWorksheet("Main sheet");DevExpress.excelExporter.exportDataGrid({worksheet:l,component:n.component,customizeCell:function(s){w(s),s.excelCell.alignment={horizontal:"left",vertical:"top",...s.excelCell.alignment}}}).then(function(){a.xlsx.writeBuffer().then(function(s){saveAs(new Blob([s],{type:"application/octet-stream"}),`${v}.xlsx`)})})},rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:g},pager:{visible:!0,allowedPageSizes:f,showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:c,masterDetail:u,onContentReady:(...n)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})},onOptionChanged:n=>{if(n.fullName==="filterValue"){const a=location.pathname,l=Local.get("dxSettings")||{};l[a]={filterValue:n.value},Local.set("dxSettings",l)}}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0});const x=Local.get("dxSettings")||{};(N=x[location.pathname])!=null&&N.filterValue&&$(t.current).dxDataGrid("instance").option("filterValue",x[location.pathname].filterValue)},j),e.jsx("div",{ref:t})),V=({title:t,gridRef:i,rest:c,columns:d,toolBar:u,masterDetail:p,filterValue:r=[],defaultRows:o,selection:f,className:g="",allowedPageSizes:b,pageSize:v,exportable:w=!1,customizeCell:j,reloadWith:y,height:x})=>{const m=S(e.jsx("div",{children:t})),h=$(m).text().trim().clean("-");return e.jsx("div",{className:`row ${g}`,children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[typeof t=="object"&&e.jsx("div",{className:"card-header",children:t}),e.jsxs("div",{className:"card-body",children:[typeof t=="string"&&e.jsxs("h4",{className:"header-title",children:[e.jsx("div",{id:"header-title-options",className:"float-end"}),e.jsx("span",{id:"header-title-prefix"})," Lista de ",t," ",e.jsx("span",{id:"header-title-suffix"})]}),e.jsx(P,{gridRef:i,rest:c,columns:d.filter(Boolean),toolBar:u,masterDetail:p,filterValue:r,defaultRows:o,selection:f,allowedPageSizes:b,pageSize:v,exportable:w,exportableName:h.toLowerCase(),customizeCell:j,reloadWith:y,height:x})]})]})})})},F=({className:t="btn btn-xs btn-default rounded-pill",location:i="after",icon:c,text:d,title:u,onClick:p=()=>{}})=>({widget:"dxButton",location:i,options:{icon:c,text:d,hint:u,onClick:p,template:(r,o)=>{o.parent().attr("style","border: none !important; background: transparent !important"),o.attr("class",t),o.html(S(e.jsxs(e.Fragment,{children:[r.icon&&e.jsx("i",{className:`${r.icon}`}),e.jsx("span",{className:"d-none d-md-inline-block ms-1",children:r.text})]})))}}});export{F as D,V as T};

var C=Object.defineProperty;var j=(r,t,o)=>t in r?C(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o;var p=(r,t,o)=>j(r,typeof t!="symbol"?t+"":t,o);import{C as v,c as w,j as s,r as i}from"./CreateReactScript-e3GvmO1h.js";import{B as D,A as B}from"./Adminto-CI_nj0HS.js";import{M as E}from"./Modal-C04qfIHC.js";import{T}from"./Table-vDoY1Tl5.js";import{I as y}from"./InputFormGroup-Bae38yQ1.js";import{T as P}from"./TextareaFormGroup-CvhkWOld.js";import{S}from"./sweetalert2.esm.all-CMZyvfN1.js";import{D as d}from"./DxPanelButton-BBjYrUQF.js";import{D as x}from"./DxButton-CsjWvhyj.js";import"./Logout-C-9LAAR-.js";import"./server.browser-jZN3JjYr.js";import"./default-CaMEIAKL.js";import"./index-BsrMgfND.js";class k extends D{constructor(){super(...arguments);p(this,"path","processes")}}const u=new k,A=({can:r})=>{const t=i.useRef(),o=i.useRef(),l=i.useRef(),c=i.useRef(),a=i.useRef(),[R,f]=i.useState(!1),m=e=>{e!=null&&e.id?f(!0):f(!1),l.current.value=(e==null?void 0:e.id)||null,c.current.value=(e==null?void 0:e.name)||null,a.current.value=(e==null?void 0:e.description)||null,$(o.current).modal("show")},b=async e=>{e.preventDefault();const n={id:l.current.value||void 0,name:c.current.value,description:a.current.value};await u.save(n)&&($(t.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},g=async e=>{const{isConfirmed:n}=await S.fire({title:"Eliminar proceso",text:"¿Está seguro de eliminar este proceso?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!",cancelButtonText:"Cancelar"});!n||!await u.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return s.jsxs(s.Fragment,{children:[s.jsx(T,{gridRef:t,title:"Procesos",rest:u,toolBar:e=>{e.unshift(d({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(t.current).dxDataGrid("instance").refresh()})),r("processes","all","create")&&e.unshift(d({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>m()}))},columns:[{dataField:"name",caption:"Proceso",dataType:"string"},{dataField:"description",caption:"Descripcion",dataType:"string"},{caption:"Acciones",cellTemplate:(e,{data:n})=>{r("processes","root","all","update")&&e.append(x({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>m(n)})),r("processes","root","all","delete")&&e.append(x({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash-alt",onClick:()=>g(n.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.jsx(E,{modalRef:o,title:R?"Editar proceso":"Agregar proceso",onSubmit:b,children:s.jsxs("div",{className:"row",children:[s.jsx("input",{ref:l,type:"hidden"}),s.jsx(y,{eRef:c,label:"Proceso",col:"col-12",required:!0}),s.jsx(P,{eRef:a,label:"Descripción",col:"col-12"})]})})]})};v((r,t)=>{if(!t.can("processes","root","all","list"))return location.href="/";w(r).render(s.jsx(B,{...t,title:"Procesos",children:s.jsx(A,{...t})}))});

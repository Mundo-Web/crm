var b=Object.defineProperty;var E=(i,s,e)=>s in i?b(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var c=(i,s,e)=>E(i,typeof s!="symbol"?s+"":s,e);import{m as o,R as a,G as p}from"./CreateReactScript-BzwrR0sZ.js";import{B as N,i as w}from"./Adminto-DuoVWNzw.js";import{r as v}from"./server.browser-CLYKlTOS.js";class d extends N{constructor(){super(...arguments);c(this,"path","projects")}}c(d,"paginate",async e=>{const{result:t}=await o.Fetch("/api/projects/paginate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return t}),c(d,"save",async e=>{try{const{status:t,result:r}=await o.Fetch("/api/projects",{method:"POST",body:JSON.stringify(e)});if(!t)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}}),c(d,"status",async({id:e,status:t})=>{try{const{status:r,result:n}=await o.Fetch("/api/projects/status",{method:"PATCH",body:JSON.stringify({id:e,status:t})});if(!r)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),!1}}),c(d,"projectStatus",async(e,t)=>{try{const{status:r,result:n}=await o.Fetch("/api/projects/project-status",{method:"PATCH",body:JSON.stringify({project:e,status:t})});if(!r)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:n.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),!1}}),c(d,"delete",async e=>{try{const{status:t,result:r}=await o.Fetch(`/api/projects/${e}`,{method:"DELETE"});if(!t)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:r.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:t.message,type:"danger"}),!1}});class f{}c(f,"getUser",async s=>{const{result:e}=await o.Fetch(`/api/users-by-projects/${s}`);return(e==null?void 0:e.data)??null}),c(f,"byProject",async s=>{const{result:e}=await o.Fetch(`/api/users-by-projects/project/${s}`);return(e==null?void 0:e.data)??[]}),c(f,"massiveByProject",async s=>{try{const{status:e,result:t}=await o.Fetch("/api/users-by-projects/project",{method:"PATCH",body:JSON.stringify(s)});if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:e.message,type:"danger"}),!1}});const C=i=>a.createElement("div",{className:"avatar-group m-0"},i.map(s=>a.createElement(w,{key:`user-${s}`,content:"Cargando...",allowHTML:!0,onShow:async e=>{var m,y;const t=await f.getUser(s),r=moment(t.created_at),l=moment().diff(r,"hours")>12?r.format("lll"):r.fromNow();$(e.popper).find(".tippy-content").addClass("p-0"),e.setContent(v(a.createElement("div",{className:"card mb-0",style:{boxShadow:"0 0 10px rgba(0, 0, 0, 0.25)"}},a.createElement("div",{className:"card-body widget-user p-2"},a.createElement("div",{className:"d-flex align-items-center"},a.createElement("div",{className:"avatar-lg me-3 flex-shrink-0"},a.createElement("img",{src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${s}`,className:"img-fluid rounded-circle",alt:"user",onError:u=>u.target.src=`//${p.APP_DOMAIN}/api/profile/thumbnail/undefined`})),a.createElement("div",{className:"flex-grow-1 overflow-hidden"},a.createElement("h5",{className:"text-blue mt-0 mb-1"}," ",(m=t.name.split(" "))==null?void 0:m[0]," ",(y=t.lastname.split(" "))==null?void 0:y[0]),a.createElement("p",{className:"text-dark mb-1 font-13 text-truncate"},t.email),a.createElement("small",{className:"text-muted"},"Asignado: ",a.createElement("b",null,l))))))))}},a.createElement("img",{className:"avatar-group-item avatar-sm rounded-circle mb-0",src:`//${p.APP_DOMAIN}/api/profile/thumbnail/${s}`,onError:e=>e.target.src=`//${p.APP_DOMAIN}/api/profile/thumbnail/undefined`,style:{backdropFilter:"blur(40px)",marginRight:"6px"}})))),S=(i,s)=>{const e=moment(i),t=moment(s),r=moment();let n=a.createElement(a.Fragment,null);if(r.isBefore(e)){const l=r.diff(e,"hours")>12?e.format("LL"):e.fromNow();n=a.createElement("i",{className:"text-muted"},"Empieza ",l)}else if(r.isAfter(t)){const l=r.diff(t,"hours")>12?t.format("LL"):t.fromNow();n=a.createElement("i",{className:"text-muted"},"Finalizo ",l)}else{const g=t.diff(e),m=r.diff(e)/g*100,u=(h=>h<=25?"success":h<=50?"primary":h<=75?"warning":"danger")(m);n=a.createElement("div",{style:{width:"200px"}},a.createElement("p",{className:"mb-0 d-flex justify-content-between"},a.createElement("span",null,moment(i).format("DD MMM YYYY")),a.createElement("span",{className:"float-end"},moment(s).format("DD MMM YYYY"))),a.createElement("div",{className:`progress progress-bar-alt-${u} progress-xl mb-0 mt-0`},a.createElement("div",{className:`progress-bar bg-${u} progress-bar-animated`,role:"progressbar","aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",style:{width:`${m}%`}},m.toFixed(2),"%")))}return n};export{C as A,S as D,d as P,f as U};

var ke=Object.defineProperty;var Se=(s,t,r)=>t in s?ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var le=(s,t,r)=>Se(s,typeof t!="symbol"?t+"":t,r);import{r as x,j as e,C as Ee,c as Re}from"./CreateReactScript-DcwmeAVN.js";import{B as _e,A as Ie}from"./Adminto-C2tpzC-o.js";import{M as ce}from"./Modal-C2Wyq7YS.js";import{Q as Te}from"./QuillFormGroup-xZaTOaec.js";/* empty css                    */import{S as z}from"./SelectFormGroup-Csb1tKiR.js";import{p as a}from"./index-0LxMiNUP.js";import{T as De}from"./TextareaFormGroup-BKpwC6cY.js";import"./Logout-CMhpjQt5.js";import"./sweetalert2.esm.all-BB4SRWjP.js";class ve extends _e{constructor(){super(...arguments);le(this,"path","settings")}}var se=function(){return se=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},se.apply(this,arguments)},xe={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCommentChange:a.func,onCompositionEnd:a.func,onCompositionStart:a.func,onCompositionUpdate:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onInput:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func,onSkinLoadError:a.func,onThemeLoadError:a.func,onModelLoadError:a.func,onPluginLoadError:a.func,onIconsLoadError:a.func,onLanguageLoadError:a.func,onScriptsLoad:a.func,onScriptsLoadError:a.func},Le=se({apiKey:a.string,licenseKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,tabIndex:a.number,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string,tinymceScriptSrc:a.oneOfType([a.string,a.arrayOf(a.string),a.arrayOf(a.shape({src:a.string,async:a.bool,defer:a.bool}))]),rollback:a.oneOfType([a.number,a.oneOf([!1])]),scriptLoading:a.shape({async:a.bool,defer:a.bool,delay:a.number})},xe),ae=function(s){return typeof s=="function"},de=function(s){return s in xe},ue=function(s){return s.substr(2)},Ae=function(s,t,r,o,i,l,n){var c=Object.keys(i).filter(de),u=Object.keys(l).filter(de),f=c.filter(function(h){return l[h]===void 0}),g=u.filter(function(h){return i[h]===void 0});f.forEach(function(h){var N=ue(h),w=n[N];r(N,w),delete n[N]}),g.forEach(function(h){var N=o(s,h),w=ue(h);n[w]=N,t(w,N)})},Oe=function(s,t,r,o,i){return Ae(i,s.on.bind(s),s.off.bind(s),function(l,n){return function(c){var u;return(u=l(n))===null||u===void 0?void 0:u(c,s)}},t,r,o)},me=0,be=function(s){var t=Date.now(),r=Math.floor(Math.random()*1e9);return me++,s+"_"+r+me+String(t)},pe=function(s){return s!==null&&(s.tagName.toLowerCase()==="textarea"||s.tagName.toLowerCase()==="input")},he=function(s){return typeof s>"u"||s===""?[]:Array.isArray(s)?s:s.split(" ")},Pe=function(s,t){return he(s).concat(he(t))},Me=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},$e=function(s){if(!("isConnected"in Node.prototype)){for(var t=s,r=s.parentNode;r!=null;)t=r,r=t.parentNode;return t===s.ownerDocument}return s.isConnected},fe=function(s,t){s!==void 0&&(s.mode!=null&&typeof s.mode=="object"&&typeof s.mode.set=="function"?s.mode.set(t):s.setMode(t))},re=function(){return re=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},re.apply(this,arguments)},Fe=function(s,t,r){var o,i,l=s.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=t.id,l.src=t.src,l.async=(o=t.async)!==null&&o!==void 0?o:!1,l.defer=(i=t.defer)!==null&&i!==void 0?i:!1;var n=function(){l.removeEventListener("load",n),l.removeEventListener("error",c),r(t.src)},c=function(u){l.removeEventListener("load",n),l.removeEventListener("error",c),r(t.src,u)};l.addEventListener("load",n),l.addEventListener("error",c),s.head&&s.head.appendChild(l)},qe=function(s){var t={},r=function(n,c){var u=t[n];u.done=!0,u.error=c;for(var f=0,g=u.handlers;f<g.length;f++){var h=g[f];h(n,c)}u.handlers=[]},o=function(n,c,u){var f=function(R){return u!==void 0?u(R):console.error(R)};if(n.length===0){f(new Error("At least one script must be provided"));return}for(var g=0,h=!1,N=function(R,_){h||(_?(h=!0,f(_)):++g===n.length&&c())},w=0,C=n;w<C.length;w++){var y=C[w],k=t[y.src];if(k)k.done?N(y.src,k.error):k.handlers.push(N);else{var E=be("tiny-");t[y.src]={id:E,src:y.src,done:!1,error:null,handlers:[N]},Fe(s,re({id:E},y),r)}}},i=function(){for(var n,c=0,u=Object.values(t);c<u.length;c++){var f=u[c],g=s.getElementById(f.id);g!=null&&g.tagName==="SCRIPT"&&((n=g.parentNode)===null||n===void 0||n.removeChild(g))}t={}},l=function(){return s};return{loadScripts:o,deleteScripts:i,getDocument:l}},Be=function(){var s=[],t=function(i){var l=s.find(function(n){return n.getDocument()===i});return l===void 0&&(l=qe(i),s.push(l)),l},r=function(i,l,n,c,u){var f=function(){return t(i).loadScripts(l,c,u)};n>0?setTimeout(f,n):f()},o=function(){for(var i=s.pop();i!=null;i=s.pop())i.deleteScripts()};return{loadList:r,reinitialize:o}},He=Be(),te=function(s){var t=s;return t&&t.tinymce?t.tinymce:null},Ke=function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(o[l]=i[l])},s(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),K=function(){return K=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},K.apply(this,arguments)},Qe=function(s){Ke(t,s);function t(r){var o,i,l,n=s.call(this,r)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var c=n.editor,u=n.props.value;c&&u&&u!==n.currentContent&&c.undoManager.ignore(function(){if(c.setContent(u),n.valueCursor&&(!n.inline||c.hasFocus()))try{c.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(c){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&n.handleBeforeInput(c)},n.handleEditorChange=function(c){var u=n.editor;if(u&&u.initialized){var f=u.getContent();n.props.value!==void 0&&n.props.value!==f&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),f!==n.currentContent&&(n.currentContent=f,ae(n.props.onEditorChange)&&n.props.onEditorChange(f,u))}},n.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&n.handleEditorChange(c)},n.initialise=function(c){var u,f,g;c===void 0&&(c=0);var h=n.elementRef.current;if(h){if(!$e(h)){if(c===0)setTimeout(function(){return n.initialise(1)},1);else if(c<100)setTimeout(function(){return n.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var N=te(n.view);if(!N)throw new Error("tinymce should have been loaded into global scope");var w=K(K(K(K({},n.props.init),{selector:void 0,target:h,readonly:n.props.disabled,inline:n.inline,plugins:Pe((u=n.props.init)===null||u===void 0?void 0:u.plugins,n.props.plugins),toolbar:(f=n.props.toolbar)!==null&&f!==void 0?f:(g=n.props.init)===null||g===void 0?void 0:g.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(C){n.editor=C,n.bindHandlers({}),n.inline&&!pe(h)&&C.once("PostRender",function(y){C.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&ae(n.props.init.setup)&&n.props.init.setup(C)},init_instance_callback:function(C){var y,k,E=n.getInitialValue();n.currentContent=(y=n.currentContent)!==null&&y!==void 0?y:C.getContent(),n.currentContent!==E&&(n.currentContent=E,C.setContent(E),C.undoManager.clear(),C.undoManager.add(),C.setDirty(!1));var R=(k=n.props.disabled)!==null&&k!==void 0?k:!1;fe(n.editor,R?"readonly":"design"),n.props.init&&ae(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(C)}});n.inline||(h.style.visibility=""),pe(h)&&(h.value=n.getInitialValue()),N.init(w)}},n.id=n.props.id||be("tiny-react"),n.elementRef=x.createRef(),n.inline=(l=(o=n.props.inline)!==null&&o!==void 0?o:(i=n.props.init)===null||i===void 0?void 0:i.inline)!==null&&l!==void 0?l:!1,n.boundHandlers={},n}return Object.defineProperty(t.prototype,"view",{get:function(){var r,o;return(o=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var o=this,i,l;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var u;if(!o.inline||n.hasFocus())try{u=n.selection.getBookmark(3)}catch{}var f=o.valueCursor;if(n.setContent(o.props.value),!o.inline||n.hasFocus())for(var g=0,h=[u,f];g<h.length;g++){var N=h[g];if(N)try{n.selection.moveToBookmark(N),o.valueCursor=N;break}catch{}}})}if(this.props.disabled!==r.disabled){var c=(l=this.props.disabled)!==null&&l!==void 0?l:!1;fe(this.editor,c?"readonly":"design")}}},t.prototype.componentDidMount=function(){var r=this,o,i,l,n,c;if(te(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(o=this.props).onScriptsLoadError)===null||i===void 0||i.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((l=this.elementRef.current)===null||l===void 0)&&l.ownerDocument){var u=function(){var g,h;(h=(g=r.props).onScriptsLoad)===null||h===void 0||h.call(g),r.initialise()},f=function(g){var h,N;(N=(h=r.props).onScriptsLoadError)===null||N===void 0||N.call(h,g)};He.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&c!==void 0?c:0,u,f)}},t.prototype.componentWillUnmount=function(){var r=this,o=this.editor;o&&(o.off(this.changeEvents(),this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){o.off(i,r.boundHandlers[i])}),this.boundHandlers={},o.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var r,o,i,l=(i=(o=(r=te(this.view))===null||r===void 0?void 0:r.Env)===null||o===void 0?void 0:o.browser)===null||i===void 0?void 0:i.isIE();return l?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return Me()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,o=r===void 0?"div":r;return x.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return x.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,o,i=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,l=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:l}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:i,defer:l}:f});var n=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:u,async:i,defer:l}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var o=this;if(this.editor!==void 0){Oe(this.editor,r,this.props,this.boundHandlers,function(c){return o.props[c]});var i=function(c){return c.onEditorChange!==void 0||c.value!==void 0},l=i(r),n=i(this.props);!l&&n?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):l&&!n&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=Le,t.defaultProps={cloudChannel:"7"},t}(x.Component);function ge(s,t){if(s===t)return!0;if(typeof s!="object"||typeof t!="object"||s==null||t==null)return!1;const r=Object.keys(s),o=Object.keys(t);if(r.length!==o.length)return!1;for(let i of r)if(!ge(s[i],t[i]))return!1;return!0}function ze(s,t){if(s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(!ge(s[r],t[r]))return!1;return!0}const Ve=new ve,Ge=({questions:s,isOpen:t,setIsOpen:r,onModalOpen:o})=>{const[i,l]=x.useState(s),[n,c]=x.useState(s),[u,f]=x.useState(null),[g,h]=x.useState(null),[N,w]=x.useState(""),[C,y]=x.useState(""),[k,E]=x.useState(""),[R,_]=x.useState(null),[B,A]=x.useState(!1),[D,O]=x.useState([""]),[L,P]=x.useState(!1),[I,F]=x.useState([""]),V=()=>{if(!C.trim())return;const d={id:Date.now(),title:C.trim(),questions:[]};l([...i,d]),y("")},X=d=>{l(i.filter(j=>j.id!==d))},G=d=>{if(!k.trim())return;const j=B?D.filter(v=>v.trim()):null;B&&j.length===0||(l(i.map(v=>v.id===d?{...v,questions:[...v.questions,{id:Date.now(),text:k.trim(),closed:B,answers:j}]}:v)),E(""),A(!1),O([""]))},Y=(d,j)=>{l(i.map(v=>v.id===d?{...v,questions:v.questions.filter(S=>S.id!==j)}:v))},U=(d,j,v,S)=>{h(d),w(j),P(!!v),F(S?[...S]:[""])},J=()=>{const d=L?I.filter(j=>j.trim()):null;L&&d.length===0||(l(i.map(j=>({...j,questions:j.questions.map(v=>v.id===g?{...v,text:N,closed:L,answers:d}:v)}))),h(null),w(""),P(!1),F([""]))},Z=()=>{h(null),w(""),P(!1),F([""])},m=()=>O([...D,""]),p=d=>O(D.filter((j,v)=>v!==d)),M=(d,j)=>{const v=[...D];v[d]=j,O(v)},H=()=>F([...I,""]),ee=d=>F(I.filter((j,v)=>v!==d)),Q=(d,j)=>{const v=[...I];v[d]=j,F(v)},je=(d,j)=>{f({formId:d,qIndex:j})},ie=d=>d.preventDefault(),ye=(d,j,v)=>{d.preventDefault(),!(!u||u.formId!==j||u.qIndex===v)&&(l(i.map(S=>{if(S.id!==j)return S;const b=[...S.questions],[q]=b.splice(u.qIndex,1);return b.splice(v,0,q),{...S,questions:b}})),f(null))},Ne=d=>{f({type:"form",index:d})},we=(d,j)=>{if(d.preventDefault(),!u||u.type!=="form"||u.index===j)return;const v=[...i],[S]=v.splice(u.index,1);v.splice(j,0,S),l(v),f(null)},oe=x.useCallback(async()=>{await Ve.save({type:"json",name:"gemini-extra-questions",value:JSON.stringify(i)})&&c(i)},[i]);return x.useEffect(()=>{t&&(ze(i,n)||oe())},[t,i,n,oe]),e.jsx("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:!t,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{className:"btn btn-soft-danger btn-xs position-absolute",onClick:()=>r(!1),children:[e.jsx("i",{className:"mdi mdi-pan-left me-1"}),"Volver"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-start",style:{minHeight:"calc(100vh - 220px)"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-pill bg-success bg-opacity-10 text-success px-4 py-1 fw-semibold",children:"Inicio"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:"Saludo inicial (cliente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-white border text-primary px-2 py-1 fw-semibold",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("i",{className:"mdi mdi-star-four-points me-1"}),e.jsx("span",{children:"Recolección de datos (bot)"})]}),e.jsxs("div",{className:"d-flex justify-content-around text-default gap-2",children:[e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:d=>o(d,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),e.jsx("span",{children:"API Key"})]}),e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:d=>o(d,"gemini-personality","Personalidad - Gemini","text","Ej. Sé claro y respetuoso."),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),e.jsx("span",{children:"Personalidad"})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50 mb-2",style:{fontSize:"24px"}}),e.jsxs("div",{className:"w-100",style:{minWidth:"480px"},children:[i.map((d,j)=>{var v,S;return e.jsxs("div",{draggable:!0,onDragStart:()=>Ne(j),onDragOver:ie,onDrop:b=>we(b,j),className:"border rounded mb-2 shadow-sm bg-white transition-all hover:shadow",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 bg-gradient-to-r from-gray-50 to-white rounded-top cursor-pointer",onClick:()=>_(R===d.id?null:d.id),children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:"mdi mdi-drag text-gray-400"}),e.jsx("span",{className:"fw-semibold text-gray-700",children:`${j+1}. ${d.title}`}),e.jsx("span",{className:"badge bg-soft-secondary text-secondary ms-2",children:((v=d.questions)==null?void 0:v.length)||0})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`mdi ${R===d.id?"mdi-chevron-up":"mdi-chevron-down"} text-muted`}),e.jsx("button",{className:"btn btn-xs btn-outline-danger border-0 rounded-pill",onClick:b=>{b.stopPropagation(),X(d.id)},title:"Eliminar formulario",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]}),R===d.id&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded-bottom",children:[(S=d.questions)==null?void 0:S.map((b,q)=>e.jsxs("div",{draggable:!0,onDragStart:()=>je(d.id,q),onDragOver:ie,onDrop:T=>ye(T,d.id,q),onDoubleClick:()=>g!==b.id&&U(b.id,b.text,b.closed,b.answers),className:"d-flex align-items-center rounded bg-white border p-2 mb-2 shadow-xs cursor-grab active:cursor-grabbing transition-transform hover:scale-[1.01]",children:[e.jsx("i",{className:"mdi mdi-drag mt-1 me-3 text-gray-400"}),g===b.id?e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex gap-1 mb-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:N,onChange:T=>w(T.target.value),onKeyDown:T=>T.key==="Enter"&&J(),placeholder:"Texto de la pregunta"}),e.jsx("button",{className:"btn btn-xs btn-outline-success",onClick:J,children:e.jsx("i",{className:"mdi mdi-check"})}),e.jsx("button",{className:"btn btn-xs btn-outline-secondary",onClick:Z,children:e.jsx("i",{className:"mdi mdi-close"})})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`edit-closed-${b.id}`,checked:L,onChange:T=>P(T.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`edit-closed-${b.id}`,children:"Pregunta cerrada (con opciones)"})]}),L&&e.jsxs("div",{className:"mb-0 mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),I.map((T,ne)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:T,onChange:Ce=>Q(ne,Ce.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>ee(ne),children:e.jsx("i",{className:"mdi mdi-minus"})})]},ne)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:H,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"small text-gray-800 fw-medium",children:b.text}),b.closed&&e.jsx("div",{className:"mt-0",children:e.jsx("span",{className:"badge bg-soft-primary text-primary small",children:"Cerrada"})})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{className:"btn btn-xs btn-outline-primary",onClick:()=>U(b.id,b.text,b.closed,b.answers),title:"Editar",children:e.jsx("i",{className:"mdi mdi-pencil"})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger",onClick:()=>Y(d.id,b.id),title:"Eliminar",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]})]},b.id)),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nueva pregunta"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Escribe la pregunta",value:k,onChange:b=>E(b.target.value),onKeyDown:b=>b.key==="Enter"&&G(d.id)}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:()=>G(d.id),children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir"]})]}),e.jsxs("div",{className:"form-check mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`new-closed-${d.id}`,checked:B,onChange:b=>A(b.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`new-closed-${d.id}`,children:"Pregunta cerrada (con opciones)"})]}),B&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),D.map((b,q)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:b,onChange:T=>M(q,T.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>p(q),children:e.jsx("i",{className:"mdi mdi-minus"})})]},q)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:m,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]})]})]},d.id)}),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nuevo formulario"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Título del nuevo formulario",value:C,onChange:d=>y(d.target.value),onKeyDown:d=>d.key==="Enter"&&V()}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:V,children:[e.jsx("i",{className:"mdi mdi-plus"})," Crear"]})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary text-center px-2 py-1 fw-semibold cursor-pointer",onClick:d=>o(d,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("i",{className:"mdi mdi-message-text-outline me-1"})," Saludo final (asistente)"]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded-pill bg-danger bg-opacity-10 text-danger px-4 py-1 fw-semibold",children:"Fin"})]})})]})})},W=new ve,Ue=({can:s,constants:t,statuses:r})=>{const o=x.useRef(),i=x.useRef(),l=x.useRef(),n=x.useRef(),c=x.useRef(),u=x.useRef(),f=x.useRef(),g=x.useRef(),[h,N]=x.useState(),[w,C]=x.useState(),[y,k]=x.useState(window.location.hash.slice(1)||"general"),[E,R]=x.useState(!1),_=(m,p,M,H,ee="")=>{const Q=A(p);switch(N(H),C(ee),l.current.value=p,i.current.value=H,H){case"simpleHTML":c.editor.root.innerHTML=Q.value;break;case"HTML":u.current.setContent(Q.value);break;default:n.current.value=Q.value;break}$(o.current).find(".modal-title").text(M),$(o.current).modal("show")},B=async m=>{m.preventDefault();let p=n.current.value;switch(h){case"simpleHTML":p=c.editor.root.innerHTML;break;case"HTML":p=u.current.getContent();break}const M={type:i.current.value,name:l.current.value,value:p};await W.save(M)&&($(o.current).modal("hide"),location.reload())},A=m=>{const p=t.find(({name:M})=>M==m);return p||{name:m,value:null}},D=x.useRef(),O=x.useRef(),L=x.useRef(),P=x.useRef(),I=x.useRef(),F=()=>{const m=A("assignation-lead-status"),p=JSON.parse(m.value);$(I.current).find(".modal-title").text("Estados de asignacion"),D.current.value="assignation-lead-status",$(O.current).val(p==null?void 0:p.lead).trigger("change"),$(L.current).val(p==null?void 0:p.manage).trigger("change"),$(P.current).val(p==null?void 0:p.task).trigger("change"),$(I.current).modal("show")},V=()=>{const m=A("revertion-lead-status"),p=JSON.parse(m.value);$(I.current).find(".modal-title").text("Estados de reversion"),D.current.value="revertion-lead-status",$(O.current).val(p==null?void 0:p.lead).trigger("change"),$(L.current).val(p==null?void 0:p.manage).trigger("change"),$(P.current).val(p==null?void 0:p.task).trigger("change"),$(I.current).modal("show")},X=async m=>{m.preventDefault();const p={lead:O.current.value,manage:L.current.value,task:P.current.value},M={name:D.current.value,value:JSON.stringify(p),type:"json"};await W.save(M)&&($(o.current).modal("hide"),location.reload())},G=async m=>{const p={name:"finished-project-status",value:m.target.value};await W.save(p)},Y=async m=>{const p={name:"converted-lead-status",value:m.target.value};await W.save(p)},U=A("finished-project-status"),J=A("converted-lead-status");x.useEffect(()=>{window.location.hash=y},[y]),x.useEffect(()=>{$(f.current).val(U.value).select2(),$(g.current).val(J.value).select2()},[null]);const Z=A("gemini-extra-questions");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:E,children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"header-title mb-0",children:"Configura aqui las constantes del sistema"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3 mb-2",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("button",{className:`nav-link mb-1 text-start ${y==="general"?"active show":""}`,id:"v-general-tab","data-bs-toggle":"pill",href:"#v-general",role:"tab","aria-controls":"v-general","aria-selected":"true",onClick:()=>k("general"),children:"General"}),e.jsx("button",{className:`nav-link mb-1 text-start ${y==="dashboard"?"active show":""}`,id:"v-dashboard-tab","data-bs-toggle":"pill",href:"#v-dashboard",role:"tab","aria-controls":"v-dashboard","aria-selected":"true",onClick:()=>k("dashboard"),children:"Dashboard"}),e.jsx("button",{className:`nav-link mb-1 text-start ${y==="clients-leads"?"active show":""}`,id:"v-clients-leads-tab","data-bs-toggle":"pill",href:"#v-clients-leads",role:"tab","aria-controls":"v-clients-leads","aria-selected":"false",onClick:()=>k("clients-leads"),children:"Clientes y leads"}),e.jsx("button",{className:`nav-link mb-1 text-start ${y==="projects"?"active show":""}`,id:"v-projects-tab","data-bs-toggle":"pill",href:"#v-projects",role:"tab","aria-controls":"v-projects","aria-selected":"false",onClick:()=>k("projects"),children:"Proyectos"}),e.jsx("button",{className:`nav-link mb-1 text-start ${y==="email"?"active show":""}`,id:"v-email-tab","data-bs-toggle":"pill",href:"#v-email",role:"tab","aria-controls":"v-email","aria-selected":"false",onClick:()=>k("email"),children:"Correo"}),e.jsx("button",{className:`nav-link mb-1 text-start ${y==="whatsapp"?"active show":""}`,id:"v-whatsapp-tab","data-bs-toggle":"pill",href:"#v-whatsapp",role:"tab","aria-controls":"v-whatsapp","aria-selected":"false",onClick:()=>k("whatsapp"),children:"WhatsApp"}),e.jsxs("button",{className:`nav-link mb-1 text-start ${y==="generativeai"?"active show":""}`,id:"v-generativeai-tab","data-bs-toggle":"pill",href:"#v-generativeai",role:"tab","aria-controls":"v-generativeai","aria-selected":"false",onClick:()=>k("generativeai"),children:["Chat IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]})]})}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("div",{className:`tab-pane fade ${y==="general"?"show active":""} coming-soon`,id:"v-general",role:"tabpanel","aria-labelledby":"v-general-tab",children:[e.jsx("h4",{children:"Configuracion general"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${y==="dashboard"?"show active":""}`,id:"v-dashboard",role:"tabpanel","aria-labelledby":"v-dashboard-tab",children:[e.jsx("h4",{children:"Configuracion de dashboard"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de Conversión"}),e.jsx("p",{className:"card-text mb-0",children:"¿Cuál es el estado que define mejor a un lead que ha sido convertido exitosamente?"}),e.jsx("blockquote",{className:"my-1",style:{borderLeft:"4px solid #007bff",backgroundColor:"var(--bs-gray-300)",padding:"5px 10px"},children:e.jsx("small",{children:"Esta configuración nos ayudará a identificar y medir las conversiones efectivas en el sistema."})}),e.jsx(z,{eRef:g,label:"Escoge un estado",noMargin:!0,onChange:Y,children:r.filter(m=>m.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((m,p)=>e.jsx("option",{value:m.id,children:m.name},p))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${y==="clientsleads"?"show active":""}`,id:"v-clients-leads",role:"tabpanel","aria-labelledby":"v-clients-leads-tab",children:[e.jsx("h4",{children:"Configuracion de clientes y leads"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:F,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de asignacion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que asignan el usuario al cliente directamente?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:V,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de reversion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que quitan la asignacion del usuario directamente?"})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${y==="projects"?"show active":""}`,id:"v-projects",role:"tabpanel","aria-labelledby":"v-projects-tab",children:[e.jsx("h4",{children:"Configuracion de Proyectos"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de culminación"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un proyecto que ha sido terminado?"}),e.jsx(z,{eRef:f,label:"Escoge un estado",noMargin:!0,onChange:G,children:r.filter(m=>m.table_id=="cd8bd48f-c73c-4a62-9935-024139f3be5f").map((m,p)=>e.jsx("option",{value:m.id,children:m.name},p))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${y==="email"?"show active":""} coming-soon`,id:"v-email",role:"tabpanel","aria-labelledby":"v-email-tab",children:[e.jsx("h4",{children:"Configuracion de correo"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Credenciales"}),e.jsx("p",{className:"card-text mb-1",children:"De donde saldran los mensajes de correo hacia los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Correo actual: mundoweb.pe"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>{},children:[e.jsx("h5",{className:"card-title mb-1",children:"Diseño de correo para el lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que correo veran los nuevos leads cuando caigan al crm?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Correo administrador"}),e.jsx("p",{className:"card-text mb-1",children:"A que correo deseas que te enviemos un mensaje cuando se registe un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted ",style:{wordWrap:"wrap"},children:"Correo actual: gamboapalominocarlosmanuel@gmail.com"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${y==="whatsapp"?"show active":""}`,id:"v-whatsapp",role:"tabpanel","aria-labelledby":"v-whatsapp-tab",children:[e.jsx("h4",{children:"Configuracion de WhatsApp"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"whatsapp-new-lead-notification-message","Notificacion - Nuevo lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion - Nuevo lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje llegara al grupo/persona encargado de revisar los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"whatsapp-new-lead-notification-waid","Grupo/Persona encargado","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Grupo/Persona encargado"}),e.jsx("p",{className:"card-text mb-1",children:"A quien(es) debemos notificar cuando se registre un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion al lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje le llegara al lead cuando sea registrado en el sistema?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"whatsapp-assigned-message-client","Mensaje de asignación","simpleHTML","Variables disponibles: {{user}} = nombre del ejecutivo, {{lead}} = nombre del cliente"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Mensaje de asignación"}),e.jsx("p",{className:"card-text mb-1",children:"Mensaje que se enviará al lead cuando sea asignado a un usuario/ejecutivo"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${y==="generativeai"?"show active":""}`,id:"v-generativeai",role:"tabpanel","aria-labelledby":"v-generativeai-tab",children:[e.jsxs("h4",{children:["IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"API Key - Gemini"}),e.jsxs("p",{className:"card-text mb-1",children:["Configura un API key para que ",e.jsx("b",{children:"Gemini"})," interactue con nuevos clientes."]}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:m=>_(m,"gemini-what-business-do","Que hace tu empresa [Separado por comas]","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Que hace tu empresa"}),e.jsx("p",{className:"card-text mb-1",children:"Ayuda a Gemini a saber que productos y/o servicios buscan los clientes en tu empresa"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>R(!0),children:[e.jsx("h5",{className:"card-title mb-1",children:"Flujo de asistente (Beta)"}),e.jsx("p",{className:"card-text mb-1",children:"Configura el flujo de Gemini con leads para automatizar preguntas y respuestas."}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]})]})]})})]})})]}),e.jsx(Ge,{questions:JSON.parse(Z.value??"[]"),isOpen:E,setIsOpen:R,onModalOpen:_})]})}),e.jsxs(ce,{modalRef:I,title:"",onSubmit:X,size:"sm",children:[e.jsx("input",{ref:D,type:"hidden"}),e.jsxs("div",{className:"row",id:"assignation-status-container",children:[e.jsxs(z,{eRef:O,label:"Estado del lead",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:m})=>m=="e05a43e5-b3a6-46ce-8d1f-381a73498f33").sort((m,p)=>m.order-p.order).map((m,p)=>e.jsx("option",{value:m.id,children:m.name},`status-${p}`))]}),e.jsxs(z,{eRef:L,label:"Estado de gestion",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:m})=>m=="9c27e649-574a-47eb-82af-851c5d425434").sort((m,p)=>m.order-p.order).map((m,p)=>e.jsx("option",{value:m.id,children:m.name},`status-${p}`))]}),e.jsxs(z,{eRef:P,label:"Estado de la tarea",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En curso",children:"En curso"}),e.jsx("option",{value:"Realizado",children:"Realizado"})]})]})]}),e.jsx(ce,{modalRef:o,title:"",onSubmit:B,size:"md",children:e.jsxs("div",{className:"row",id:"settings-crud-container",children:[e.jsx("input",{ref:l,type:"hidden"}),e.jsx("input",{ref:i,type:"hidden"}),e.jsx("div",{style:{display:h=="text"||h==""||h==null?"block":"none"},children:e.jsx(De,{eRef:n,label:e.jsxs(e.Fragment,{children:["Valor ",w&&e.jsxs("small",{children:["(",w,")"]})]}),col:"col-12"})}),e.jsx("div",{style:{display:h=="simpleHTML"?"block":"none"},children:e.jsx(Te,{eRef:c,label:e.jsxs(e.Fragment,{children:["Valor ",w&&e.jsxs("small",{children:["(",w,")"]})]}),col:"col-12",theme:"bubble"})}),e.jsxs("div",{className:"col-12",style:{display:h=="HTML"?"block":"none"},children:[e.jsx("label",{htmlFor:"",children:"Valor de la variable"}),e.jsx(Qe,{apiKey:"k2389nfj5bxjbe7s3kkc3c6fututtaba9syfaviluaf2jew6",onInit:(m,p)=>u.current=p,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})]})})]})};Ee((s,t)=>{if(!t.can("settings","root","all","list"))return location.href="/";Re(s).render(e.jsx(Ie,{...t,title:"Configuraciones",showTitle:!1,children:e.jsx(Ue,{...t})}))});

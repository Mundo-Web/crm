var h=Object.defineProperty;var C=(r,t,n)=>t in r?h(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var p=(r,t,n)=>(C(r,typeof t!="symbol"?t+"":t,n),n);import{C as v,c as w,R as s,r as l}from"./CreateReactScript-DiMSE74L.js";import{B as D,A as B,S as P}from"./Adminto-DHVjzXyO.js";import{M as S}from"./Modal-DIHwUr7I.js";import{T,D as d}from"./DxPanelButton-6w4Akznr.js";import{I as k}from"./InputFormGroup-Bhb7n767.js";import{T as A}from"./TextareaFormGroup-DPWu9-xC.js";import{D as R}from"./DxButton-CsjWvhyj.js";import"./server.browser-BzA2yPSr.js";class F extends D{constructor(){super(...arguments);p(this,"path","processes")}}const u=new F,N=({can:r})=>{const t=l.useRef(),n=l.useRef(),c=l.useRef(),i=l.useRef(),a=l.useRef(),[b,f]=l.useState(!1),m=e=>{e!=null&&e.id?f(!0):f(!1),c.current.value=(e==null?void 0:e.id)||null,i.current.value=(e==null?void 0:e.name)||null,a.current.value=(e==null?void 0:e.description)||null,$(n.current).modal("show")},x=async e=>{e.preventDefault();const o={id:c.current.value||void 0,name:i.current.value,description:a.current.value};await u.save(o)&&($(t.current).dxDataGrid("instance").refresh(),$(n.current).modal("hide"))},E=async e=>{const{isConfirmed:o}=await P.fire({title:"Eliminar proceso",text:"¿Está seguro de eliminar este proceso?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!",cancelButtonText:"Cancelar"});!o||!await u.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return s.createElement(s.Fragment,null,s.createElement(T,{gridRef:t,title:"Procesos",rest:u,toolBar:e=>{e.unshift(d({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(t.current).dxDataGrid("instance").refresh()})),r("processes","all","create")&&e.unshift(d({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>m()}))},columns:[{dataField:"name",caption:"Proceso"},{dataField:"description",caption:"Descripcion"},{caption:"Acciones",cellTemplate:(e,{data:o})=>{r("processes","root","all","update")&&e.append(R({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>m(o)})),r("processes","root","all","delete")&&e.append(R({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash-alt",onClick:()=>E(o.id)}))},allowFiltering:!1,allowExporting:!1}]}),s.createElement(S,{modalRef:n,title:b?"Editar proceso":"Agregar proceso",onSubmit:x},s.createElement("div",{className:"row"},s.createElement("input",{ref:c,type:"hidden"}),s.createElement(k,{eRef:i,label:"Proceso",col:"col-12",required:!0}),s.createElement(A,{eRef:a,label:"Descripción",col:"col-12"}))))};v((r,t)=>{if(!t.can("processes","root","all","list"))return location.href="/";w(r).render(s.createElement(B,{...t,title:"Procesos"},s.createElement(N,{...t})))});

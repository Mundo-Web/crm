var w=Object.defineProperty;var v=(s,t,a)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var o=(s,t,a)=>(v(s,typeof t!="symbol"?t+"":t,a),a);import{m as l,R as e,G as x}from"./CreateReactScript-DiMSE74L.js";import{B as N}from"./Adminto-DvhU9O4N.js";class P extends N{constructor(){super(...arguments);o(this,"path","client-notes");o(this,"byClient",async a=>{const{result:r}=await l.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}class y extends N{constructor(){super(...arguments);o(this,"path","clients");o(this,"get",async a=>{try{const{status:r,result:n}=await l.Fetch(`/api/${this.path}/${a}`);if(!r)throw new Error((n==null?void 0:n.message)||"Ocurrio un error inesperado");return n.data}catch(r){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),null}})}}o(y,"assign",async(a,r)=>{try{const{status:n,result:c}=await l.Fetch("/api/clients/assign",{method:r?"PUT":"DELETE",body:JSON.stringify({id:a})});if(!n)throw new Error((c==null?void 0:c.message)??"Ocurrio un error inesperado");return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:c.message,type:"success"}),!0}catch(n){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:n.message,type:"danger"}),!1}}),o(y,"clientStatus",async(a,r)=>{try{const{status:n,result:c}=await l.Fetch("/api/clients/client-status",{method:"PATCH",body:JSON.stringify({client:a,status:r})});if(!n)throw new Error((c==null?void 0:c.message)??"Ocurrio un error inesperado");return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:c.message,type:"success"}),!0}catch(n){return l.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:n.message,type:"danger"}),!1}});const h=({html:s})=>e.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),C=({id:s,status:t,name:a,description:r,assigned:n,priority:c,type:E,onChange:i,ends_at:u})=>{const m={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},g={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},p={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.createElement("div",{className:"card border border-default mb-1"},e.createElement("div",{className:"card-body p-2"},e.createElement("blockquote",{className:"card-bodyquote mb-0"},e.createElement("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center"},e.createElement("div",null,i?e.createElement(e.Fragment,null,e.createElement("button",{className:`btn btn-xs ${m[t].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.createElement("i",{className:m[t].icon})," ",t," ",e.createElement("i",{className:"mdi mdi-chevron-down"})),e.createElement("div",{className:"dropdown-menu"},Object.keys(m).map((d,b)=>e.createElement("span",{key:`status-${b}`,className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>i(s,d)},e.createElement("i",{className:m[d].icon})," ",d)))):e.createElement("span",{className:`btn btn-xs ${m[t].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"}},e.createElement("i",{className:m[t].icon})," ",t)),e.createElement("small",{className:"text-muted ms-1"},"vence ",moment(u).fromNow())),e.createElement("div",{className:"mb-1"},e.createElement("span",{className:"badge bg-light text-dark me-1"},e.createElement("i",{className:g[E].icon})," ",E),e.createElement("span",{className:`badge ${p[c].color}`},c)),e.createElement("h5",{className:"mt-0"},a),r&&e.createElement("small",null,e.createElement(h,{html:r}))),n&&e.createElement("small",null,e.createElement("img",{src:`//${x.APP_DOMAIN}/api/profile/thumbnail/${n.relative_id}`,alt:n.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.createElement("b",null,n.fullname))))},O=({id:s,type:t,name:a,description:r,created_at:n,updated_at:c,user_id:E,tasks:i,onTaskChange:u,showOptions:m=!0,session:g,onDeleteNote:p,onUpdateNote:d})=>t?e.createElement("div",{className:"card border border-primary mb-2"},a&&e.createElement("div",{className:"card-header p-2 d-flex justify-content-between align-items-center"},e.createElement("h5",{className:"card-title mb-0"},e.createElement("i",{className:`${(t==null?void 0:t.icon)??"mdi mdi-clock"} me-1`})," ",a),m&&E==g.service_user.id&&e.createElement("div",{className:"dropdown"},e.createElement("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"}},e.createElement("i",{className:"mdi mdi-dots-vertical"})),e.createElement("div",{className:"dropdown-menu dropdown-menu-end"},e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>d({id:s,type:t,name:a,description:r,tasks:i})},e.createElement("i",{className:"fa fa-pen me-1"}),"Editar"),e.createElement("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(s)},e.createElement("i",{className:"fa fa-trash me-1"}),"Eliminar")))),e.createElement("div",{className:"card-body p-2"},r&&e.createElement("div",{className:"card-text"},e.createElement(h,{html:r})),i.length>0&&i.map((b,f)=>e.createElement(C,{key:`task-${f}`,...b,onChange:u})),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(n).format("LLL")," ",c!=n&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))))):e.createElement("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"}},e.createElement("p",{className:"card-text mb-0"},e.createElement("i",{className:"mdi mdi-clock me-1"}),a),e.createElement("p",{className:"card-text"},e.createElement("small",{className:"text-muted"},moment(n).format("LLL")," ",c!=n&&e.createElement("span",null,"· ",e.createElement("i",null,"Editado")))));class S extends N{constructor(){super(...arguments);o(this,"path","products-by-client");o(this,"byClient",async a=>{const{result:r}=await l.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}export{O as C,S as P,C as T,y as a,P as b};

var w=Object.defineProperty;var k=(l,s,a)=>s in l?w(l,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[s]=a;var b=(l,s,a)=>k(l,typeof s!="symbol"?s+"":s,a);import{j as e,G as y,L as C,m as L}from"./CreateReactScript-DEiMbi6B.js";import{B as $}from"./Adminto-Ct36suwH.js";const N=({className:l,style:s,html:a})=>e.jsx("div",{className:l,style:s,dangerouslySetInnerHTML:{__html:a}}),E=({id:l,status:s,name:a,description:r,assigned:d,priority:c,type:o,onChange:x,ends_at:m})=>{const i={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},j={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},p={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.jsx("div",{className:"card border border-default mb-1",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("blockquote",{className:"card-bodyquote mb-0",children:[e.jsxs("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:x?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`btn btn-xs ${i[s].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[e.jsx("i",{className:i[s].icon})," ",s," ",e.jsx("i",{className:"mdi mdi-chevron-down"})]}),e.jsx("div",{className:"dropdown-menu",children:Object.keys(i).map((t,n)=>e.jsxs("span",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>x(l,t),children:[e.jsx("i",{className:i[t].icon})," ",t]},`status-${n}`))})]}):e.jsxs("span",{className:`btn btn-xs ${i[s].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"},children:[e.jsx("i",{className:i[s].icon})," ",s]})}),e.jsxs("small",{className:"text-muted ms-1",children:["vence ",moment(m).fromNow()]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("span",{className:"badge bg-light text-dark me-1",children:[e.jsx("i",{className:j[o].icon})," ",o]}),e.jsx("span",{className:`badge ${p[c].color}`,children:c})]}),e.jsx("h5",{className:"mt-0",children:a}),r&&e.jsx("small",{children:e.jsx(N,{html:r})})]}),d&&e.jsxs("small",{children:[e.jsx("img",{src:`//${y.APP_DOMAIN}/api/profile/thumbnail/${d.relative_id}`,alt:d.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.jsx("b",{children:d.fullname})]})]})})},F=({id:l,type:s,name:a,process:r,description:d,created_at:c,updated_at:o,user_id:x,tasks:m,onTaskChange:i,showOptions:j=!0,onDeleteNote:p,onUpdateNote:t,status:n,manage_status:h,extended:u=!0})=>{const g=C;return s?e.jsxs("div",{className:"card border border-primary mb-2",children:[a&&e.jsxs("div",{className:"card-header p-2 d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",children:r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-timeline-text me-1"})," ",r," ",e.jsx("small",{className:"text-muted",children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`${(s==null?void 0:s.icon)??"mdi mdi-clock"} me-1`})," ",a]})}),j&&x==g.service_user.id&&e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"},children:e.jsx("i",{className:"mdi mdi-dots-vertical"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[e.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>t({id:l,type:s,name:a,description:d,tasks:m}),children:[e.jsx("i",{className:"fa fa-pen me-1"}),"Editar"]}),e.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(l),children:[e.jsx("i",{className:"fa fa-trash me-1"}),"Eliminar"]})]})]})]}),e.jsxs("div",{className:"card-body p-2",children:[d&&e.jsx("div",{className:"card-text",style:u?{}:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.jsx(N,{html:d})}),m.length>0&&m.map((f,v)=>e.jsx(E,{...f,onChange:i},`task-${v}`)),(n||h)&&e.jsxs("div",{className:"d-flex mb-1 gap-1",children:[n&&e.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:n.color},children:n.name}),h&&e.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:h.color},children:h.name})]}),e.jsx("p",{className:"card-text",children:e.jsxs("small",{className:"text-muted",children:[moment(c).format("LLL")," ",o!=c&&e.jsxs("span",{children:["· ",e.jsx("i",{children:"Editado"})]})]})})]})]}):e.jsxs("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"},children:[e.jsxs("p",{className:"card-text mb-0",children:[e.jsx("i",{className:"mdi mdi-clock me-1"}),a]}),e.jsx("p",{className:"card-text",children:e.jsxs("small",{className:"text-muted",children:[moment(c).format("LLL")," ",o!=c&&e.jsxs("span",{children:["· ",e.jsx("i",{children:"Editado"})]})]})})]})};class P extends ${constructor(){super(...arguments);b(this,"path","client-notes");b(this,"byClient",async a=>{const{result:r}=await L.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}export{P as C,N as H,E as T,F as a};

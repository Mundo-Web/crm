var w=Object.defineProperty;var v=(r,s,i)=>s in r?w(r,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[s]=i;var d=(r,s,i)=>v(r,typeof s!="symbol"?s+"":s,i);import{C as T,c as C,j as t,r as a}from"./CreateReactScript-DiT3hDbE.js";import{R as p}from"./ReactAppend-BXtQNJ7e.js";import{B as D,A as E,S as A}from"./Adminto-BgFZ_Mu6.js";import{M as S}from"./Modal-D-C5Rc0p.js";import{T as B,D as x}from"./DxPanelButton-DPSOyTFz.js";import{I as M}from"./InputFormGroup-CbQnIdio.js";import{T as N}from"./TextareaFormGroup-BDSgQCfr.js";import{T as h}from"./TippyButton-gfx7s0NW.js";import{S as y}from"./SelectFormGroup-CbSCTI9E.js";import{r as k}from"./server.browser-DOmhYhu7.js";class F extends D{constructor(){super(...arguments);d(this,"path","default-messages")}}const u=new F,G=({title:r})=>{const s=a.useRef(),i=a.useRef(),l=a.useRef(),o=a.useRef(),c=a.useRef(),[j,m]=a.useState(!1),f=e=>{e!=null&&e.id?m(!0):m(!1),l.current.value=(e==null?void 0:e.id)||null,o.current.value=(e==null?void 0:e.name)||null,c.current.value=(e==null?void 0:e.description)||null,$(i.current).modal("show")},g=async e=>{e.preventDefault();const n={id:l.current.value||void 0,name:o.current.value,description:c.current.value};await u.save(n)&&($(s.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},R=async e=>{const{isConfirmed:n}=await A.fire({title:"Eliminar registro",text:"Â¿Desea eliminar el registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0});!n||!await u.delete(e)||$(s.current).dxDataGrid("instance").refresh()};return t.jsxs(t.Fragment,{children:[t.jsx(B,{gridRef:s,title:r,rest:u,toolBar:e=>{e.unshift(x({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(s.current).dxDataGrid("instance").refresh()})),e.unshift(x({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>f()}))},columns:[{dataField:"name",caption:"Alias"},{dataField:"description",caption:"Descripcion",width:"60%",cellTemplate:(e,{value:n})=>{n?e.text(n):e.html(k(t.jsx("i",{className:"text-muted",children:"- Sin descripcion -"})))}},{caption:"Acciones",width:"120px",cellTemplate:(e,{data:n})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),p(e,t.jsx(h,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>f(n),children:t.jsx("i",{className:"fa fa-pen"})})),p(e,t.jsx(h,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>R(n.id),children:t.jsx("i",{className:"fa fa-trash-alt"})}))},allowFiltering:!1,allowExporting:!1}]}),t.jsx(S,{modalRef:i,title:j?"Editar mensaje predeterminado":"Agregar mensaje predeterminado",onSubmit:g,children:t.jsxs("div",{className:"row",id:"default-messages-container",children:[t.jsx("input",{ref:l,type:"hidden"}),t.jsxs(y,{label:"Tipo mensaje",dropdownParent:"#default-messages-container",children:[t.jsx("option",{value:"whatsapp",defaultChecked:!0,children:"WhatsApp"}),t.jsx("option",{value:"email",children:"Email"})]}),t.jsx(M,{eRef:o,label:"Alias",col:"col-12",required:!0}),t.jsx(N,{eRef:c,label:"Mensaje",col:"col-12",required:!0})]})})]})};T((r,s)=>{s.title="Mensajes Predeterminados",C(r).render(t.jsx(E,{...s,children:t.jsx(G,{...s})}))});

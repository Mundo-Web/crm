import{C as k,c as S,R as t,r as n}from"./CreateReactScript-BzwrR0sZ.js";import{A as P,i as b,S as B}from"./Adminto-DuoVWNzw.js";import{M as D}from"./Modal-ChNOGOpW.js";import{I as v}from"./InputFormGroup-UB2lFvd0.js";import{T as F}from"./TextareaFormGroup-Dl-3XIPv.js";import{P as T,a as A}from"./ProductCard-B_4PvCDq.js";import{N as M}from"./Number2Currency-e57Tgsuk.js";const h=new A,I=({products:a=[],types:o=[],can:L})=>{const i=n.useRef(),m=n.useRef(),u=n.useRef(),f=n.useRef(),d=n.useRef(),E=n.useRef(),[g,y]=n.useState(!1),[R,p]=n.useState(a),N=e=>{e!=null&&e.id?y(!0):y(!1),m.current.value=(e==null?void 0:e.id)||null,u.current.value=(e==null?void 0:e.name)||null,f.current.value=(e==null?void 0:e.price)||null,d.current.value=(e==null?void 0:e.color)||null,E.current.value=(e==null?void 0:e.description)||null,$(i.current).modal("show")},x=async e=>{e.preventDefault();const l={id:m.current.value||void 0,name:u.current.value,price:f.current.value,color:d.current.value,description:E.current.value},s=await h.save(l);if(!s)return;$(i.current).modal("hide");const c=structuredClone(R).map(r=>r.id==s.id?s:r);c.find(r=>r.id==s.id)||c.push(s),p(c)},w=async({id:e,status:l})=>{await h.status({id:e,status:l})&&p(c=>c.map(r=>(r.id==e&&(r.status=1),r)))},C=async e=>{const{isConfirmed:l}=await B.fire({title:"Estas seguro?",text:"No podras revertir esta accion!",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});!l||!await h.delete(e)||p(c=>c.filter(r=>r.id!=e))};return t.createElement(t.Fragment,null,t.createElement("div",{className:"row"},t.createElement("div",{className:"col-12"},t.createElement("div",{className:"card"},t.createElement("div",{className:"card-header"},t.createElement("div",{className:"float-end"},t.createElement("button",{className:"btn btn-success btn-sm",onClick:N},t.createElement("i",{className:"fa fa-plus me-1"}),"Agregar producto")),t.createElement("h4",{className:"header-title my-0"},"Lista de productos")),t.createElement("div",{className:"card-body",style:{height:"calc(100vh - 160px)",overflowY:"auto"}},t.createElement("div",{className:"row mb-4"},t.createElement("div",{className:"text-center"})),t.createElement("div",{className:"d-flex flex-wrap align-items-center justify-content-center gap-3",style:{height:"max-height"}},R.map((e,l)=>t.createElement(T,{key:l,style:{width:"300px",textDecorationLine:e.status==null&&"line-through",opacity:e.status==null&&.5},cardStyle:{border:`1px solid ${e.color}44`,backgroundColor:`${e.color}11`}},t.createElement("h4",{className:`${e.ribbon?"ms-4":""} text-center text-truncate line-clamp-2`,style:{cursor:e.color}},e.name),t.createElement("table",null,t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{style:{width:"100%"}},t.createElement("small",{className:"mb-1",style:{overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,height:"36px"}},e.description||"- Sin descripciÃ³n -"),t.createElement("b",null,"S/. ",M(e.price))),t.createElement("td",{className:"text-end"},e.status==null?t.createElement(b,{content:"Restaurar"},t.createElement("button",{className:"btn btn-xs btn-soft-dark fas fa-trash-restore",onClick:()=>w({id:e.id,status:!1})})):t.createElement(t.Fragment,null,t.createElement(b,{content:"Editar"},t.createElement("button",{className:"btn btn-xs btn-soft-primary fa fa-pen mb-1",onClick:()=>N(e)})),t.createElement(b,{content:"Eliminar"},t.createElement("button",{className:"btn btn-xs btn-soft-danger fa fa-times",onClick:()=>C(e.id)})))))))))))))),t.createElement(D,{modalRef:i,title:g?"Editar producto":"Agregar producto",onSubmit:x,size:"sm"},t.createElement("div",{className:"row",id:"main-container"},t.createElement("input",{ref:m,type:"hidden"}),t.createElement(v,{eRef:u,label:"Producto",col:"col-12",required:!0}),t.createElement(v,{eRef:f,label:"Precio",col:"col-7",type:"number",step:.01}),t.createElement(v,{eRef:d,label:"Color",col:"col-5",type:"color"}),t.createElement(F,{eRef:E,label:"Descripcion",col:"col-12"}))))};k((a,o)=>{S(a).render(t.createElement(P,{...o,title:"Cuadro de control"},t.createElement(I,{...o})))});

var k=Object.defineProperty;var y=(l,e,a)=>e in l?k(l,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[e]=a;var b=(l,e,a)=>y(l,typeof e!="symbol"?e+"":e,a);import{j as s,G as N,L as C,m as L}from"./CreateReactScript-DcwmeAVN.js";import{B as $}from"./Adminto-2Pb5vLDf.js";const g=({className:l,style:e,html:a})=>s.jsx("div",{className:l,style:e,dangerouslySetInnerHTML:{__html:a}}),E=({id:l,status:e,name:a,description:r,assigned:i,priority:c,type:m,onChange:x,ends_at:t})=>{const d={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},j={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},p={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return s.jsx("div",{className:"card border border-default mb-1",children:s.jsxs("div",{className:"card-body p-2",children:[s.jsxs("blockquote",{className:"card-bodyquote mb-0",children:[s.jsxs("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center",children:[s.jsx("div",{children:x?s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:`btn btn-xs ${d[e].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[s.jsx("i",{className:d[e].icon})," ",e," ",s.jsx("i",{className:"mdi mdi-chevron-down"})]}),s.jsx("div",{className:"dropdown-menu",children:Object.keys(d).map((n,o)=>s.jsxs("span",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>x(l,n),children:[s.jsx("i",{className:d[n].icon})," ",n]},`status-${o}`))})]}):s.jsxs("span",{className:`btn btn-xs ${d[e].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"},children:[s.jsx("i",{className:d[e].icon})," ",e]})}),s.jsxs("small",{className:"text-muted ms-1",children:["vence ",moment(t).fromNow()]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("span",{className:"badge bg-light text-dark me-1",children:[s.jsx("i",{className:j[m].icon})," ",m]}),s.jsx("span",{className:`badge ${p[c].color}`,children:c})]}),s.jsx("h5",{className:"mt-0",children:a}),r&&s.jsx("small",{children:s.jsx(g,{html:r})})]}),i&&s.jsxs("small",{children:[s.jsx("img",{src:`//${N.APP_DOMAIN}/api/profile/thumbnail/${i.relative_id}`,onError:n=>{n.target.src=`//${N.APP_DOMAIN}/assets/img/user-404.svg`},alt:i.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",s.jsx("b",{children:i.fullname})]})]})})},B=({id:l,type:e,name:a,process:r,description:i,created_at:c,updated_at:m,user_id:x,tasks:t,onTaskChange:d,showOptions:j=!0,onDeleteNote:p,onUpdateNote:n,status:o,manage_status:h,extended:u=!0})=>{const f=C;return e?s.jsxs("div",{className:"card border border-primary mb-2",children:[a&&s.jsxs("div",{className:"card-header p-2 d-flex justify-content-between align-items-center",children:[s.jsx("h5",{className:"card-title mb-0",children:r?s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"mdi mdi-timeline-text me-1"})," ",r," ",s.jsx("small",{className:"text-muted",children:a})]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:`${(e==null?void 0:e.icon)??"mdi mdi-clock"} me-1`})," ",a]})}),j&&x==f.service_user.id&&s.jsxs("div",{className:"dropdown",children:[s.jsx("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"},children:s.jsx("i",{className:"mdi mdi-dots-vertical"})}),s.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[s.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>n({id:l,type:e,name:a,description:i,tasks:t}),children:[s.jsx("i",{className:"fa fa-pen me-1"}),"Editar"]}),s.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>p(l),children:[s.jsx("i",{className:"fa fa-trash me-1"}),"Eliminar"]})]})]})]}),s.jsxs("div",{className:"card-body p-2",children:[i&&s.jsx("div",{className:"card-text",style:u?{}:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.jsx(g,{html:i})}),t.length>0&&t.map((v,w)=>s.jsx(E,{...v,onChange:d},`task-${w}`)),(o||h)&&s.jsxs("div",{className:"d-flex mb-1 gap-1",children:[o&&s.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:o.color},children:o.name}),h&&s.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:h.color},children:h.name})]}),s.jsx("p",{className:"card-text",children:s.jsxs("small",{className:"text-muted",children:[moment(c).format("LLL")," ",m!=c&&s.jsxs("span",{children:["· ",s.jsx("i",{children:"Editado"})]})]})})]})]}):s.jsxs("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"},children:[s.jsxs("p",{className:"card-text mb-0",children:[s.jsx("i",{className:"mdi mdi-clock me-1"}),a]}),s.jsx("p",{className:"card-text",children:s.jsxs("small",{className:"text-muted",children:[moment(c).format("LLL")," ",m!=c&&s.jsxs("span",{children:["· ",s.jsx("i",{children:"Editado"})]})]})})]})};class F extends ${constructor(){super(...arguments);b(this,"path","client-notes");b(this,"byClient",async a=>{const{result:r}=await L.Fetch(`/api/${this.path}/client/${a}`);return(r==null?void 0:r.data)??[]})}}export{F as C,g as H,E as T,B as a};

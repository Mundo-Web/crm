import{C as x,c as f,j as e,r as h}from"./CreateReactScript-DkPHjjj8.js";/* empty css                    */import{T as b}from"./TasksRest-BZ4CFBnA.js";import{A as u,i as g}from"./Adminto-mifwD4qb.js";import"./sweetalert2.esm.all-DXx0rc8u.js";import{T as j}from"./Table-D7XK6Zdh.js";import{R as r}from"./ReactAppend-2uKMbMF6.js";import{D as y}from"./DxBox-BfVO2yKJ.js";import{D as T}from"./Dropdown-DRVw3j1u.js";import{D as k}from"./DropdownItem-DfT04iOc.js";import{D as l}from"./DxPanelButton-Bv__XQ_F.js";import"./Logout-8TYPfS2o.js";import"./server.browser-2qRe4Lqt.js";import"./default-OJoxau5-.js";import"./index-NXiu0Ygb.js";const d=new b,N=()=>{const o=h.useRef(),a={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},n={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},c={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}},m=async(i,t)=>{await d.status({id:i,status:t})&&$(o.current).dxDataGrid("instance").refresh()};return e.jsx(e.Fragment,{children:e.jsx(j,{gridRef:o,title:"Tareas",rest:d,toolBar:i=>{i.unshift(l({className:"btn btn-xs btn-soft-dark",text:"Actualizar",title:"Refrescar tabla",icon:"fas fa-undo-alt",onClick:()=>$(o.current).dxDataGrid("instance").refresh()})),i.unshift(l({className:"btn btn-xs btn-soft-primary",text:"Nuevo",title:"Agregar registro",icon:"fa fa-plus",onClick:()=>onOpenModal()}))},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"status",caption:"Estado",width:"120px",cellTemplate:(i,{data:t})=>{i.attr("style","overflow: visible"),i.append(y([{height:"28px",children:e.jsx(T,{className:`btn btn-xs ${a[t.status].color} rounded-pill`,title:t.status,tippy:"Actualizar estado",icon:{icon:a[t.status].icon,color:"#ffffff"},children:Object.keys(a).map((s,p)=>e.jsxs(k,{onClick:()=>m(t.id,s),children:[e.jsx("i",{className:a[s].icon})," ",s]},`item-${p}`))})}]))}},{dataField:"name",caption:"Titulo",dataType:"string",cellTemplate:(i,{data:t})=>{r(i,e.jsxs("div",{children:[e.jsx("b",{className:"d-block my-0",children:t.name}),e.jsxs("div",{className:"mb-0",children:[e.jsxs("span",{class:"badge bg-light text-dark me-1",children:[e.jsx("i",{className:n[t.type].icon})," ",t.type]}),e.jsx("span",{class:`badge ${c[t.priority].color}`,children:t.priority})]})]}))}},{dataField:"type",caption:"Tipo",dataType:"string",cellTemplate:(i,{data:t})=>{i.text(t.type),i.prepend(`<i class="${n[t.type].icon} me-1"></i>`)},visible:!1},{dataField:"priority",caption:"Prioridad",dataType:"string",alignment:"center",cellTemplate:(i,{data:t})=>{r(i,e.jsx("span",{className:`badge ${c[t.priority].color}`,children:t.priority}))},visible:!1},{dataField:"client_note.client.contact_name",caption:"Contacto asociado",cellTemplate:(i,{data:t})=>{const s=t.client_note.client;r(i,e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("b",{className:"d-block my-0 text-truncate",children:s.contact_name}),e.jsxs("small",{children:[e.jsx("i",{className:"mdi mdi-phone me-1"}),s.country_prefix||"",s.contact_phone]})]}),e.jsx(g,{content:"Ver lead",children:e.jsx("a",{className:"btn btn-sm btn-white rounded-pill",href:`/leads/${s.id}`,children:e.jsx("i",{className:"mdi mdi-arrow-top-right"})})})]}))}},{dataField:"ends_at",caption:"Fecha de vencimiento",cellTemplate:(i,{data:t})=>{i.text(moment(t.ends_at).format("LLL"))}}]})})};x((o,a)=>{f(o).render(e.jsx(u,{...a,title:"Tareas",children:e.jsx(N,{...a})}))});

var ke=Object.defineProperty;var Se=(s,t,r)=>t in s?ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var me=(s,t,r)=>Se(s,typeof t!="symbol"?t+"":t,r);import{r as h,j as e,C as Ee,c as Re}from"./CreateReactScript-BFvya1e4.js";import{B as _e,A as De}from"./Adminto-DfVVRg8J.js";import{M as pe}from"./Modal-iCuGrA8v.js";import{Q as Le}from"./QuillFormGroup--ps7boOr.js";/* empty css                    */import{S as Q}from"./SelectFormGroup-Bfxlmv2p.js";import{p as n}from"./index-BFJaUxB-.js";import{T as Ie}from"./TextareaFormGroup-CyGfTpf_.js";import{I as Te}from"./InputFormGroup-C8S7uBe5.js";import"./Logout-DJpgKGyv.js";import"./sweetalert2.esm.all-DdfLDKBM.js";class je extends _e{constructor(){super(...arguments);me(this,"path","settings")}}var de=function(){return de=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},de.apply(this,arguments)},ye={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},Ae=de({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},ye),le=function(s){return typeof s=="function"},he=function(s){return s in ye},fe=function(s){return s.substr(2)},Oe=function(s,t,r,o,i,c,a){var u=Object.keys(i).filter(he),p=Object.keys(c).filter(he),f=u.filter(function(v){return c[v]===void 0}),j=p.filter(function(v){return i[v]===void 0});f.forEach(function(v){var y=fe(v),C=a[y];r(y,C),delete a[y]}),j.forEach(function(v){var y=o(s,v),C=fe(v);a[C]=y,t(C,y)})},$e=function(s,t,r,o,i){return Oe(i,s.on.bind(s),s.off.bind(s),function(c,a){return function(u){var p;return(p=c(a))===null||p===void 0?void 0:p(u,s)}},t,r,o)},ve=0,Ne=function(s){var t=Date.now(),r=Math.floor(Math.random()*1e9);return ve++,s+"_"+r+ve+String(t)},xe=function(s){return s!==null&&(s.tagName.toLowerCase()==="textarea"||s.tagName.toLowerCase()==="input")},be=function(s){return typeof s>"u"||s===""?[]:Array.isArray(s)?s:s.split(" ")},Me=function(s,t){return be(s).concat(be(t))},Pe=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Fe=function(s){if(!("isConnected"in Node.prototype)){for(var t=s,r=s.parentNode;r!=null;)t=r,r=t.parentNode;return t===s.ownerDocument}return s.isConnected},ge=function(s,t){s!==void 0&&(s.mode!=null&&typeof s.mode=="object"&&typeof s.mode.set=="function"?s.mode.set(t):s.setMode(t))},ue=function(){return ue=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},ue.apply(this,arguments)},qe=function(s,t,r){var o,i,c=s.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=t.id,c.src=t.src,c.async=(o=t.async)!==null&&o!==void 0?o:!1,c.defer=(i=t.defer)!==null&&i!==void 0?i:!1;var a=function(){c.removeEventListener("load",a),c.removeEventListener("error",u),r(t.src)},u=function(p){c.removeEventListener("load",a),c.removeEventListener("error",u),r(t.src,p)};c.addEventListener("load",a),c.addEventListener("error",u),s.head&&s.head.appendChild(c)},Be=function(s){var t={},r=function(a,u){var p=t[a];p.done=!0,p.error=u;for(var f=0,j=p.handlers;f<j.length;f++){var v=j[f];v(a,u)}p.handlers=[]},o=function(a,u,p){var f=function(w){return p!==void 0?p(w):console.error(w)};if(a.length===0){f(new Error("At least one script must be provided"));return}for(var j=0,v=!1,y=function(w,L){v||(L?(v=!0,f(L)):++j===a.length&&u())},C=0,N=a;C<N.length;C++){var S=N[C],k=t[S.src];if(k)k.done?y(S.src,k.error):k.handlers.push(y);else{var D=Ne("tiny-");t[S.src]={id:D,src:S.src,done:!1,error:null,handlers:[y]},qe(s,ue({id:D},S),r)}}},i=function(){for(var a,u=0,p=Object.values(t);u<p.length;u++){var f=p[u],j=s.getElementById(f.id);j!=null&&j.tagName==="SCRIPT"&&((a=j.parentNode)===null||a===void 0||a.removeChild(j))}t={}},c=function(){return s};return{loadScripts:o,deleteScripts:i,getDocument:c}},He=function(){var s=[],t=function(i){var c=s.find(function(a){return a.getDocument()===i});return c===void 0&&(c=Be(i),s.push(c)),c},r=function(i,c,a,u,p){var f=function(){return t(i).loadScripts(c,u,p)};a>0?setTimeout(f,a):f()},o=function(){for(var i=s.pop();i!=null;i=s.pop())i.deleteScripts()};return{loadList:r,reinitialize:o}},Qe=He(),ce=function(s){var t=s;return t&&t.tinymce?t.tinymce:null},Ke=function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(o[c]=i[c])},s(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),G=function(){return G=Object.assign||function(s){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},G.apply(this,arguments)},ze=function(s){Ke(t,s);function t(r){var o,i,c,a=s.call(this,r)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var u=a.editor,p=a.props.value;u&&p&&p!==a.currentContent&&u.undoManager.ignore(function(){if(u.setContent(p),a.valueCursor&&(!a.inline||u.hasFocus()))try{u.selection.moveToBookmark(a.valueCursor)}catch{}}),a.rollbackTimer=void 0},a.handleBeforeInput=function(u){if(a.props.value!==void 0&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch{}},a.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&a.handleBeforeInput(u)},a.handleEditorChange=function(u){var p=a.editor;if(p&&p.initialized){var f=p.getContent();a.props.value!==void 0&&a.props.value!==f&&a.props.rollback!==!1&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,typeof a.props.rollback=="number"?a.props.rollback:200))),f!==a.currentContent&&(a.currentContent=f,le(a.props.onEditorChange)&&a.props.onEditorChange(f,p))}},a.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&a.handleEditorChange(u)},a.initialise=function(u){var p,f,j;u===void 0&&(u=0);var v=a.elementRef.current;if(v){if(!Fe(v)){if(u===0)setTimeout(function(){return a.initialise(1)},1);else if(u<100)setTimeout(function(){return a.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var y=ce(a.view);if(!y)throw new Error("tinymce should have been loaded into global scope");var C=G(G(G(G({},a.props.init),{selector:void 0,target:v,readonly:a.props.disabled,inline:a.inline,plugins:Me((p=a.props.init)===null||p===void 0?void 0:p.plugins,a.props.plugins),toolbar:(f=a.props.toolbar)!==null&&f!==void 0?f:(j=a.props.init)===null||j===void 0?void 0:j.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(N){a.editor=N,a.bindHandlers({}),a.inline&&!xe(v)&&N.once("PostRender",function(S){N.setContent(a.getInitialValue(),{no_events:!0})}),a.props.init&&le(a.props.init.setup)&&a.props.init.setup(N)},init_instance_callback:function(N){var S,k,D=a.getInitialValue();a.currentContent=(S=a.currentContent)!==null&&S!==void 0?S:N.getContent(),a.currentContent!==D&&(a.currentContent=D,N.setContent(D),N.undoManager.clear(),N.undoManager.add(),N.setDirty(!1));var w=(k=a.props.disabled)!==null&&k!==void 0?k:!1;ge(a.editor,w?"readonly":"design"),a.props.init&&le(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(N)}});a.inline||(v.style.visibility=""),xe(v)&&(v.value=a.getInitialValue()),y.init(C)}},a.id=a.props.id||Ne("tiny-react"),a.elementRef=h.createRef(),a.inline=(c=(o=a.props.inline)!==null&&o!==void 0?o:(i=a.props.init)===null||i===void 0?void 0:i.inline)!==null&&c!==void 0?c:!1,a.boundHandlers={},a}return Object.defineProperty(t.prototype,"view",{get:function(){var r,o;return(o=(r=this.elementRef.current)===null||r===void 0?void 0:r.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(r){var o=this,i,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(r),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==r.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var a=this.editor;a.undoManager.transact(function(){var p;if(!o.inline||a.hasFocus())try{p=a.selection.getBookmark(3)}catch{}var f=o.valueCursor;if(a.setContent(o.props.value),!o.inline||a.hasFocus())for(var j=0,v=[p,f];j<v.length;j++){var y=v[j];if(y)try{a.selection.moveToBookmark(y),o.valueCursor=y;break}catch{}}})}if(this.props.disabled!==r.disabled){var u=(c=this.props.disabled)!==null&&c!==void 0?c:!1;ge(this.editor,u?"readonly":"design")}}},t.prototype.componentDidMount=function(){var r=this,o,i,c,a,u;if(ce(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(o=this.props).onScriptsLoadError)===null||i===void 0||i.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var p=function(){var j,v;(v=(j=r.props).onScriptsLoad)===null||v===void 0||v.call(j),r.initialise()},f=function(j){var v,y;(y=(v=r.props).onScriptsLoadError)===null||y===void 0||y.call(v,j)};Qe.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.delay)!==null&&u!==void 0?u:0,p,f)}},t.prototype.componentWillUnmount=function(){var r=this,o=this.editor;o&&(o.off(this.changeEvents(),this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){o.off(i,r.boundHandlers[i])}),this.boundHandlers={},o.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var r,o,i,c=(i=(o=(r=ce(this.view))===null||r===void 0?void 0:r.Env)===null||o===void 0?void 0:o.browser)===null||i===void 0?void 0:i.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return Pe()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var r=this.props.tagName,o=r===void 0?"div":r;return h.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return h.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var r,o,i=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.async,c=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:c}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:i,defer:c}:f});var a=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",p="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(a,"/tinymce.min.js");return[{src:p,async:i,defer:c}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(r){var o=this;if(this.editor!==void 0){$e(this.editor,r,this.props,this.boundHandlers,function(u){return o.props[u]});var i=function(u){return u.onEditorChange!==void 0||u.value!==void 0},c=i(r),a=i(this.props);!c&&a?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!a&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=Ae,t.defaultProps={cloudChannel:"7"},t}(h.Component);function we(s,t){if(s===t)return!0;if(typeof s!="object"||typeof t!="object"||s==null||t==null)return!1;const r=Object.keys(s),o=Object.keys(t);if(r.length!==o.length)return!1;for(let i of r)if(!we(s[i],t[i]))return!1;return!0}function Ge(s,t){if(s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(!we(s[r],t[r]))return!1;return!0}const Ve=new je,Je=({questions:s,isOpen:t,setIsOpen:r,onModalOpen:o})=>{const[i,c]=h.useState(s),[a,u]=h.useState(s),[p,f]=h.useState(null),[j,v]=h.useState(null),[y,C]=h.useState(""),[N,S]=h.useState(""),[k,D]=h.useState(""),[w,L]=h.useState(null),[P,V]=h.useState(!1),[_,z]=h.useState([""]),[E,O]=h.useState(!1),[A,I]=h.useState([""]),B=()=>{if(!N.trim())return;const d={id:Date.now(),title:N.trim(),questions:[]};c([...i,d]),S("")},H=d=>{c(i.filter(b=>b.id!==d))},J=d=>{if(!k.trim())return;const b=P?_.filter(x=>x.trim()):null;P&&b.length===0||(c(i.map(x=>x.id===d?{...x,questions:[...x.questions,{id:Date.now(),text:k.trim(),closed:P,answers:b}]}:x)),D(""),V(!1),z([""]))},Y=(d,b)=>{c(i.map(x=>x.id===d?{...x,questions:x.questions.filter(R=>R.id!==b)}:x))},U=(d,b,x,R)=>{v(d),C(b),O(!!x),I(R?[...R]:[""])},W=()=>{const d=E?A.filter(b=>b.trim()):null;E&&d.length===0||(c(i.map(b=>({...b,questions:b.questions.map(x=>x.id===j?{...x,text:y,closed:E,answers:d}:x)}))),v(null),C(""),O(!1),I([""]))},Z=()=>{v(null),C(""),O(!1),I([""])},ee=()=>z([..._,""]),ae=d=>z(_.filter((b,x)=>x!==d)),ne=(d,b)=>{const x=[..._];x[d]=b,z(x)},te=()=>I([...A,""]),se=d=>I(A.filter((b,x)=>x!==d)),re=(d,b)=>{const x=[...A];x[d]=b,I(x)},ie=(d,b)=>{f({formId:d,qIndex:b})},X=d=>d.preventDefault(),l=(d,b,x)=>{d.preventDefault(),!(!p||p.formId!==b||p.qIndex===x)&&(c(i.map(R=>{if(R.id!==b)return R;const g=[...R.questions],[q]=g.splice(p.qIndex,1);return g.splice(x,0,q),{...R,questions:g}})),f(null))},m=d=>{f({type:"form",index:d})},M=(d,b)=>{if(d.preventDefault(),!p||p.type!=="form"||p.index===b)return;const x=[...i],[R]=x.splice(p.index,1);x.splice(b,0,R),c(x),f(null)},F=h.useCallback(async()=>{await Ve.save({type:"json",name:"gemini-extra-questions",value:JSON.stringify(i)})&&u(i)},[i]);return h.useEffect(()=>{t&&(Ge(i,a)||F())},[t,i,a,F]),e.jsx("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:!t,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("button",{className:"btn btn-soft-danger btn-xs position-absolute",onClick:()=>r(!1),children:[e.jsx("i",{className:"mdi mdi-pan-left me-1"}),"Volver"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-start",style:{minHeight:"calc(100vh - 220px)"},children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsx("div",{className:"rounded-pill bg-success bg-opacity-10 text-success px-4 py-1 fw-semibold",children:"Inicio"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:"Saludo inicial (cliente)"}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary px-2 py-1 fw-semibold",children:[e.jsx("span",{className:"d-block",children:"Mensaje inicial (Bot)"}),e.jsxs("small",{className:"d-block border-bottom fw-normal cursor-pointer text-center mx-auto",style:{width:"max-content"},onClick:d=>o(d,"gemini-first-message","Mensaje inicial","text","Hola soy boti, me permites tus datos personales"),children:[e.jsx("i",{className:"mdi mdi-chat me-1"}),e.jsx("span",{children:"Mensaje inicial"})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-white border text-primary px-2 py-1 fw-semibold",children:[e.jsxs("div",{className:"mb-1 text-center",children:[e.jsx("i",{className:"mdi mdi-star-four-points me-1"}),e.jsx("span",{children:"Recolección de datos (bot)"})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-center text-default gap-2",style:{maxWidth:"200px"},children:[e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:d=>o(d,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("i",{className:"mdi mdi-key me-1"}),e.jsx("span",{children:"API Key"})]}),e.jsxs("small",{className:"border-bottom fw-normal cursor-pointer",onClick:d=>o(d,"gemini-personality","Personalidad - Gemini","text","Ej. Sé claro y respetuoso."),children:[e.jsx("i",{className:"mdi mdi-pencil me-1"}),e.jsx("span",{children:"Personalidad"})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50 mb-2",style:{fontSize:"24px"}}),e.jsxs("div",{className:"w-100",style:{minWidth:"480px"},children:[i.map((d,b)=>{var x,R;return e.jsxs("div",{draggable:!0,onDragStart:()=>m(b),onDragOver:X,onDrop:g=>M(g,b),className:"border rounded mb-2 shadow-sm bg-white transition-all hover:shadow",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 bg-gradient-to-r from-gray-50 to-white rounded-top cursor-pointer",onClick:()=>L(w===d.id?null:d.id),children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:"mdi mdi-drag text-gray-400"}),e.jsx("span",{className:"fw-semibold text-gray-700",children:`${b+1}. ${d.title}`}),e.jsx("span",{className:"badge bg-soft-secondary text-secondary ms-2",children:((x=d.questions)==null?void 0:x.length)||0})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:`mdi ${w===d.id?"mdi-chevron-up":"mdi-chevron-down"} text-muted`}),e.jsx("button",{className:"btn btn-xs btn-outline-danger border-0 rounded-pill",onClick:g=>{g.stopPropagation(),H(d.id)},title:"Eliminar formulario",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]}),w===d.id&&e.jsxs("div",{className:"p-2 bg-gray-50 rounded-bottom",children:[(R=d.questions)==null?void 0:R.map((g,q)=>e.jsxs("div",{draggable:!0,onDragStart:()=>ie(d.id,q),onDragOver:X,onDrop:T=>l(T,d.id,q),onDoubleClick:()=>j!==g.id&&U(g.id,g.text,g.closed,g.answers),className:"d-flex align-items-center rounded bg-white border p-2 mb-2 shadow-xs cursor-grab active:cursor-grabbing transition-transform hover:scale-[1.01]",children:[e.jsx("i",{className:"mdi mdi-drag mt-1 me-3 text-gray-400"}),j===g.id?e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex gap-1 mb-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:T=>C(T.target.value),onKeyDown:T=>T.key==="Enter"&&W(),placeholder:"Texto de la pregunta"}),e.jsx("button",{className:"btn btn-xs btn-outline-success",onClick:W,children:e.jsx("i",{className:"mdi mdi-check"})}),e.jsx("button",{className:"btn btn-xs btn-outline-secondary",onClick:Z,children:e.jsx("i",{className:"mdi mdi-close"})})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`edit-closed-${g.id}`,checked:E,onChange:T=>O(T.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`edit-closed-${g.id}`,children:"Pregunta cerrada (con opciones)"})]}),E&&e.jsxs("div",{className:"mb-0 mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),A.map((T,oe)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:T,onChange:Ce=>re(oe,Ce.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>se(oe),children:e.jsx("i",{className:"mdi mdi-minus"})})]},oe)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:te,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"small text-gray-800 fw-medium",children:g.text}),g.closed&&e.jsx("div",{className:"mt-0",children:e.jsx("span",{className:"badge bg-soft-primary text-primary small",children:"Cerrada"})})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{className:"btn btn-xs btn-outline-primary",onClick:()=>U(g.id,g.text,g.closed,g.answers),title:"Editar",children:e.jsx("i",{className:"mdi mdi-pencil"})}),e.jsx("button",{className:"btn btn-xs btn-outline-danger",onClick:()=>Y(d.id,g.id),title:"Eliminar",children:e.jsx("i",{className:"mdi mdi-trash-can"})})]})]})]},g.id)),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nueva pregunta"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Escribe la pregunta",value:k,onChange:g=>D(g.target.value),onKeyDown:g=>g.key==="Enter"&&J(d.id)}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:()=>J(d.id),children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir"]})]}),e.jsxs("div",{className:"form-check mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`new-closed-${d.id}`,checked:P,onChange:g=>V(g.target.checked)}),e.jsx("label",{className:"form-check-label small fw-medium",htmlFor:`new-closed-${d.id}`,children:"Pregunta cerrada (con opciones)"})]}),P&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"form-label small fw-semibold mb-2 text-gray-600",children:"Posibles respuestas:"}),_.map((g,q)=>e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",value:g,onChange:T=>ne(q,T.target.value),placeholder:"Respuesta"}),e.jsx("button",{className:"btn btn-outline-danger rounded-end-pill",onClick:()=>ae(q),children:e.jsx("i",{className:"mdi mdi-minus"})})]},q)),e.jsxs("button",{className:"btn btn-sm btn-outline-primary rounded-pill",onClick:ee,children:[e.jsx("i",{className:"mdi mdi-plus"})," Añadir respuesta"]})]})]})]})]},d.id)}),e.jsxs("div",{className:"bg-white rounded border-dashed border-2 border-gray-300",children:[e.jsx("label",{className:"form-label small fw-semibold text-gray-600 mb-2",children:"Nuevo formulario"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control rounded-start-pill",placeholder:"Título del nuevo formulario",value:N,onChange:d=>S(d.target.value),onKeyDown:d=>d.key==="Enter"&&B()}),e.jsxs("button",{className:"btn btn-sm btn-primary rounded-end-pill",onClick:B,children:[e.jsx("i",{className:"mdi mdi-plus"})," Crear"]})]})]})]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsxs("div",{className:"rounded bg-primary bg-opacity-10 text-primary text-center px-2 py-1 fw-semibold cursor-pointer",onClick:d=>o(d,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("i",{className:"mdi mdi-message-text-outline me-1"})," Saludo final (asistente)"]}),e.jsx("i",{className:"d-block mdi mdi-pan-down text-secondary opacity-50",style:{fontSize:"24px"}}),e.jsx("div",{className:"rounded-pill bg-danger bg-opacity-10 text-danger px-4 py-1 fw-semibold",children:"Fin"})]})})]})})},K=new je,Ue=({can:s,constants:t,statuses:r})=>{const o=h.useRef(),i=h.useRef(),c=h.useRef(),a=h.useRef(),u=h.useRef(),p=h.useRef(),f=h.useRef(),j=h.useRef(),v=h.useRef(),y=h.useRef(),C=h.useRef(),[N,S]=h.useState(),[k,D]=h.useState(),[w,L]=h.useState(window.location.hash.slice(1)||"general"),[P,V]=h.useState(!1),_=(l,m,M,F,d="")=>{const b=E(m);switch(S(F),D(d),c.current.value=m,i.current.value=F,F){case"simpleHTML":u.editor.root.innerHTML=b.value;break;case"HTML":p.current.setContent(b.value);break;default:a.current.value=b.value;break}$(o.current).find(".modal-title").text(M),$(o.current).modal("show")},z=async l=>{l.preventDefault();let m=a.current.value;switch(N){case"simpleHTML":m=u.editor.root.innerHTML;break;case"HTML":m=p.current.getContent();break}const M={type:i.current.value,name:c.current.value,value:m};await K.save(M)&&($(o.current).modal("hide"),location.reload())},E=l=>{const m=t.find(({name:M})=>M==l);return m||{name:l,value:null}},O=h.useRef(),A=h.useRef(),I=h.useRef(),B=h.useRef(),H=h.useRef(),J=()=>{const l=E("assignation-lead-status"),m=JSON.parse(l.value);$(H.current).find(".modal-title").text("Estados de asignacion"),O.current.value="assignation-lead-status",$(A.current).val(m==null?void 0:m.lead).trigger("change"),$(I.current).val(m==null?void 0:m.manage).trigger("change"),$(B.current).val(m==null?void 0:m.task).trigger("change"),$(H.current).modal("show")},Y=()=>{const l=E("revertion-lead-status"),m=JSON.parse(l.value);$(H.current).find(".modal-title").text("Estados de reversion"),O.current.value="revertion-lead-status",$(A.current).val(m==null?void 0:m.lead).trigger("change"),$(I.current).val(m==null?void 0:m.manage).trigger("change"),$(B.current).val(m==null?void 0:m.task).trigger("change"),$(H.current).modal("show")},U=async l=>{l.preventDefault(),await Promise.all([K.save({type:"text",name:"archived-lead-status",value:JSON.stringify($(v.current).val())}),K.save({type:"text",name:"archived-lead-status-days",value:y.current.value})]),$(o.current).modal("hide"),location.reload()},W=async l=>{l.preventDefault(),await K.save({type:"text",name:"archived-lead-status-direct",value:JSON.stringify($(C.current).val())}),$(o.current).modal("hide"),location.reload()},Z=async l=>{l.preventDefault();const m={lead:A.current.value,manage:I.current.value,task:B.current.value},M={name:O.current.value,value:JSON.stringify(m),type:"json"};await K.save(M)&&($(o.current).modal("hide"),location.reload())},ee=async l=>{const m={name:"finished-project-status",value:l.target.value};await K.save(m)},ae=async l=>{const m={name:"converted-lead-status",value:l.target.value};await K.save(m)},ne=E("archived-lead-status"),te=E("archived-lead-status-days"),se=E("archived-lead-status-direct"),re=E("finished-project-status"),ie=E("converted-lead-status");h.useEffect(()=>{window.location.hash=w},[w]),h.useEffect(()=>{$(v.current).val(JSON.parse(ne.value)).select2(),$(C.current).val(JSON.parse(se.value)).select2(),$(y.current).val(te.value),$(f.current).val(re.value).select2(),$(j.current).val(ie.value).select2()},[null]);const X=E("gemini-extra-questions");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"card",style:{minHeight:"calc(100vh - 160px)"},hidden:P,children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"header-title mb-0",children:"Configura aqui las constantes del sistema"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3 mb-2",children:e.jsxs("div",{className:"nav flex-column nav-pills nav-pills-tab",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:[e.jsx("button",{className:`nav-link mb-1 text-start ${w==="general"?"active show":""}`,id:"v-general-tab","data-bs-toggle":"pill",href:"#v-general",role:"tab","aria-controls":"v-general","aria-selected":"true",onClick:()=>L("general"),children:"General"}),e.jsx("button",{className:`nav-link mb-1 text-start ${w==="clients-leads"?"active show":""}`,id:"v-clients-leads-tab","data-bs-toggle":"pill",href:"#v-clients-leads",role:"tab","aria-controls":"v-clients-leads","aria-selected":"false",onClick:()=>L("clients-leads"),children:"Clientes y leads"}),e.jsx("button",{className:`nav-link mb-1 text-start ${w==="projects"?"active show":""}`,id:"v-projects-tab","data-bs-toggle":"pill",href:"#v-projects",role:"tab","aria-controls":"v-projects","aria-selected":"false",onClick:()=>L("projects"),children:"Proyectos"}),e.jsx("button",{className:`nav-link mb-1 text-start ${w==="email"?"active show":""}`,id:"v-email-tab","data-bs-toggle":"pill",href:"#v-email",role:"tab","aria-controls":"v-email","aria-selected":"false",onClick:()=>L("email"),children:"Correo"}),e.jsx("button",{className:`nav-link mb-1 text-start ${w==="whatsapp"?"active show":""}`,id:"v-whatsapp-tab","data-bs-toggle":"pill",href:"#v-whatsapp",role:"tab","aria-controls":"v-whatsapp","aria-selected":"false",onClick:()=>L("whatsapp"),children:"WhatsApp"}),e.jsxs("button",{className:`nav-link mb-1 text-start ${w==="generativeai"?"active show":""}`,id:"v-generativeai-tab","data-bs-toggle":"pill",href:"#v-generativeai",role:"tab","aria-controls":"v-generativeai","aria-selected":"false",onClick:()=>L("generativeai"),children:["Chat IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]})]})}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("div",{className:"tab-content pt-0",children:[e.jsxs("div",{className:`tab-pane fade ${w==="general"?"show active":""} coming-soon`,id:"v-general",role:"tabpanel","aria-labelledby":"v-general-tab",children:[e.jsx("h4",{children:"Configuracion general"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Que julio no vea esto"}),e.jsx("p",{className:"card-text mb-1",children:"Si lo ves, aun esta en implementacion, pero quiero que vaya quedando el diseño"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Atte. Manuel (el 9)"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${w==="dashboard"?"show active":""}`,id:"v-dashboard",role:"tabpanel","aria-labelledby":"v-dashboard-tab",children:[e.jsx("h4",{children:"Configuracion de dashboard"}),e.jsx("div",{className:"row"})]}),e.jsxs("div",{className:`tab-pane fade ${w==="clients-leads"?"show active":""}`,id:"v-clients-leads",role:"tabpanel","aria-labelledby":"v-clients-leads-tab",children:[e.jsx("h4",{children:"Configuracion de clientes y leads"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("form",{className:"card card-body border p-2",onSubmit:U,style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado para archivar"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un lead que debe archivarse tras N días de inactividad?"}),e.jsx(Q,{eRef:v,label:"Escoge un estado",multiple:!0,children:r.filter(l=>l.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((l,m)=>e.jsx("option",{value:l.id,children:l.name},m))}),e.jsx(Te,{eRef:y,label:"Días de inactividad",type:"number",min:1}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Guardar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("form",{className:"card card-body border p-2",onSubmit:W,style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de archivación (directo)"}),e.jsx("p",{className:"card-text",children:"Define el estado que archiva inmediatamente al lead"}),e.jsx(Q,{eRef:C,label:"Escoge un estado",multiple:!0,children:r.filter(l=>l.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((l,m)=>e.jsx("option",{value:l.id,children:l.name},m))}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Guardar"})})]})}),e.jsxs("div",{className:"col-md-4 col-sm-6 col-xs-12",children:[e.jsxs("div",{className:"card card-body border p-2",onClick:J,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de asignacion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que asignan el usuario al cliente directamente?"})]}),e.jsxs("div",{className:"card card-body border p-2",onClick:Y,children:[e.jsx("h5",{className:"card-title mb-1",children:"Estados de reversion"}),e.jsx("p",{className:"card-text mb-0",children:"Cuales son los estados que quitan la asignacion del usuario directamente?"})]})]}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",style:{cursor:"default"},children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de Conversión"}),e.jsx("p",{className:"card-text mb-0",children:"¿Cuál es el estado que define mejor a un lead que ha sido convertido exitosamente?"}),e.jsx("blockquote",{className:"my-1",style:{borderLeft:"4px solid #007bff",backgroundColor:"var(--bs-gray-300)",padding:"5px 10px"},children:e.jsx("small",{children:"Esta configuración nos ayudará a identificar y medir las conversiones efectivas en el sistema."})}),e.jsx(Q,{eRef:j,label:"Escoge un estado",noMargin:!0,onChange:ae,children:r.filter(l=>l.table_id=="9c27e649-574a-47eb-82af-851c5d425434").map((l,m)=>e.jsx("option",{value:l.id,children:l.name},m))})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${w==="projects"?"show active":""}`,id:"v-projects",role:"tabpanel","aria-labelledby":"v-projects-tab",children:[e.jsx("h4",{children:"Configuracion de Proyectos"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Estado de culminación"}),e.jsx("p",{className:"card-text",children:"¿Qué estado define mejor a un proyecto que ha sido terminado?"}),e.jsx(Q,{eRef:f,label:"Escoge un estado",noMargin:!0,onChange:ee,children:r.filter(l=>l.table_id=="cd8bd48f-c73c-4a62-9935-024139f3be5f").map((l,m)=>e.jsx("option",{value:l.id,children:l.name},m))})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${w==="email"?"show active":""} coming-soon`,id:"v-email",role:"tabpanel","aria-labelledby":"v-email-tab",children:[e.jsx("h4",{children:"Configuracion de correo"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Credenciales"}),e.jsx("p",{className:"card-text mb-1",children:"De donde saldran los mensajes de correo hacia los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Correo actual: mundoweb.pe"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>{},children:[e.jsx("h5",{className:"card-title mb-1",children:"Diseño de correo para el lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que correo veran los nuevos leads cuando caigan al crm?"})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",children:[e.jsx("h5",{className:"card-title mb-1",children:"Correo administrador"}),e.jsx("p",{className:"card-text mb-1",children:"A que correo deseas que te enviemos un mensaje cuando se registe un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted ",style:{wordWrap:"wrap"},children:"Correo actual: gamboapalominocarlosmanuel@gmail.com"})})]})})]})]}),e.jsxs("div",{className:`tab-pane fade ${w==="whatsapp"?"show active":""}`,id:"v-whatsapp",role:"tabpanel","aria-labelledby":"v-whatsapp-tab",children:[e.jsx("h4",{children:"Configuracion de WhatsApp"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"whatsapp-new-lead-notification-message","Notificacion - Nuevo lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion - Nuevo lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje llegara al grupo/persona encargado de revisar los leads?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"whatsapp-new-lead-notification-waid","Grupo/Persona encargado","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Grupo/Persona encargado"}),e.jsx("p",{className:"card-text mb-1",children:"A quien(es) debemos notificar cuando se registre un nuevo lead?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"whatsapp-new-lead-notification-message-client","Notificacion al lead","simpleHTML"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Notificacion al lead"}),e.jsx("p",{className:"card-text mb-1",children:"Que mensaje le llegara al lead cuando sea registrado en el sistema?"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"whatsapp-assigned-message-client","Mensaje de asignación","simpleHTML","Variables disponibles: {{user}} = nombre del ejecutivo, {{lead}} = nombre del cliente"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Mensaje de asignación"}),e.jsx("p",{className:"card-text mb-1",children:"Mensaje que se enviará al lead cuando sea asignado a un usuario/ejecutivo"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})})]}),e.jsxs("div",{className:`tab-pane fade ${w==="generativeai"?"show active":""}`,id:"v-generativeai",role:"tabpanel","aria-labelledby":"v-generativeai-tab",children:[e.jsxs("h4",{children:["IA ",e.jsx("i",{className:"mdi mdi-star-four-points"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"gemini-api-key","API Key - Gemini","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"API Key - Gemini"}),e.jsxs("p",{className:"card-text mb-1",children:["Configura un API key para que ",e.jsx("b",{children:"Gemini"})," interactue con nuevos clientes."]}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:l=>_(l,"gemini-what-business-do","Que hace tu empresa [Separado por comas]","text"),children:[e.jsx("h5",{className:"card-title mb-1",children:"Que hace tu empresa"}),e.jsx("p",{className:"card-text mb-1",children:"Ayuda a Gemini a saber que productos y/o servicios buscan los clientes en tu empresa"}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})}),e.jsx("div",{className:"col-md-4 col-sm-6 col-xs-12",children:e.jsxs("div",{className:"card card-body border p-2",onClick:()=>V(!0),children:[e.jsx("h5",{className:"card-title mb-1",children:"Flujo de asistente (Beta)"}),e.jsx("p",{className:"card-text mb-1",children:"Configura el flujo de Gemini con leads para automatizar preguntas y respuestas."}),e.jsx("p",{className:"card-text",children:e.jsx("small",{className:"text-muted",children:"Click para modificar"})})]})})]})]})]})})]})})]}),e.jsx(Je,{questions:JSON.parse(X.value??"[]"),isOpen:P,setIsOpen:V,onModalOpen:_})]})}),e.jsxs(pe,{modalRef:H,title:"",onSubmit:Z,size:"sm",children:[e.jsx("input",{ref:O,type:"hidden"}),e.jsxs("div",{className:"row",id:"assignation-status-container",children:[e.jsxs(Q,{eRef:A,label:"Estado del lead",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:l})=>l=="e05a43e5-b3a6-46ce-8d1f-381a73498f33").sort((l,m)=>l.order-m.order).map((l,m)=>e.jsx("option",{value:l.id,children:l.name},`status-${m}`))]}),e.jsxs(Q,{eRef:I,label:"Estado de gestion",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),r.filter(({table_id:l})=>l=="9c27e649-574a-47eb-82af-851c5d425434").sort((l,m)=>l.order-m.order).map((l,m)=>e.jsx("option",{value:l.id,children:l.name},`status-${m}`))]}),e.jsxs(Q,{eRef:B,label:"Estado de la tarea",dropdownParent:"#assignation-status-container",required:!0,children:[e.jsx("option",{value:!0,children:"- Sin accion -"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"En curso",children:"En curso"}),e.jsx("option",{value:"Realizado",children:"Realizado"})]})]})]}),e.jsx(pe,{modalRef:o,title:"",onSubmit:z,size:"md",children:e.jsxs("div",{className:"row",id:"settings-crud-container",children:[e.jsx("input",{ref:c,type:"hidden"}),e.jsx("input",{ref:i,type:"hidden"}),e.jsx("div",{style:{display:N=="text"||N==""||N==null?"block":"none"},children:e.jsx(Ie,{eRef:a,label:e.jsxs(e.Fragment,{children:["Valor ",k&&e.jsxs("small",{children:["(",k,")"]})]}),col:"col-12"})}),e.jsx("div",{style:{display:N=="simpleHTML"?"block":"none"},children:e.jsx(Le,{eRef:u,label:e.jsxs(e.Fragment,{children:["Valor ",k&&e.jsxs("small",{children:["(",k,")"]})]}),col:"col-12",theme:"bubble"})}),e.jsxs("div",{className:"col-12",style:{display:N=="HTML"?"block":"none"},children:[e.jsx("label",{htmlFor:"",children:"Valor de la variable"}),e.jsx(ze,{apiKey:"k2389nfj5bxjbe7s3kkc3c6fututtaba9syfaviluaf2jew6",onInit:(l,m)=>p.current=m,init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})]})]})})]})};Ee((s,t)=>{if(!t.can("settings","root","all","list"))return location.href="/";Re(s).render(e.jsx(De,{...t,title:"Configuraciones",showTitle:!1,children:e.jsx(Ue,{...t})}))});

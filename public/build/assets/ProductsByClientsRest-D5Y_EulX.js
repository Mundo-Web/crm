var C=Object.defineProperty;var E=(n,a,s)=>a in n?C(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var c=(n,a,s)=>E(n,typeof a!="symbol"?a+"":a,s);import{m as o,j as e,G as $}from"./CreateReactScript-DWfX8fUe.js";import{B as N}from"./Adminto-BXiqLrYM.js";class y extends N{constructor(){super(...arguments);c(this,"path","clients");c(this,"get",async s=>{try{const{status:r,result:i}=await o.Fetch(`/api/${this.path}/${s}`);if(!r)throw new Error((i==null?void 0:i.message)||"Ocurrio un error inesperado");return i.data}catch(r){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),null}});c(this,"massiveDelete",async s=>{try{const{status:r,result:i}=await o.Fetch(`/api/${this.path}/massive-delete`,{method:"POST",body:JSON.stringify(s)});if(!r)throw new Error((i==null?void 0:i.message)||"Ocurrio un error inesperado");return!0}catch(r){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:r.message,type:"danger"}),!1}})}}c(y,"assign",async(s,r)=>{try{const{status:i,result:t}=await o.Fetch("/api/clients/assign",{method:r?"PUT":"DELETE",body:JSON.stringify({id:s})});if(!i)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(i){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:i.message,type:"danger"}),!1}}),c(y,"clientStatus",async(s,r)=>{try{const{status:i,result:t}=await o.Fetch("/api/clients/client-status",{method:"PATCH",body:JSON.stringify({client:s,status:r})});if(!i)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Correcto",body:t.message,type:"success"}),!0}catch(i){return o.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:i.message,type:"danger"}),!1}});const f=({className:n,style:a,html:s})=>e.jsx("div",{className:n,style:a,dangerouslySetInnerHTML:{__html:s}}),k=({id:n,status:a,name:s,description:r,assigned:i,priority:t,type:l,onChange:x,ends_at:m})=>{const d={Pendiente:{icon:"mdi mdi-clock-time-eight-outline",color:"btn-danger"},"En curso":{icon:"mdi mdi-timer-sand",color:"btn-primary"},Realizado:{icon:"mdi mdi-check",color:"btn-success"}},j={Llamada:{icon:"mdi mdi-phone-forward"},Correo:{icon:"mdi mdi-email-send"},"Por hacer":{icon:"mdi mdi-clock-start"}},b={Baja:{color:"bg-light"},Media:{color:"bg-success"},Alta:{color:"bg-warning"},Urgente:{color:"bg-danger"}};return e.jsx("div",{className:"card border border-default mb-1",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("blockquote",{className:"card-bodyquote mb-0",children:[e.jsxs("div",{className:"btn-group mb-1 d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:x?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`btn btn-xs ${d[a].color} btn-sm dropdown-toggle`,type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[e.jsx("i",{className:d[a].icon})," ",a," ",e.jsx("i",{className:"mdi mdi-chevron-down"})]}),e.jsx("div",{className:"dropdown-menu",children:Object.keys(d).map((h,u)=>e.jsxs("span",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>x(n,h),children:[e.jsx("i",{className:d[h].icon})," ",h]},`status-${u}`))})]}):e.jsxs("span",{className:`btn btn-xs ${d[a].color} btn-sm`,style:{whiteSpace:"nowrap",cursor:"default"},children:[e.jsx("i",{className:d[a].icon})," ",a]})}),e.jsxs("small",{className:"text-muted ms-1",children:["vence ",moment(m).fromNow()]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("span",{className:"badge bg-light text-dark me-1",children:[e.jsx("i",{className:j[l].icon})," ",l]}),e.jsx("span",{className:`badge ${b[t].color}`,children:t})]}),e.jsx("h5",{className:"mt-0",children:s}),r&&e.jsx("small",{children:e.jsx(f,{html:r})})]}),i&&e.jsxs("small",{children:[e.jsx("img",{src:`//${$.APP_DOMAIN}/api/profile/thumbnail/${i.relative_id}`,alt:i.fullname,className:"img-fluid avatar-xs rounded-circle me-1"}),"Asignado a ",e.jsx("b",{children:i.fullname})]})]})})},P=({id:n,type:a,name:s,process:r,description:i,created_at:t,updated_at:l,user_id:x,tasks:m,onTaskChange:d,showOptions:j=!0,session:b,onDeleteNote:h,onUpdateNote:u,status:g,manage_status:p})=>a?e.jsxs("div",{className:"card border border-primary mb-2",children:[s&&e.jsxs("div",{className:"card-header p-2 d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",children:r?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-timeline-text me-1"})," ",r," ",e.jsx("small",{className:"text-muted",children:s})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`${(a==null?void 0:a.icon)??"mdi mdi-clock"} me-1`})," ",s]})}),j&&x==b.service_user.id&&e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"dropdown-toggle arrow-none card-drop","data-bs-toggle":"dropdown","aria-expanded":"false",style:{cursor:"pointer"},children:e.jsx("i",{className:"mdi mdi-dots-vertical"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[e.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>u({id:n,type:a,name:s,description:i,tasks:m}),children:[e.jsx("i",{className:"fa fa-pen me-1"}),"Editar"]}),e.jsxs("a",{className:"dropdown-item",style:{cursor:"pointer"},onClick:()=>h(n),children:[e.jsx("i",{className:"fa fa-trash me-1"}),"Eliminar"]})]})]})]}),e.jsxs("div",{className:"card-body p-2",children:[i&&e.jsx("div",{className:"card-text",children:e.jsx(f,{html:i})}),m.length>0&&m.map((w,v)=>e.jsx(k,{...w,onChange:d},`task-${v}`)),(g||p)&&e.jsxs("div",{className:"d-flex mb-1 gap-1",children:[g&&e.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:g.color},children:g.name}),p&&e.jsx("span",{className:"badge rounded-pill px-1",style:{paddingTop:"4px",backgroundColor:p.color},children:p.name})]}),e.jsx("p",{className:"card-text",children:e.jsxs("small",{className:"text-muted",children:[moment(t).format("LLL")," ",l!=t&&e.jsxs("span",{children:["· ",e.jsx("i",{children:"Editado"})]})]})})]})]}):e.jsxs("div",{className:"card card-body p-2 mb-2",style:{border:"1px solid #dee2e6"},children:[e.jsxs("p",{className:"card-text mb-0",children:[e.jsx("i",{className:"mdi mdi-clock me-1"}),s]}),e.jsx("p",{className:"card-text",children:e.jsxs("small",{className:"text-muted",children:[moment(t).format("LLL")," ",l!=t&&e.jsxs("span",{children:["· ",e.jsx("i",{children:"Editado"})]})]})})]});class S extends N{constructor(){super(...arguments);c(this,"path","client-notes");c(this,"byClient",async s=>{const{result:r}=await o.Fetch(`/api/${this.path}/client/${s}`);return(r==null?void 0:r.data)??[]})}}class T extends N{constructor(){super(...arguments);c(this,"path","products-by-client");c(this,"byClient",async s=>{const{result:r}=await o.Fetch(`/api/${this.path}/client/${s}`);return(r==null?void 0:r.data)??[]})}}export{y as C,f as H,T as P,k as T,S as a,P as b};
